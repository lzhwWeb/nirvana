<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
 <meta name="referrer" content="no-referrer"/>

  <link rel="apple-touch-icon" sizes="180x180" href="/nirvana/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/nirvana/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/nirvana/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/nirvana/images/logo.svg" color="#222">

<link rel="stylesheet" href="/nirvana/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.2/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"lzhwweb.github.io","root":"/nirvana/","images":"/nirvana/images","scheme":"Gemini","version":"8.2.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}};
  </script>
<meta name="description" content="个人学习笔记">
<meta property="og:type" content="website">
<meta property="og:title" content="涅槃快乐是金">
<meta property="og:url" content="https://lzhwweb.github.io/nirvana/index.html">
<meta property="og:site_name" content="涅槃快乐是金">
<meta property="og:description" content="个人学习笔记">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="nirvana">
<meta property="article:tag" content="前端,javascript,node,git">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://lzhwweb.github.io/nirvana/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>
<title>涅槃快乐是金</title>
  




  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/nirvana/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">涅槃快乐是金</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/nirvana/" rel="section">首页</a></li>
        <li class="menu-item menu-item-git"><a href="/nirvana/categories/git" rel="section">git</a></li>
        <li class="menu-item menu-item-linux"><a href="/nirvana/categories/linux" rel="section">linux</a></li>
        <li class="menu-item menu-item-android"><a href="/nirvana/categories/android" rel="section">android</a></li>
        <li class="menu-item menu-item-随笔"><a href="/nirvana/categories/informal" rel="section">随笔</a></li>
        <li class="menu-item menu-item-mac"><a href="/nirvana/categories/mac" rel="section">mac</a></li>
        <li class="menu-item menu-item-react-native"><a href="/nirvana/categories/reactnative" rel="section">react-native</a></li>
        <li class="menu-item menu-item-算法"><a href="/nirvana/categories/algorithm" rel="section">算法</a></li>
        <li class="menu-item menu-item-读书笔记"><a href="/nirvana/categories/note" rel="section">读书笔记</a></li>
        <li class="menu-item menu-item-开发工具"><a href="/nirvana/categories/tool" rel="section">开发工具</a></li>
        <li class="menu-item menu-item-设计模式(ts)"><a href="/nirvana/categories/DesignPattern" rel="section">设计模式(TS)</a></li>
        <li class="menu-item menu-item-前端"><a href="/nirvana/categories/javascript" rel="section">前端</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="nirvana"
      src="/nirvana/images/headphoto.jpeg">
  <p class="site-author-name" itemprop="name">nirvana</p>
  <div class="site-description" itemprop="description">个人学习笔记</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/nirvana/archives">
          <span class="site-state-item-count">177</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">分类</span>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/CSS3%E7%9A%84REM%E8%AE%BE%E7%BD%AE%E5%AD%97%E4%BD%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nirvana/images/headphoto.jpeg">
      <meta itemprop="name" content="nirvana">
      <meta itemprop="description" content="个人学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="涅槃快乐是金">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/CSS3%E7%9A%84REM%E8%AE%BE%E7%BD%AE%E5%AD%97%E4%BD%93/" class="post-title-link" itemprop="url">CSS3的REM设置字体</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-11 21:12:40" itemprop="dateCreated datePublished" datetime="2021-03-11T21:12:40+08:00">2021-03-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-03-10 13:43:55" itemprop="dateModified" datetime="2021-03-10T13:43:55+08:00">2021-03-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/nirvana/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.3k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>在Web中使用什么单位来定义页面的字体大小，至今天为止都还在激烈的争论着，有人说PX做为单位好，有人说EM优点多，还有人在说百分比方便，以至于出现了CSS Font-Size: em vs. px vs. pt vs. percent这样的PK大局。不幸的是，仍然有不同的利弊，使各种技术都不太理想，但又无法不去用。真是进也难，退也难呀。</p>
<p>最近在学习em的相关知识的时候，无意之间让我拾得一宝，就是使用rem来设置Web页面的字体大小。让我一下子就来劲了，一口气看完并测试了一回，还真是爽歪歪的呀。师傅说好东西不能吃独食，于我就在这里给大家吹吹这个从没见过的REM。</p>
<p>在详细介绍rem之前，我们先一起来回顾一下我们常用的两种记量单位，也是备受争论的两个：</p>
<p>1、PX为单位</p>
<p>2、EM为单位</p>
<p>PX为单位<br>在Web页面初期制作中，我们都是使用“px”来设置我们的文本，因为他比较稳定和精确。但是这种方法存在一个问题，当用户在浏览器中浏览我们制作的Web页面时，他改变了浏览器的字体大小，这时会使用我们的Web页面布局被打破。这样对于那些关心自己网站可用性的用户来说，就是一个大问题了。因此，这时就提出了使用“em”来定义Web页面的字体。</p>
<p>em为单位<br>前面也说了，使用是“px”为单位是比较方便，而又一致，但在浏览器中放大或缩放浏览页面时会存在一个问题，要解决这个问题，我们可以使用“em”单位。Richard Rutter’在《How to size text using ems》一文中有做过详细的介绍，追至早一点，Richard Rutter也在《How to Size Text in CSS》中进行过深入的剖析。</p>
<p>这种技术需要一个参考点，一般都是以的“font-size”为基准。比如说我们使用“1em”等于“10px”来改变默认值“1em=16px”，这样一来，我们设置字体大小相当于“14px”时，只需要将其值设置为“1.4em”。</p>
<p>body {</p>
<p>font-size: 62.5%;/<em>10 ÷ 16 × 100% = 62.5%</em>/</p>
<p>}</p>
<p>h1 {</p>
<p>font-size: 2.4em; /*2.4em × 10 = 24px */</p>
<p>}</p>
<p>p {</p>
<p>font-size: 1.4em; /*1.4em × 10 = 14px */</p>
<p>}</p>
<p>li {</p>
<p>font-size: 1.4em; /*1.4 × ? = 14px ? */</p>
<p>}</p>
<p>为什么“li”的“1.4em”是不是“14px”将是一个问号呢？如果你了解过“em”后，你会觉得这个问题是多问的。前面也简单的介绍过一回，在使用“em”作单位时，一定需要知道其父元素的设置，因为“em”就是一个相对值，而且是一个相对于父元素的值，其真正的计算公式是：</p>
<p>1 ÷ 父元素的font-size × 需要转换的像素值 = em值</p>
<p>这样的情况下“1.4em”可以是“14px”,也可以是“20px”，或者说是“24px”，总之是一个不确定值，那么解决这样的问题，要么你知道其父元素的值，要么呢在任何子元素中都使用“1em”。这样一来可能又不是我们所需要的方法。</p>
<p>这里我只是简单的介绍了一个这两个单位的使用，具体一点的大家可以参阅：</p>
<p>Best Practices的站长Kyle的《CSS Font-Size: em vs. px vs. pt vs. percent》</p>
<p>Converting px into percentage and em for relative CSS font sizes</p>
<p>Em Vs Percent Widths</p>
<p>CSS: Units of Measurement</p>
<p>Jennifer Kyrnin的Using Points, Pixels, Ems, or Percentages for CSS Fonts</p>
<p>Rem为单位</p>
<p>  CSS3的出现，他同时引进了一些新的单位，包括我们今天所说的rem。在W3C官网上是这样描述rem的——“font size of the root element” 。下面我们就一起来详细的了解rem。</p>
<p>前面说了“em”是相对于其父元素来设置字体大小的，这样就会存在一个问题，进行任何元素设置，都有可能需要知道他父元素的大小，在我们多次使用时，就会带来无法预知的错误风险。而rem是相对于根元素，这样就意味着，我们只需要在根元素确定一个参考值，，在根元素中设置多大的字体，这完全可以根据您自己的需，大家也可以参考下图：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-a9ca7cd8c5a5eb5f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p>我们来看一个简单的代码实例：</p>
<p>html {font-size: 62.5%;/<em>10 ÷ 16 × 100% = 62.5%</em>/}  </p>
<p>body {font-size: 1.4rem;/*1.4 × 10px = 14px */}  </p>
<p>h1 { font-size: 2.4rem;/<em>2.4 × 10px = 24px</em>/}</p>
<p>我在根元素中定义了一个基本字体大小为62.5%（也就是10px。设置这个值主要方便计算，如果没有设置，将是以“16px”为基准 ）。从上面的计算结果，我们使用“rem”就像使用“px”一样的方便，而且同时解决了“px”和“em”两者不同之处。</p>
<p>浏览器的兼容性<br>rem是CSS3新引进来的一个度量单位，大家心里肯定会觉得心灰意冷呀，担心浏览器的支持情况。其实大家不用害怕，你可能会惊讶，支持的浏览器还是蛮多的，比如：Mozilla Firefox 3.6+、Apple Safari 5+、Google Chrome、IE9+和Opera11+。只是可怜的IE6-8无法，你们就把他们当透明了吧，我向来都是如此。</p>
<p>不过使用单位设置字体，可不能完全不考虑IE了，如果你想使用这个REM，但也想兼容IE下的效果，可你可考虑“px”和“rem”一起使用，用”px”来实现IE6-8下的效果，然后使用“Rem”来实现代浏览器的效果。就让IE6-8不能随文字的改变而改变吧，谁让这个Ie6-8这么二呢？哈。。。。大家不仿试试，还蛮有意思，说不定这个就是主流的度量单位了。、</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/CodeReview%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nirvana/images/headphoto.jpeg">
      <meta itemprop="name" content="nirvana">
      <meta itemprop="description" content="个人学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="涅槃快乐是金">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/CodeReview%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">CodeReview总结</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-11 21:12:40" itemprop="dateCreated datePublished" datetime="2021-03-11T21:12:40+08:00">2021-03-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-03-10 13:43:55" itemprop="dateModified" datetime="2021-03-10T13:43:55+08:00">2021-03-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/nirvana/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.2k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>我们时常会听到团队成员说：</p>
<ul>
<li>“这个项目搞代码审查简直是在浪费时间。”</li>
<li>“我没时间做代码审查。”</li>
<li>“发布会延迟，是因为我那个卑鄙的同事还没有审查过我的代码。”</li>
<li>“你能相信我的同事居然要求我改我的代码吗？我这么优雅完美的代码哪里还需要改呢。”</li>
</ul>
<h2 id="我们为什么要做代码审查？"><a href="#我们为什么要做代码审查？" class="headerlink" title="我们为什么要做代码审查？"></a><strong>我们为什么要做代码审查？</strong></h2><p>任何专业的软件开发人员其最重要的目标之一就是要不断提高自己的工作质量。但是只有团队协作才能力往一处使，劲往一处用，提高软件质量。代码审查是实现这一目标最重要的途径之一。特别是，代码审查可以：</p>
<ul>
<li>  从另一个角度发现缺陷和更好的解决办法。</li>
<li>  确保至少另外还有一人熟悉你的代码。</li>
<li>  通过翻阅资深开发人员的代码，帮助培训新员工。</li>
<li>  促进知识共享。</li>
<li>  激励开发人员更好地写代码、解决代码中的问题，以免在审查时被别人揪出来。</li>
</ul>
<h2 id="代码审查要彻底"><a href="#代码审查要彻底" class="headerlink" title="代码审查要彻底"></a><strong>代码审查要彻底</strong></h2><p>然而，除非能实实在在彻彻底底地在代码审查上花时间和精力，否则上述目标是很难实现的。</p>
<p>我的看法是大概25％的原始开发时间应该花在代码审查上。举个例子，如果一个开发人员需要用两天时间来实现某个程式，那么就应该花大约4小时进行审查。</p>
<p>当然时间并不是最重要的，关键是要看你能否正确审查代码。你必须了解你正在审查的代码。这意味着你不仅仅要知道它的的语法，还必须理解代码是如何融入应用程序这个大环境下，成为组件或库的一部分。如果你不能把握每一行代码的含义，那么你的审查就不到位，也不会非常有价值。这也是为什么良好执行的代码审查，大多不可能迅速被完成：因为我们需要时间来研究各种代码，如能触发给定功能以确保第三方API正确使用的代码。</p>
<p>在审查时，除了要寻找代码缺陷和其他问题，你还应该确保：</p>
<ul>
<li>  囊括所有必要的测试。</li>
<li>  已经写入了恰当的设计文档。</li>
</ul>
<p>即使是那些擅于写测试和文档的开发人员，也会在改变代码的时候忘记更新。代码评审时就应该确保这些资料不会随着时间而变得毫无用处。</p>
<h2 id="避免过度的代码审查"><a href="#避免过度的代码审查" class="headerlink" title="避免过度的代码审查"></a><strong>避免过度的代码审查</strong></h2><p>开发人员应该努力清空积压的审查任务。有一种方法是在早上代码审查，在开始自己的开发工作之前先搞定审查任务。当然你也可以午饭前后或者是一天结束之时审查代码。总而言之，你应该将代码当作是日常工作的一部分，而不是工作的负累，所以你应该避免：</p>
<ul>
<li>  没有时间处理积压的审查任务。</li>
<li>  由于审查的没有完成而导致了延迟发布。</li>
<li>  傻乎乎地再去审查已经不相干的代码，在交给你之后已经被改的面目全非。</li>
<li>  因为时间紧迫急急忙忙地走个过场。</li>
</ul>
<h2 id="编写可审查的代码"><a href="#编写可审查的代码" class="headerlink" title="编写可审查的代码"></a><strong>编写可审查的代码</strong></h2><p>出现代码积压而失控的问题，审查人员并不是唯一一个需要负责的人。举个例子，如果你的同事花了一周时间为一个大型程序添加了乱七八糟的代码，那么发布的补丁就会变得很难审查，有太多的内容需要理解和钻研。甚至于连代码目的和基本架构都看得云里雾里。这是写代码的不是。</p>
<p>在编写可审查的代码之前，还需要做一些准备。如果需要做一些棘手的架构决策，那么最好和审查人员先讨论一番。这将能让你的代码更容易审阅和理解，因为他们提前已经知道你想实现什么以及计划如何实现。这也可以避免，要是审查人员之后提出一个截然不同又更好的方法，而导致你不得不重写一大片代码的情况。</p>
<p>项目架构应该在设计文档中详细描述。这很重要，因为它能让新的项目人员更快地理解现有的代码库，还能有助于审查人员更好地完成他们的工作。此外，单元测试能让审查人员更好地理解各个组件的使用。</p>
<p>如果在你的补丁中还包含了第三方代码，那么单独提交。试想一下，要是代码中间插进去9000行jQuery，是不是大大增加了审查的难度！</p>
<p>创建可审查代码最重要的步骤之一就是给你的代码审查做注释。这需要你自己预先审查过，然后在你认为有助于审查人员理解的地方添加注释。我发现，注释后的代码审查所需的时间相对较短（通常只需几分钟）。当然，代码注释还是应该酌情使用。此外，有研究表明，开发人员自己在给代码注释的时候也会发现许多存在的缺陷。</p>
<h2 id="代码重构"><a href="#代码重构" class="headerlink" title="代码重构"></a><strong>代码重构</strong></h2><p>有时候，我们必须重构代码库。如果恰巧碰到的是一个大型的应用程序，那可能就会需要几天的时间（甚至更多），同时会产生大量的补丁。在这种情况下，想要做到标准流程的代码评审可能是不切实际的。</p>
<p>最好的解决办法是逐步重构代码。先给定一个合理范围，确定相应的代码库，然后朝着目标方向做整改和重构。第一部分完成之后，审查并发布，然后进行第二部分的重构……，直到全部完成。这种阶段式的方法可能并不总是可行的，但是如果我们在思考和规划时使用这样的方法，可以避免重构时大规模的单片补丁。当然这种方式可能需要的重构时间更多，但是也会产出更高质量的代码，以及更加轻松的审查过程。</p>
<h2 id="解决争端"><a href="#解决争端" class="headerlink" title="解决争端"></a><strong>解决争端</strong></h2><p>毫无疑问，团队中的每个成员都是人才，但是这也很容易导致在面对特定的编码问题时，会出现意见分歧的情况。作为开发人员，我们应该保持开放的态度，并且也要能虚心接受审查人员给出的不同意见。</p>
<p>而作为审查人员，说话要委婉。在提建议之前，先考虑一下你的意见是否真的更好或者仅仅只是因为品味不同而已。如果你选择的代码区域确实需要改进的，那么整个说服过程就会简单得多。并且话要这样讲，“这里还值得考虑一下……”，“有人建议说……”，而不是“我闭着眼睛写的算法也能比你的高效。”</p>
<p>当然如果你们双方都不肯妥协的话，可以要求你们都尊重的开发人员来看一看，给出他的意见。<br>译文链接：<a target="_blank" rel="noopener" href="http://www.codeceo.com/article/code-review-5-tips.html">http://www.codeceo.com/article/code-review-5-tips.html</a><br>英文原文：<a target="_blank" rel="noopener" href="https://medium.com/@salsita/practical-lessons-in-peer-code-review-b4dbc84e88d3">Practical Lessons in Peer Code Review</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/Console%E6%96%B0%E5%AD%A6%E4%B9%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nirvana/images/headphoto.jpeg">
      <meta itemprop="name" content="nirvana">
      <meta itemprop="description" content="个人学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="涅槃快乐是金">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/Console%E6%96%B0%E5%AD%A6%E4%B9%A0/" class="post-title-link" itemprop="url">Console新学习</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-11 21:12:40" itemprop="dateCreated datePublished" datetime="2021-03-11T21:12:40+08:00">2021-03-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-03-10 13:43:55" itemprop="dateModified" datetime="2021-03-10T13:43:55+08:00">2021-03-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/nirvana/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.6k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>接着上一篇<a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%AE%9E%E7%94%A8%E7%9A%84%E8%B0%83%E8%AF%95%E5%91%BD%E4%BB%A4console%E4%BD%BF%E7%94%A8">前端实用的调试命令console使用</a></p>
<h4 id="查看所有方法"><a href="#查看所有方法" class="headerlink" title="查看所有方法"></a>查看所有方法</h4><p><code>console</code> 除了上面的几个方法还有什么方法呢？<code>log</code> 除了能打印字符串外，还能打印出对象，我们可以利用 <code>console.log</code> 打印自己。</p>
<p>代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(console);</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Object &#123;</span><br><span class="line">    assert: ...,</span><br><span class="line">    clear: ...,</span><br><span class="line">    count: ...,</span><br><span class="line">    debug: ...,</span><br><span class="line">    dir: ...,</span><br><span class="line">    dirxml: ...,</span><br><span class="line">    error: ...,</span><br><span class="line">    group: ...,</span><br><span class="line">    groupCollapsed: ...,</span><br><span class="line">    groupEnd: ...,</span><br><span class="line">    info: ...,</span><br><span class="line">    log: ...,</span><br><span class="line">    markTimeline: ...,</span><br><span class="line">    profile: ...,</span><br><span class="line">    profileEnd: ...,</span><br><span class="line">    table: ...,</span><br><span class="line">    time: ...,</span><br><span class="line">    timeEnd: ...,</span><br><span class="line">    timeStamp: ...,</span><br><span class="line">    timeline: ...,</span><br><span class="line">    timelineEnd: ...,</span><br><span class="line">    trace: ...,</span><br><span class="line">    warn: ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面的 <code>console</code> 是 <code>chrome浏览器</code>中打印出来的 。<br>我们可以在 <code>开发环境</code> 中，<code>合理的利用</code> 这些方法来帮助我们开发。</p>
<h4 id="十一：清理控制台"><a href="#十一：清理控制台" class="headerlink" title="十一：清理控制台"></a>十一：清理控制台</h4><p>如果我们在控制台调试的时候。浏览器和命令行 <code>clear</code> 一样提供了一个清理函数 <code>console.clear()</code> 。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.clear()</span><br></pre></td></tr></table></figure>

<p>当然我们也可以用 <code>chrome</code> 的 <code>command line api</code> 来清理控制台。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">clear()</span><br></pre></td></tr></table></figure>

<p>又或者可以使用按键Mac上 <code>cmd + k</code> ，Win <code>ctrl + l</code>（我用的是<code>chrome浏览器</code>）。</p>
<h4 id="十二：分组并展开"><a href="#十二：分组并展开" class="headerlink" title="十二：分组并展开"></a>十二：分组并展开</h4><p>当代码非常长，或者我们需要把一个函数，或者一个文件中的函数等区分出来。我们可以使用分组来实现。<br>上一篇用group可以分组，但是每次都要手动展开，我们可以使用 <code>console.groupCollapsed</code> ，用法和 <code>console.group</code> 类似。</p>
<p>代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">console.group(&#39;人&#39;);</span><br><span class="line">console.log(&quot;手&quot;);</span><br><span class="line">console.log(&quot;脚&quot;);</span><br><span class="line">console.groupEnd();</span><br><span class="line"></span><br><span class="line">console.group(&#39;修仙&#39;);</span><br><span class="line">console.log(&quot;法力无边&quot;);</span><br><span class="line">console.log(&quot;腾云架雾&quot;);</span><br><span class="line">console.groupEnd();</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-88f3c68fa9f3197c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p>##十三：查看运行堆栈</p>
<p> <code>console.trace</code> 可以看透运行时的结果栈。<br>代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function add(num) &#123;</span><br><span class="line">    if (0 &lt; num) &#123;</span><br><span class="line">        console.trace(&quot;现在num的值为&quot;, num);</span><br><span class="line">        return num + add(num - 1);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        return 0;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var a &#x3D;3;</span><br><span class="line">add(3);</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-111b03c67baabdb6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h4 id="十四：统计次数"><a href="#十四：统计次数" class="headerlink" title="十四：统计次数"></a>十四：统计次数</h4><p>有时候我们需要统计一个函数或者被调用了几次，我们通常会增加一个变量 <code>count</code> 来记录，然后在控制台中查看。这样相当的麻烦，我们可以使用 <code>console.count</code> 函数来帮忙我们记录次数，并输出。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function hi(name) &#123;</span><br><span class="line">    console.count(name);</span><br><span class="line">    return &quot;hi &quot; + name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">for(var i &#x3D; 0; i &lt; 10; i++) &#123;</span><br><span class="line">    if(i &lt; 4) &#123;</span><br><span class="line">        hi(&quot;person&quot;);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        hi(&quot;god&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">person: 1</span><br><span class="line">person: 2</span><br><span class="line">person: 3</span><br><span class="line">person: 4</span><br><span class="line">god: 1</span><br><span class="line">god: 2</span><br><span class="line">god: 3</span><br><span class="line">god: 4</span><br><span class="line">god: 5</span><br><span class="line">god: 6</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/Error--Can't-resolve-'fs'-in-%EF%BC%88webpack-2%E9%85%8D%E7%BD%AECSS-loadeers%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nirvana/images/headphoto.jpeg">
      <meta itemprop="name" content="nirvana">
      <meta itemprop="description" content="个人学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="涅槃快乐是金">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/Error--Can't-resolve-'fs'-in-%EF%BC%88webpack-2%E9%85%8D%E7%BD%AECSS-loadeers%EF%BC%89/" class="post-title-link" itemprop="url">Error--Can't resolve 'fs' in （webpack 2配置CSS-loadeers）</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-11 21:12:40" itemprop="dateCreated datePublished" datetime="2021-03-11T21:12:40+08:00">2021-03-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-03-10 22:07:05" itemprop="dateModified" datetime="2021-03-10T22:07:05+08:00">2021-03-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/nirvana/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>522</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h4 id="前言，在之前有配置过webpack-2-中css-loaders，但是怎么也不正确"><a href="#前言，在之前有配置过webpack-2-中css-loaders，但是怎么也不正确" class="headerlink" title="前言，在之前有配置过webpack 2 中css loaders，但是怎么也不正确"></a>前言，在之前有配置过webpack 2 中css loaders，但是怎么也不正确</h4><p>报错：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ERROR in .&#x2F;~&#x2F;convert-source-map&#x2F;index.js</span><br><span class="line">Module not found: Error: Can&#39;t resolve &#39;fs&#39; in &#39;&#x2F;Users&#x2F;ceshi&#x2F;Desktop&#x2F;webpack&#x2F;node_modules&#x2F;convert-source-map&#39;</span><br><span class="line"> @ .&#x2F;~&#x2F;convert-source-map&#x2F;index.js 2:9-22</span><br><span class="line"> @ .&#x2F;~&#x2F;css-loader&#x2F;lib&#x2F;css-base.js</span><br><span class="line"> @ .&#x2F;~&#x2F;css-loader!.&#x2F;app&#x2F;style.css</span><br><span class="line"> @ .&#x2F;app&#x2F;style.css</span><br><span class="line"> @ .&#x2F;app&#x2F;main.js</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/10024246-e3392ce8d53748bc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p>解决方法，修改webpack的配置文件，增加一句代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">node: &#123;</span><br><span class="line">       fs: &#39;empty&#39;</span><br><span class="line">   &#125;,</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/10024246-525a508c7db21758.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/FP-RP-FRP%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nirvana/images/headphoto.jpeg">
      <meta itemprop="name" content="nirvana">
      <meta itemprop="description" content="个人学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="涅槃快乐是金">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/FP-RP-FRP%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F/" class="post-title-link" itemprop="url">FP-RP-FRP编程范式</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-11 21:12:40" itemprop="dateCreated datePublished" datetime="2021-03-11T21:12:40+08:00">2021-03-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-03-10 22:07:18" itemprop="dateModified" datetime="2021-03-10T22:07:18+08:00">2021-03-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/nirvana/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>914</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><img src="https://upload-images.jianshu.io/upload_images/10024246-e551555c2919e46c.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-837712d823c88c44.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-7ab8e5e5c0fa23fa.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-820693fcfaded8bc.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-0dd0666c417ff235.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<blockquote>
<p>数据和视图的分离-&gt;解耦（开放封闭原则）jq的数据与视图混在一块（意大利面条式代码），Vue的数据与视图分离 以数据驱动视图（只关心数据变化，DOM操作被封装）jq直接用js修改视图，Vue以数据驱动视图</p>
</blockquote>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-42d5fd6651b5c730.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-c4476563b9f416e1.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-61c4c317ab6a1925.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-1b0d1dad4068ccde.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-488439027be1a632.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-11073c21bc77376b.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-cbb9a98c4e60d8ec.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><br><img src="https://upload-images.jianshu.io/upload_images/10024246-cb1449cf1705be2c.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<blockquote>
<p>数据不可变： 它要求你所有的数据都是不可变的，这意味着如果你想修改一个对象，那你应该创建一个新的对象用来修改，而不是修改已有的对象。 无状态： 主要是强调对于一个函数，不管你何时运行，它都应该像第一次运行一样，给定相同的输入，给出相同的输出，完全不依赖外部状态的变化。 为了实现这个目标，函数式编程提出函数应该具备的特性：没有副作用和纯函数。</p>
</blockquote>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-7fe37c43559a2198.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-bfbb62895921c27e.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<blockquote>
<p>在不纯的版本中，checkAge 的结果将取决于 minimum 这个可变变量的值。换句话说，它取决于系统状态（system state）；，因为它引入了外部的环境，从而增加了认知负荷。但这种依赖状态是影响系统复杂度的罪魁祸首，输入值之外的因素能够左右 checkAge 的返回值，不仅让它变得不纯，而且导致每次我们思考整个软件的时候都痛苦不堪。 另一方面，使用纯函数的形式，函数就能做到自给自足。</p>
</blockquote>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-44dafec478425db0.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<blockquote>
<p>保证函数没有副作用，一来能保证数据的不可变性，二来能避免很多因为共享状态带来的问题。当你一个人维护代码时候可能还不明显，但随着项目的迭代，项目参与人数增加，大家对同一变量的依赖和引用越来越多，这种问题会越来越严重。最终可能连维护者自己都不清楚变量到底是在哪里被改变而产生Bug。<code>传递引用一时爽，代码重构火葬场</code>  </p>
</blockquote>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-e4daf335f0fe4716.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-15e68c71c8faa114.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-c933554bb5a211a3.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<blockquote>
<p>为什么这个单元函数很重要？还记得我们之前说过的，函数的返回值，有且只有一个嘛？ 如果我们想顺利的组装流水线，那我就必须保证我每个加工站的输出刚好能流向下个工作站的输入。因此，在流水线上的加工站必须都是单元函数。</p>
</blockquote>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-f0ab24af87d1c69a.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-01a3212c7593560d.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-e5e473d34cd15743.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-4fdfb5310ffc3c0c.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<blockquote>
<p>函数组合的好处显而易见，它让代码变得简单而富有可读性，同时通过不同的组合方式，我们可以轻易组合出其他常用函数，让我们的代码更具表现力</p>
</blockquote>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-c947c9ccd7dccd73.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-d1f499f381e2ff6c.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<blockquote>
<p>函数式编程很理想，但是我们还是要与外部数据进行交互，不然我们的代码就没有意义当一套复杂的数据响应被应用于一套复杂的应用中时，开发者往往在响应来响应去的连环嵌套响应中被搞昏头，因为数据的响应而牵一发动全身，导致整个响应很难控制，这是数据响应必须解决的问题。</p>
</blockquote>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-dee5d9f145d85c79.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-c027a0b749c44425.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-1badbd997d2e324e.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/HTML5%E5%8E%BB%E9%99%A4input-[type=search]-%E7%9A%84%E9%BB%98%E8%AE%A4%E8%BE%B9%E6%A1%86%E5%92%8C%E5%88%A0%E9%99%A4%E6%8C%89%E9%92%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nirvana/images/headphoto.jpeg">
      <meta itemprop="name" content="nirvana">
      <meta itemprop="description" content="个人学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="涅槃快乐是金">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/HTML5%E5%8E%BB%E9%99%A4input-%5Btype=search%5D-%E7%9A%84%E9%BB%98%E8%AE%A4%E8%BE%B9%E6%A1%86%E5%92%8C%E5%88%A0%E9%99%A4%E6%8C%89%E9%92%AE/" class="post-title-link" itemprop="url">HTML5去除input[type=search]的默认边框和删除按钮</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-11 21:12:40" itemprop="dateCreated datePublished" datetime="2021-03-11T21:12:40+08:00">2021-03-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-03-10 22:07:34" itemprop="dateModified" datetime="2021-03-10T22:07:34+08:00">2021-03-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/nirvana/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>473</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>input [type=search]  是HTML新属性 ， 定义用于搜索的文本字段；</p>
<p>x-webkit-speech  属性：在GOOGLE浏览器上  还会显示一个小话筒</p>
<p> autocomplete=”off”  属性  关闭浏览器自动记录之前输入的值</p>
<p>webkit内核浏览器里 input 框类型如果是 type=”search” </p>
<p>那么将会有边框问题，border:0px 也不能起到作用；</p>
<p>解决办法是在CSS里写上</p>
<p>input[type=”search”]{-webkit-appearance:none;} </p>
<p>既可解决。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">input[type&#x3D;search] &#123;</span><br><span class="line">-webkit-appearance: textfield;</span><br><span class="line">-webkit-box-sizing: content-box;</span><br><span class="line">font-family: inherit;</span><br><span class="line">font-size: 100%;</span><br><span class="line">&#125;</span><br><span class="line">input::-webkit-search-decoration,</span><br><span class="line">input::-webkit-search-cancel-button &#123;</span><br><span class="line">display: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/HTTPS-%E4%B8%BA%E4%BB%80%E4%B9%88%E5%AE%89%E5%85%A8--%E7%9C%9F%E7%9A%84%E5%AE%89%E5%85%A8%E5%90%97-/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nirvana/images/headphoto.jpeg">
      <meta itemprop="name" content="nirvana">
      <meta itemprop="description" content="个人学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="涅槃快乐是金">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/HTTPS-%E4%B8%BA%E4%BB%80%E4%B9%88%E5%AE%89%E5%85%A8--%E7%9C%9F%E7%9A%84%E5%AE%89%E5%85%A8%E5%90%97-/" class="post-title-link" itemprop="url">HTTPS-为什么安全--真的安全吗-</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-11 21:12:40" itemprop="dateCreated datePublished" datetime="2021-03-11T21:12:40+08:00">2021-03-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-03-10 13:43:55" itemprop="dateModified" datetime="2021-03-10T13:43:55+08:00">2021-03-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/nirvana/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.7k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><strong>一、HTTPS 为什么安全</strong></p>
<p>HTTPS，也称作 HTTP over TLS，TLS 前身是 SSL，会有各个版本。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-fd6d4d24b72aadc1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p>TLS协议在TCP/IP协议栈中的关系</p>
<p>上图描述了在TCP/IP协议栈中TLS(各子协议）和 HTTP 的关系。HTTP+TLS 也就是 HTTPS，和 HTTP 相比，<strong>HTTPS的优势：</strong></p>
<ul>
<li><p>  <strong>数据完整性：内容传输经过完整性校验</strong></p>
</li>
<li><p>  <strong>数据隐私性：内容经过对称加密，每个连接生成一个唯一的加密密钥</strong></p>
</li>
<li><p>  <strong>身份认证：第三方无法伪造服务端（客户端）身份</strong></p>
</li>
</ul>
<p>上面内容参考了HTTPS工作原理。（石头在N 久前用印象笔记收藏的，现在好多原文访问不了了）</p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-5719d83a695f5af8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p>HTTPS 原理</p>
<p>上图就是大致介绍了 HTTPS 的握手流程，感兴趣的同学可以用 WireShark 抓包详细看看其中的每一个步骤，有助于理解 HTTPS 的完整流程。这里，我就不详述了。</p>
<p><strong>大致就是客户端和服务端通过“握手会谈”商量出一个双方支持的加密算法和相应随机参数，得到一对密钥，后续的传输的内容都通过这对密钥进行加解密。</strong></p>
<p>这对密钥很牛皮，比如要加密传输消息『tangleithu』，客户端通过公钥加密得到的密文『xyyaabbccdd』进行传输，服务端用自己的私钥对密文解密，恰好能得到『tangleithu』。中间错一位都不行，这样就保证了数据完整和隐私性。</p>
<p><strong>因此，你在通过 HTTPS 访问网站的时候，就算流量被截取监听，获取到的信息也是加密的，啥实质性的内容也看不到。</strong></p>
<p>例如，如下图所示，当我访问某个网站，此时通过 wireshark 抓包得到的信息，能获得仅仅是一些通信的IP地址而已。<br><img src="https://upload-images.jianshu.io/upload_images/10024246-ce31fa33f0af5bd4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><code>HTTPS加密传输</code></p>
<p>这下放心了吗？</p>
<p>摸鱼的过程中，就算访问的 IP 地址被知道了，好像也无关紧要？</p>
<p>其实，有了 IP 地址也能获取不少信息了。<br><img src="https://upload-images.jianshu.io/upload_images/10024246-948f6a8849792d67.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p>还好这个 IP 搜出来是 github，而不是……</p>
<p>你或许会高兴，连个网站域名都看不到，可以放心摸鱼了。不过，这是真的吗？</p>
<p><strong>二、HTTPS 真的安全吗？</strong></p>
<p><strong>HTTPS 真的完全安全吗？连访问的域名都获取不到？答案是否定的。</strong></p>
<p><strong>上述 HTTPS 在握手阶段有一个很重要的东西 —— 证书。</strong></p>
<p><strong>1.SNI —— 域名裸奔</strong></p>
<p>当访问 HTTPS 站点时，会首先与服务器建立 SSL 连接，第一步就是请求服务器的证书。</p>
<p>当一个 Server IP 只对应一个域名（站点）时，很方便，任意客户端请求过来，无脑返回该域名（服务）对应的证书即可。但 IP 地址（IPv4）是有限的呀，多个域名复用同一个 IP 地址的时候怎么办？</p>
<p>服务器在发送证书时，不知道浏览器访问的是哪个域名，所以不能根据不同域名发送不同的证书。</p>
<p>因此 TLS 协议升级了，多了 SNI 这个东西，SNI 即 Server Name Indication，是为了解决一个服务器使用多个域名和证书的 SSL/TLS 扩展。</p>
<p>现在主流客户端都支持这个协议的。别问我怎么知道这个点的，之前工作上因为这个事情还费了老大劲儿……</p>
<p>它的原理是：在与服务器建立 SSL 连接之前，先发送要访问站点的域名（Hostname），这样服务器会根据这个域名返回一个合适的证书。此时还没有办法进行加解密，因此至少这个域名是裸奔的。</p>
<p>如下图所示，上面的截图其实是访问网站的抓包情况，客户端发送握手请求时，很自觉带上了自己的域名。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-0a184ff9bbd874b4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p>HTTPS SNI</p>
<p>因此，即便是 HTTPS，访问的域名信息也是裸奔状态。你上班期间访问小电影网站，都留下了痕迹，若接入了公司网络，就自然而然被抓个正着。</p>
<p>除了域名是裸奔外，其实还有更严重的风险，那就是中间人攻击。</p>
<p><strong>2.中间人攻击</strong></p>
<p>前面也提到 HTTPS 中的关键其实在于这个证书。从名字可以看出来，中间人攻击就是在客户端、服务器之间多了个『中介』，『中介』在客户端、服务器双方中伪装对方，如下图所示，这个『MitmProxy』充当了中间人，互相欺骗：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-4d75f48b1a4baae1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p>中间人攻击，来源 evil0x</p>
<p>可以安装 MitmProxy 或者 Fiddler 之类的抓包软件尝试一把，然后开启代理。</p>
<p>此时用手机访问百度，得到的信息如下：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-61b38a14afc3cfbf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p>证书信任前</p>
<p>提示，连接不是私密连接，其实就是浏览器识别了证书不太对劲，没有信任。而如果此时手机安装了 Fiddler 的证书，就会正常访问。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-c8a43fe23891db6c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p>证书信任后可正常访问</p>
<p>因此，当你信任证书后，在中间人面前，又是一览无余了。</p>
<p>而如果你用了公司电脑，估计你有相应的操作让信任证书吧，或者手机上是否有安装类似的客户端软件吧？</p>
<p>抓紧时间看看手机的证书安装明细</p>
<p><strong>三、如何防止信息安全，反爬</strong></p>
<p>前面提到，要实施中间人攻击，关键在于证书是否得到信任。浏览器的行为是证书可以让用户授权是否信任，而 APP 就可以开发者自己控制。</p>
<p>比如我尝试通过类似的方式对某匿名社区进行抓包解密 HTTPS，但最终失败了，为什么呢？</p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-890b702b230b7c79.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p>这就要谈到『SSL Pinning』技术。</p>
<p>App 可以自己检验 SSL 握手时服务端返回的证书是否合法，“SSL pinning” 技术说的就是在 App 中只信任固定的证书或者公钥。</p>
<p>因为在握手阶段服务端的证书必须返回给客户端，如果客户端在打包的时候，就把服务端证书放到本地，在握手校验证书的环节进行比较，服务端返回的证书和本地内置的证书一模一样，才发起网络请求。否则，直接断开连接，不可用。</p>
<p>当然，一般情况下，用这种技术也就能防止 HTTPS 信息被解密了。</p>
<p>不过，也还有其他的技术能够破解这种方法，比如 Android 下的一些 Hook 技术，具体而言就是绕过本地证书强校验的逻辑。感兴趣的同学可以抱着学习目的研究一下。不过据说这种方式需要对系统进行 Root、越狱等，需要一些更高权限的设置。</p>
<p>因此，也告诫我们，一定不要乱安装一些软件，稍不注意可能就中招，让自己在互联网上进行裸奔。一方面个人隐私信息等泄露，另外一个方面可能一些非常重要的如账户密码等也可能被窃取。</p>
<p><strong>四、可能的监控手段有哪些？</strong></p>
<p>办公电脑当然要接入公司网络，通过上面介绍的内容，你也应该知道，你在什么时候浏览了哪些网站，公司其实都是一清二楚的。</p>
<p>若自己的手机如果接入了公司网络也是一模一样（连 Agent 软件都不需要装）。这就提醒我们，私人上网尽量用自己的移动网络呀。</p>
<p>上面提到，如一些涉及隐私的敏感信息，如一些 PC 软件、手机 App 自己内部加密传输的话，内容加密（包括但不限于 HTTPS）不被破解也问题不大。</p>
<p>不过，这当然依赖这些软件设计者的水平了。比如同一个匿名用户对外展示的 ID 不能相同，如果是同一个的话也恰好暴露了逻辑漏洞。</p>
<p>当然，我们还是不要抱有侥幸心理，在监管的要求下，如果确实有一些违法等不恰当的言论等，始终还是有门路找到你的。</p>
<p>更何况，一般办公电脑都会预安装一些公司安全软件，至于这些软件究竟都干了些什么，有没有进行传说中悄悄截图什么的，这就因人（公司）而异了。（不讨论类似行为是否涉及到侵犯了员工隐私等问题）</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/IOSInvalidregularexpression/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nirvana/images/headphoto.jpeg">
      <meta itemprop="name" content="nirvana">
      <meta itemprop="description" content="个人学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="涅槃快乐是金">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/IOSInvalidregularexpression/" class="post-title-link" itemprop="url">IOS Invalid regular expression： invalid group specifier name</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-11 21:12:40" itemprop="dateCreated datePublished" datetime="2021-03-11T21:12:40+08:00">2021-03-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-03-10 22:20:38" itemprop="dateModified" datetime="2021-03-10T22:20:38+08:00">2021-03-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/nirvana/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>560</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>如果正则表达式中包含零宽断言的话 , 在安卓手机上正常 , 但是在ios上会报以下错误</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Info Warn Error SyntaxError: Invalid regular expression: invalid group specifier name</span><br></pre></td></tr></table></figure>
<p><code>常用零宽断言：?&lt;=、?&lt;!、?!、?=</code>;<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let reg &#x3D; new RegExp(&#96;(?&lt;&#x3D;\\b$&#123;key&#125;&#x3D;)[^&amp;]*&#96;) , str &#x3D; this.params || &#39;&#39;, target &#x3D; str.match(reg); if(target) &#123;  return target[0] &#125;</span><br></pre></td></tr></table></figure><br>这种写法在安卓是正常的，IOS就不行，因为该正则包含了零宽断言，会导致页面空白，打不开，需要相对应的转换才能使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let reg &#x3D; new RegExp(&#96;(^|&amp;)$&#123;key&#125;&#x3D;([^&amp;]*)(&amp;|$)&#96;),str &#x3D; this.params || &#39;&#39;, target &#x3D; str.match(reg);if(target) &#123; return target[2]&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/JS-Array%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95%E8%AF%A6%E8%A7%A3%E5%8F%8A%E5%85%BC%E5%AE%B9%E6%80%A7%E4%BB%A3%E7%A0%81%EF%BC%88%E4%B8%80%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nirvana/images/headphoto.jpeg">
      <meta itemprop="name" content="nirvana">
      <meta itemprop="description" content="个人学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="涅槃快乐是金">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/JS-Array%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95%E8%AF%A6%E8%A7%A3%E5%8F%8A%E5%85%BC%E5%AE%B9%E6%80%A7%E4%BB%A3%E7%A0%81%EF%BC%88%E4%B8%80%EF%BC%89/" class="post-title-link" itemprop="url">JS Array常用方法详解及兼容性代码（一）</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-11 21:12:40" itemprop="dateCreated datePublished" datetime="2021-03-11T21:12:40+08:00">2021-03-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-03-10 22:09:59" itemprop="dateModified" datetime="2021-03-10T22:09:59+08:00">2021-03-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/nirvana/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>7k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>6 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[ES5中，Array新增API之forEach、filter、map、reduce]</p>
<h2 id="一：-forEach"><a href="#一：-forEach" class="headerlink" title="一： forEach"></a>一： forEach</h2><p>forEach() 方法对数组的每个元素执行一次提供的函数。<br><strong>注意:</strong> <code>没有返回一个新数组! &amp; 没有返回值!</code><br><strong>应用场景：</strong>为一些相同的元素，绑定事件处理器！</p>
<p><strong>语法:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">array.forEach(callback(currentValue, index, array)&#123;</span><br><span class="line">    &#x2F;&#x2F;do something</span><br><span class="line">&#125;, this)</span><br><span class="line"></span><br><span class="line">array.forEach(callback[, thisArg])</span><br></pre></td></tr></table></figure>

<p><strong>参数：</strong><br><code>callback</code>:<br>为数组中每个元素执行的函数，该函数接收三个参数：</p>
<blockquote>
<p><code>currentValue(当前值)</code><br>数组中正在处理的当前元素。<br><code>index(索引)</code><br>数组中正在处理的当前元素的索引。<br><code>array</code><br>forEach()方法正在操作的数组。</p>
</blockquote>
<p><code>thisArg</code>可选<br>可选参数。当执行回调 函数时用作this的值(参考对象)。</p>
<p><strong>返回值</strong><br>undefined</p>
<p><strong>注意：</strong><code>没有办法中止或者跳出 forEach 循环，除了抛出一个异常。如果你需要这样，使用forEach()方法是错误的，你可以用一个简单的循环作为替代。如果您正在测试一个数组里的元素是否符合某条件，且需要返回一个布尔值，那么可使用 Array.every或 Array.some。如果可用，新方法 find()或者findIndex 也可被用于真值测试的提早终止。</code></p>
<p><strong>兼容旧环境</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">if (!Array.prototype.forEach) &#123;</span><br><span class="line"></span><br><span class="line">  Array.prototype.forEach &#x3D; function(callback, thisArg) &#123;</span><br><span class="line"></span><br><span class="line">    var T, k;</span><br><span class="line"></span><br><span class="line">    if (this &#x3D;&#x3D; null) &#123;</span><br><span class="line">      throw new TypeError(&#39; this is null or not defined&#39;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 1. Let O be the result of calling toObject() passing the</span><br><span class="line">    &#x2F;&#x2F; |this| value as the argument.</span><br><span class="line">    var O &#x3D; Object(this);</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 2. Let lenValue be the result of calling the Get() internal</span><br><span class="line">    &#x2F;&#x2F; method of O with the argument &quot;length&quot;.</span><br><span class="line">    &#x2F;&#x2F; 3. Let len be toUint32(lenValue).</span><br><span class="line">    var len &#x3D; O.length &gt;&gt;&gt; 0;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 4. If isCallable(callback) is false, throw a TypeError exception. </span><br><span class="line">    &#x2F;&#x2F; See: http:&#x2F;&#x2F;es5.github.com&#x2F;#x9.11</span><br><span class="line">    if (typeof callback !&#x3D;&#x3D; &quot;function&quot;) &#123;</span><br><span class="line">      throw new TypeError(callback + &#39; is not a function&#39;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 5. If thisArg was supplied, let T be thisArg; else let</span><br><span class="line">    &#x2F;&#x2F; T be undefined.</span><br><span class="line">    if (arguments.length &gt; 1) &#123;</span><br><span class="line">      T &#x3D; thisArg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 6. Let k be 0</span><br><span class="line">    k &#x3D; 0;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 7. Repeat, while k &lt; len</span><br><span class="line">    while (k &lt; len) &#123;</span><br><span class="line"></span><br><span class="line">      var kValue;</span><br><span class="line"></span><br><span class="line">      &#x2F;&#x2F; a. Let Pk be ToString(k).</span><br><span class="line">      &#x2F;&#x2F;    This is implicit for LHS operands of the in operator</span><br><span class="line">      &#x2F;&#x2F; b. Let kPresent be the result of calling the HasProperty</span><br><span class="line">      &#x2F;&#x2F;    internal method of O with argument Pk.</span><br><span class="line">      &#x2F;&#x2F;    This step can be combined with c</span><br><span class="line">      &#x2F;&#x2F; c. If kPresent is true, then</span><br><span class="line">      if (k in O) &#123;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; i. Let kValue be the result of calling the Get internal</span><br><span class="line">        &#x2F;&#x2F; method of O with argument Pk.</span><br><span class="line">        kValue &#x3D; O[k];</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; ii. Call the Call internal method of callback with T as</span><br><span class="line">        &#x2F;&#x2F; the this value and argument list containing kValue, k, and O.</span><br><span class="line">        callback.call(T, kValue, k, O);</span><br><span class="line">      &#125;</span><br><span class="line">      &#x2F;&#x2F; d. Increase k by 1.</span><br><span class="line">      k++;</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F; 8. return undefined</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="二：filter"><a href="#二：filter" class="headerlink" title="二：filter"></a>二：filter</h2><p>filter() 方法创建一个新数组, 其包含通过所提供函数实现的测试的所有元素。 </p>
<p><strong>语法:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var new_array &#x3D; arr.filter(callback[, thisArg])</span><br></pre></td></tr></table></figure>

<p><strong>参数：</strong><br><code>callback</code>:<br>用来测试数组的每个元素的函数。调用时使用参数 (element, index, array)。<br>返回true表示保留该元素（通过测试），false则不保留<br><code>thisArg</code>可选<br>可选参数。当执行回调 函数时用作this的值(参考对象)。</p>
<p><strong>返回值</strong><br>一个新的通过测试的元素的集合的数组</p>
<p><strong>注意：</strong><code>filter 不会改变原数组，它返回过滤后的新数组。</code></p>
<p><strong>兼容旧环境</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">if (!Array.prototype.filter)</span><br><span class="line">&#123;</span><br><span class="line">  Array.prototype.filter &#x3D; function(fun &#x2F;* , thisArg*&#x2F;)</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;use strict&quot;;</span><br><span class="line"></span><br><span class="line">    if (this &#x3D;&#x3D;&#x3D; void 0 || this &#x3D;&#x3D;&#x3D; null)</span><br><span class="line">      throw new TypeError();</span><br><span class="line"></span><br><span class="line">    var t &#x3D; Object(this);</span><br><span class="line">    var len &#x3D; t.length &gt;&gt;&gt; 0;</span><br><span class="line">    if (typeof fun !&#x3D;&#x3D; &quot;function&quot;)</span><br><span class="line">      throw new TypeError();</span><br><span class="line"></span><br><span class="line">    var res &#x3D; [];</span><br><span class="line">    var thisArg &#x3D; arguments.length &gt;&#x3D; 2 ? arguments[1] : void 0;</span><br><span class="line">    for (var i &#x3D; 0; i &lt; len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">      if (i in t)</span><br><span class="line">      &#123;</span><br><span class="line">        var val &#x3D; t[i];</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; NOTE: Technically this should Object.defineProperty at</span><br><span class="line">        &#x2F;&#x2F;       the next index, as push can be affected by</span><br><span class="line">        &#x2F;&#x2F;       properties on Object.prototype and Array.prototype.</span><br><span class="line">        &#x2F;&#x2F;       But that method&#39;s new, and collisions should be</span><br><span class="line">        &#x2F;&#x2F;       rare, so use the more-compatible alternative.</span><br><span class="line">        if (fun.call(thisArg, val, i, t))</span><br><span class="line">          res.push(val);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return res;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="三：map"><a href="#三：map" class="headerlink" title="三：map"></a>三：map</h2><p>map() 方法创建一个新数组，其结果是该数组中的每个元素都调用一个提供的函数后返回的结果。<br><strong>语法:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let new_array &#x3D; arr.map(function callback(currentValue, index, array) &#123; </span><br><span class="line">    &#x2F;&#x2F; Return element for new_array </span><br><span class="line">&#125;[, thisArg])</span><br></pre></td></tr></table></figure>

<p><strong>参数：</strong><br><code>callback</code>:<br>生成新数组元素的函数，使用三个参数：</p>
<blockquote>
<p><code>currentValue</code><br>callback 的第一个参数，数组中正在处理的当前元素。<br><code>index</code><br>callback 的第二个参数，数组中正在处理的当前元素的索引。<br><code>array</code><br>callback 的第三个参数，map 方法被调用的数组。</p>
</blockquote>
<p><code>thisArg</code>可选<br>可选参数。当执行回调 函数时用作this的值(参考对象)。</p>
<p><strong>返回值</strong><br>一个新数组，每个元素都是回调函数的结果。</p>
<p><strong>注意：</strong><code>不修改调用它的原数组本身（当然可以在 callback 执行时改变原数组）。</code></p>
<p><strong>兼容旧环境</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">if (!Array.prototype.map) &#123;</span><br><span class="line">  Array.prototype.map &#x3D; function(callback, thisArg) &#123;</span><br><span class="line"></span><br><span class="line">    var T, A, k;</span><br><span class="line"></span><br><span class="line">    if (this &#x3D;&#x3D; null) &#123;</span><br><span class="line">      throw new TypeError(&quot; this is null or not defined&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 1. 将O赋值为调用map方法的数组.</span><br><span class="line">    var O &#x3D; Object(this);</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 2.将len赋值为数组O的长度.</span><br><span class="line">    var len &#x3D; O.length &gt;&gt;&gt; 0;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 3.如果callback不是函数,则抛出TypeError异常.</span><br><span class="line">    if (Object.prototype.toString.call(callback) !&#x3D; &quot;[object Function]&quot;) &#123;</span><br><span class="line">      throw new TypeError(callback + &quot; is not a function&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 4. 如果参数thisArg有值,则将T赋值为thisArg;否则T为undefined.</span><br><span class="line">    if (thisArg) &#123;</span><br><span class="line">      T &#x3D; thisArg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 5. 创建新数组A,长度为原数组O长度len</span><br><span class="line">    A &#x3D; new Array(len);</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 6. 将k赋值为0</span><br><span class="line">    k &#x3D; 0;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 7. 当 k &lt; len 时,执行循环.</span><br><span class="line">    while(k &lt; len) &#123;</span><br><span class="line"></span><br><span class="line">      var kValue, mappedValue;</span><br><span class="line"></span><br><span class="line">      &#x2F;&#x2F;遍历O,k为原数组索引</span><br><span class="line">      if (k in O) &#123;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;kValue为索引k对应的值.</span><br><span class="line">        kValue &#x3D; O[ k ];</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 执行callback,this指向T,参数有三个.分别是kValue:值,k:索引,O:原数组.</span><br><span class="line">        mappedValue &#x3D; callback.call(T, kValue, k, O);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 返回值添加到新数组A中.</span><br><span class="line">        A[ k ] &#x3D; mappedValue;</span><br><span class="line">      &#125;</span><br><span class="line">      &#x2F;&#x2F; k自增1</span><br><span class="line">      k++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 8. 返回新数组A</span><br><span class="line">    return A;</span><br><span class="line">  &#125;;      </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="四：reduce"><a href="#四：reduce" class="headerlink" title="四：reduce"></a>四：reduce</h2><p>reduce() 方法对累加器和数组中的每个元素（从左到右）应用一个函数，将其减少为单个值。<br><strong>语法:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.reduce(callback[, initialValue])</span><br></pre></td></tr></table></figure>

<p><strong>参数：</strong><br><code>callback</code>:<br>执行数组中每个值的函数，包含四个参数：</p>
<blockquote>
<p><code>accumulator</code><br>累加器累加回调的返回值; 它是上一次调用回调时返回的累积值，或initialValue（如下所示）。<br><code>currentValue</code><br>数组中正在处理的元素。<br><code>currentIndex</code>可选<br>数组中正在处理的当前元素的索引。 如果提供了initialValue，则索引号为0，否则为索引为1。<br><code>array</code>可选<br>调用reduce的数组</p>
</blockquote>
<p><code>initialValue</code>可选<br>用作第一个调用 callback的第一个参数的值。 如果没有提供初始值，则将使用数组中的第一个元素。 在没有初始值的空数组上调用 reduce 将报错。</p>
<p><strong>返回值</strong><br>函数累计处理的结果</p>
<p><strong>注意：</strong><code>如果没有提供initialValue，reduce 会从索引1的地方开始执行 callback 方法，跳过第一个索引。如果提供initialValue，从索引0开始。</code></p>
<p><strong>兼容旧环境</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">if (!Array.prototype.reduce) &#123;</span><br><span class="line">  Object.defineProperty(Array.prototype, &#39;reduce&#39;, &#123;</span><br><span class="line">    value: function(callback &#x2F;*, initialValue*&#x2F;) &#123;</span><br><span class="line">      if (this &#x3D;&#x3D;&#x3D; null) &#123;</span><br><span class="line">        throw new TypeError( &#39;Array.prototype.reduce &#39; + </span><br><span class="line">          &#39;called on null or undefined&#39; );</span><br><span class="line">      &#125;</span><br><span class="line">      if (typeof callback !&#x3D;&#x3D; &#39;function&#39;) &#123;</span><br><span class="line">        throw new TypeError( callback +</span><br><span class="line">          &#39; is not a function&#39;);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      &#x2F;&#x2F; 1. Let O be ? ToObject(this value).</span><br><span class="line">      var o &#x3D; Object(this);</span><br><span class="line"></span><br><span class="line">      &#x2F;&#x2F; 2. Let len be ? ToLength(? Get(O, &quot;length&quot;)).</span><br><span class="line">      var len &#x3D; o.length &gt;&gt;&gt; 0; </span><br><span class="line"></span><br><span class="line">      &#x2F;&#x2F; Steps 3, 4, 5, 6, 7      </span><br><span class="line">      var k &#x3D; 0; </span><br><span class="line">      var value;</span><br><span class="line"></span><br><span class="line">      if (arguments.length &gt;&#x3D; 2) &#123;</span><br><span class="line">        value &#x3D; arguments[1];</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        while (k &lt; len &amp;&amp; !(k in o)) &#123;</span><br><span class="line">          k++; </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 3. If len is 0 and initialValue is not present,</span><br><span class="line">        &#x2F;&#x2F;    throw a TypeError exception.</span><br><span class="line">        if (k &gt;&#x3D; len) &#123;</span><br><span class="line">          throw new TypeError( &#39;Reduce of empty array &#39; +</span><br><span class="line">            &#39;with no initial value&#39; );</span><br><span class="line">        &#125;</span><br><span class="line">        value &#x3D; o[k++];</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      &#x2F;&#x2F; 8. Repeat, while k &lt; len</span><br><span class="line">      while (k &lt; len) &#123;</span><br><span class="line">        &#x2F;&#x2F; a. Let Pk be ! ToString(k).</span><br><span class="line">        &#x2F;&#x2F; b. Let kPresent be ? HasProperty(O, Pk).</span><br><span class="line">        &#x2F;&#x2F; c. If kPresent is true, then</span><br><span class="line">        &#x2F;&#x2F;    i.  Let kValue be ? Get(O, Pk).</span><br><span class="line">        &#x2F;&#x2F;    ii. Let accumulator be ? Call(</span><br><span class="line">        &#x2F;&#x2F;          callbackfn, undefined,</span><br><span class="line">        &#x2F;&#x2F;          « accumulator, kValue, k, O »).</span><br><span class="line">        if (k in o) &#123;</span><br><span class="line">          value &#x3D; callback(value, o[k], k, o);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; d. Increase k by 1.      </span><br><span class="line">        k++;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      &#x2F;&#x2F; 9. Return accumulator.</span><br><span class="line">      return value;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/JS-Array%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95%E8%AF%A6%E8%A7%A3%E5%8F%8A%E5%85%BC%E5%AE%B9%E6%80%A7%E4%BB%A3%E7%A0%81%EF%BC%88%E4%BA%8C%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nirvana/images/headphoto.jpeg">
      <meta itemprop="name" content="nirvana">
      <meta itemprop="description" content="个人学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="涅槃快乐是金">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/JS-Array%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95%E8%AF%A6%E8%A7%A3%E5%8F%8A%E5%85%BC%E5%AE%B9%E6%80%A7%E4%BB%A3%E7%A0%81%EF%BC%88%E4%BA%8C%EF%BC%89/" class="post-title-link" itemprop="url">JS Array常用方法详解及兼容性代码（二）</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-11 21:12:40" itemprop="dateCreated datePublished" datetime="2021-03-11T21:12:40+08:00">2021-03-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-03-10 22:09:55" itemprop="dateModified" datetime="2021-03-10T22:09:55+08:00">2021-03-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/nirvana/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>5.8k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>5 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[ ES5中，Array新增API（下）之reduceRight、every、indexOf]</p>
<p>#五： reduceRight<br>reduceRight() 方法接受一个函数作为累加器（accumulator）和数组的每个值（从右到左）将其减少为单个值。<br><strong>注意:</strong> <code>Array.prototype.reduce()方法对累加器和数组中的每个元素（从左到右）应用一个函数，将其减少为单个值。&quot;) 的执行方向相反</code></p>
<p><strong>示例:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">let flattened &#x3D; [</span><br><span class="line">    [0, 1], </span><br><span class="line">    [2, 3], </span><br><span class="line">    [4, 5]</span><br><span class="line">].reduceRight((a, b) &#x3D;&gt; &#123;</span><br><span class="line">    return a.concat(b);</span><br><span class="line">&#125;, []);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; flattened is [4, 5, 2, 3, 0, 1]</span><br></pre></td></tr></table></figure>
<p><strong>语法:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.reduceRight(callback[, initialValue])</span><br></pre></td></tr></table></figure>

<p><strong>参数：</strong><br><code>callback</code><br>一个回调函数，用来操作数组中的每个元素，可接受四个参数：</p>
<blockquote>
<p><code>previousValue</code><br>上一次调用回调的返回值，或提供的 initialValue<br><code>currentValue</code><br>当前被处理的元素<br><code>index</code><br>当前处理元素的索引<br><code>array</code><br>调用 reduce 的数组</p>
</blockquote>
<p><code>initialValue</code><br>可作为第一次调用回调 callback 的第一个参数<br><strong>返回值</strong><br>执行之后的返回值</p>
<p><strong>兼容旧环境</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">if (&#39;function&#39; !&#x3D;&#x3D; typeof Array.prototype.reduceRight) &#123;</span><br><span class="line">  Array.prototype.reduceRight &#x3D; function(callback &#x2F;*, initialValue*&#x2F;) &#123;</span><br><span class="line">    &#39;use strict&#39;;</span><br><span class="line">    if (null &#x3D;&#x3D;&#x3D; this || &#39;undefined&#39; &#x3D;&#x3D;&#x3D; typeof this) &#123;</span><br><span class="line">      throw new TypeError(&#39;Array.prototype.reduce called on null or undefined&#39;);</span><br><span class="line">    &#125;</span><br><span class="line">    if (&#39;function&#39; !&#x3D;&#x3D; typeof callback) &#123;</span><br><span class="line">      throw new TypeError(callback + &#39; is not a function&#39;);</span><br><span class="line">    &#125;</span><br><span class="line">    var t &#x3D; Object(this), len &#x3D; t.length &gt;&gt;&gt; 0, k &#x3D; len - 1, value;</span><br><span class="line">    if (arguments.length &gt;&#x3D; 2) &#123;</span><br><span class="line">      value &#x3D; arguments[1];</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      while (k &gt;&#x3D; 0 &amp;&amp; !(k in t)) &#123;</span><br><span class="line">        k--;</span><br><span class="line">      &#125;</span><br><span class="line">      if (k &lt; 0) &#123;</span><br><span class="line">        throw new TypeError(&#39;Reduce of empty array with no initial value&#39;);</span><br><span class="line">      &#125;</span><br><span class="line">      value &#x3D; t[k--];</span><br><span class="line">    &#125;</span><br><span class="line">    for (; k &gt;&#x3D; 0; k--) &#123;</span><br><span class="line">      if (k in t) &#123;</span><br><span class="line">        value &#x3D; callback(value, t[k], k, t);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return value;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>#六： every<br>every() 方法测试数组的所有元素是否都通过了指定函数的测试。</p>
<p><strong>语法:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.every(callback[, thisArg])</span><br></pre></td></tr></table></figure>

<p><strong>参数：</strong><br><code>callback</code><br>用来测试每个元素的函数。<br><code>thisArg</code><br>执行 callback 时使用的 this 值。</p>
<p><strong>注意：</strong><code>every 和数学中的&quot;所有&quot;类似，当所有的元素都符合条件才返回true。另外，空数组也是返回true。</code></p>
<p><strong>兼容旧环境</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">if (!Array.prototype.every)</span><br><span class="line">&#123;</span><br><span class="line">  Array.prototype.every &#x3D; function(fun &#x2F;*, thisArg *&#x2F;)</span><br><span class="line">  &#123;</span><br><span class="line">    &#39;use strict&#39;;</span><br><span class="line"></span><br><span class="line">    if (this &#x3D;&#x3D;&#x3D; void 0 || this &#x3D;&#x3D;&#x3D; null)</span><br><span class="line">      throw new TypeError();</span><br><span class="line"></span><br><span class="line">    var t &#x3D; Object(this);</span><br><span class="line">    var len &#x3D; t.length &gt;&gt;&gt; 0;</span><br><span class="line">    if (typeof fun !&#x3D;&#x3D; &#39;function&#39;)</span><br><span class="line">        throw new TypeError();</span><br><span class="line"></span><br><span class="line">    var thisArg &#x3D; arguments.length &gt;&#x3D; 2 ? arguments[1] : void 0;</span><br><span class="line">    for (var i &#x3D; 0; i &lt; len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">      if (i in t &amp;&amp; !fun.call(thisArg, t[i], i, t))</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return true;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>#七： indexOf<br>indexOf()方法返回在数组中可以找到一个给定元素的第一个索引，如果不存在，则返回-1。<br><strong>注意:</strong> <code>对于String方法，请参阅 [String.prototype.indexOf()]&quot;)。 </code></p>
<p><strong>语法:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr.indexOf(searchElement)</span><br><span class="line">arr.indexOf(searchElement[, fromIndex &#x3D; 0])</span><br></pre></td></tr></table></figure>

<p><strong>参数：</strong><br><code>searchElement</code><br>要查找的元素<br><code>fromIndex</code><br>开始查找的位置。如果该索引值大于或等于数组长度，意味着不会在数组里查找，返回-1。如果参数中提供的索引值是一个负值，则将其作为数组末尾的一个抵消，即-1表示从最后一个元素开始查找，-2表示从倒数第二个元素开始查找 ，以此类推。 注意：如果参数中提供的索引值是一个负值，并不改变其查找顺序，查找顺序仍然是从前向后查询数组。如果抵消后的索引值仍小于0，则整个数组都将会被查询。其默认值为0.</p>
<p><strong>返回值</strong><br>首个被找到的元素在数组中的索引位置; 若没有找到则返回 -1</p>
<p><strong>兼容旧环境</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">if (!Array.prototype.indexOf) &#123;</span><br><span class="line">  Array.prototype.indexOf &#x3D; function(searchElement, fromIndex) &#123;</span><br><span class="line"></span><br><span class="line">    var k;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 1. Let O be the result of calling ToObject passing</span><br><span class="line">    &#x2F;&#x2F;    the this value as the argument.</span><br><span class="line">    if (this &#x3D;&#x3D; null) &#123;</span><br><span class="line">      throw new TypeError(&#39;&quot;this&quot; is null or not defined&#39;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    var O &#x3D; Object(this);</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 2. Let lenValue be the result of calling the Get</span><br><span class="line">    &#x2F;&#x2F;    internal method of O with the argument &quot;length&quot;.</span><br><span class="line">    &#x2F;&#x2F; 3. Let len be ToUint32(lenValue).</span><br><span class="line">    var len &#x3D; O.length &gt;&gt;&gt; 0;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 4. If len is 0, return -1.</span><br><span class="line">    if (len &#x3D;&#x3D;&#x3D; 0) &#123;</span><br><span class="line">      return -1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 5. If argument fromIndex was passed let n be</span><br><span class="line">    &#x2F;&#x2F;    ToInteger(fromIndex); else let n be 0.</span><br><span class="line">    var n &#x3D; +fromIndex || 0;</span><br><span class="line"></span><br><span class="line">    if (Math.abs(n) &#x3D;&#x3D;&#x3D; Infinity) &#123;</span><br><span class="line">      n &#x3D; 0;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 6. If n &gt;&#x3D; len, return -1.</span><br><span class="line">    if (n &gt;&#x3D; len) &#123;</span><br><span class="line">      return -1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 7. If n &gt;&#x3D; 0, then Let k be n.</span><br><span class="line">    &#x2F;&#x2F; 8. Else, n&lt;0, Let k be len - abs(n).</span><br><span class="line">    &#x2F;&#x2F;    If k is less than 0, then let k be 0.</span><br><span class="line">    k &#x3D; Math.max(n &gt;&#x3D; 0 ? n : len - Math.abs(n), 0);</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 9. Repeat, while k &lt; len</span><br><span class="line">    while (k &lt; len) &#123;</span><br><span class="line">      &#x2F;&#x2F; a. Let Pk be ToString(k).</span><br><span class="line">      &#x2F;&#x2F;   This is implicit for LHS operands of the in operator</span><br><span class="line">      &#x2F;&#x2F; b. Let kPresent be the result of calling the</span><br><span class="line">      &#x2F;&#x2F;    HasProperty internal method of O with argument Pk.</span><br><span class="line">      &#x2F;&#x2F;   This step can be combined with c</span><br><span class="line">      &#x2F;&#x2F; c. If kPresent is true, then</span><br><span class="line">      &#x2F;&#x2F;    i.  Let elementK be the result of calling the Get</span><br><span class="line">      &#x2F;&#x2F;        internal method of O with the argument ToString(k).</span><br><span class="line">      &#x2F;&#x2F;   ii.  Let same be the result of applying the</span><br><span class="line">      &#x2F;&#x2F;        Strict Equality Comparison Algorithm to</span><br><span class="line">      &#x2F;&#x2F;        searchElement and elementK.</span><br><span class="line">      &#x2F;&#x2F;  iii.  If same is true, return k.</span><br><span class="line">      if (k in O &amp;&amp; O[k] &#x3D;&#x3D;&#x3D; searchElement) &#123;</span><br><span class="line">        return k;</span><br><span class="line">      &#125;</span><br><span class="line">      k++;</span><br><span class="line">    &#125;</span><br><span class="line">    return -1;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="八：-lastIndexOf"><a href="#八：-lastIndexOf" class="headerlink" title="八： lastIndexOf"></a>八： lastIndexOf</h1><p>lastIndexOf() 方法返回指定元素（也即有效的 JavaScript 值或变量）在数组中的最后一个的索引，如果不存在则返回 -1。从数组的后面向前查找，从 fromIndex 处开始。</p>
<p><strong>语法:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.lastIndexOf(searchElement[, fromIndex &#x3D; arr.length - 1])</span><br></pre></td></tr></table></figure>

<p><strong>参数：</strong><br><code>searchElement</code><br>被查找的元素。<br><code>fromIndex</code><br>从此位置开始逆向查找。默认为数组的长度减 1，即整个数组都被查找。如果该值大于或等于数组的长度，则整个数组会被查找。如果为负值，将其视为从数组末尾向前的偏移。即使该值为负，数组仍然会被从后向前查找。如果该值为负时，其绝对值大于数组长度，则方法返回 -1，即数组不会被查找。<br><strong>返回值</strong><br>数组中最后一个元素的索引，如未找到返回-1</p>
<p><strong>注意：</strong><code>lastIndexOf使用[严格相等](strict equality，即 ===）比较 searchElement和数组中的元素。 </code></p>
<p><strong>兼容旧环境</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">if (!Array.prototype.lastIndexOf) &#123;</span><br><span class="line">  Array.prototype.lastIndexOf &#x3D; function(searchElement &#x2F;*, fromIndex*&#x2F;) &#123;</span><br><span class="line">    &#39;use strict&#39;;</span><br><span class="line"></span><br><span class="line">    if (this &#x3D;&#x3D;&#x3D; void 0 || this &#x3D;&#x3D;&#x3D; null) &#123;</span><br><span class="line">      throw new TypeError();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    var n, k,</span><br><span class="line">        t &#x3D; Object(this),</span><br><span class="line">        len &#x3D; t.length &gt;&gt;&gt; 0;</span><br><span class="line">    if (len &#x3D;&#x3D;&#x3D; 0) &#123;</span><br><span class="line">      return -1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    n &#x3D; len - 1;</span><br><span class="line">    if (arguments.length &gt; 1) &#123;</span><br><span class="line">      n &#x3D; Number(arguments[1]);</span><br><span class="line">      if (n !&#x3D; n) &#123;</span><br><span class="line">        n &#x3D; 0;</span><br><span class="line">      &#125;</span><br><span class="line">      else if (n !&#x3D; 0 &amp;&amp; n !&#x3D; (1 &#x2F; 0) &amp;&amp; n !&#x3D; -(1 &#x2F; 0)) &#123;</span><br><span class="line">        n &#x3D; (n &gt; 0 || -1) * Math.floor(Math.abs(n));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    for (k &#x3D; n &gt;&#x3D; 0</span><br><span class="line">          ? Math.min(n, len - 1)</span><br><span class="line">          : len - Math.abs(n); k &gt;&#x3D; 0; k--) &#123;</span><br><span class="line">      if (k in t &amp;&amp; t[k] &#x3D;&#x3D;&#x3D; searchElement) &#123;</span><br><span class="line">        return k;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return -1;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/nirvana/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/nirvana/page/18/">18</a><a class="extend next" rel="next" href="/nirvana/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>


<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">nirvana</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">524k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">7:57</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
<script src="/nirvana/js/utils.js"></script><script src="/nirvana/js/motion.js"></script><script src="/nirvana/js/next-boot.js"></script>

  






  





</body>
</html>
