<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
 <meta name="referrer" content="no-referrer"/>

  <link rel="apple-touch-icon" sizes="180x180" href="/nirvana/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/nirvana/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/nirvana/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/nirvana/images/logo.svg" color="#222">

<link rel="stylesheet" href="/nirvana/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.2/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"lzhwweb.github.io","root":"/nirvana/","images":"/nirvana/images","scheme":"Gemini","version":"8.2.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/nirvana/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}};
  </script>
<meta name="description" content="contain 为何？contain 属性允许我们指定特定的 DOM 元素和它的子元素，让它们能够独立于整个 DOM 树结构之外。目的是能够让浏览器有能力只对部分元素进行重绘、重排，而不必每次都针对整个页面。  The contain property allows an author to indicate that an element and its contents are, as muc">
<meta property="og:type" content="article">
<meta property="og:title" content="CSS新特性contain，控制页面的重绘与重排">
<meta property="og:url" content="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/CSS%E6%96%B0%E7%89%B9%E6%80%A7contain%EF%BC%8C%E6%8E%A7%E5%88%B6%E9%A1%B5%E9%9D%A2%E7%9A%84%E9%87%8D%E7%BB%98%E4%B8%8E%E9%87%8D%E6%8E%92/index.html">
<meta property="og:site_name" content="涅槃快乐是金">
<meta property="og:description" content="contain 为何？contain 属性允许我们指定特定的 DOM 元素和它的子元素，让它们能够独立于整个 DOM 树结构之外。目的是能够让浏览器有能力只对部分元素进行重绘、重排，而不必每次都针对整个页面。  The contain property allows an author to indicate that an element and its contents are, as muc">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/10024246-0e816a00adab35e5.gif?imageMogr2/auto-orient/strip">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/10024246-4eafd75af8365e03.gif?imageMogr2/auto-orient/strip">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/10024246-40d071c4e009dc68.gif?imageMogr2/auto-orient/strip">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/10024246-9205beded9aa0db4.gif?imageMogr2/auto-orient/strip">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/10024246-316f1e66fa903213.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="article:published_time" content="2021-06-10T08:40:29.000Z">
<meta property="article:modified_time" content="2021-06-10T09:02:25.239Z">
<meta property="article:author" content="nirvana">
<meta property="article:tag" content="前端,javascript,node,git,webpack,css">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://upload-images.jianshu.io/upload_images/10024246-0e816a00adab35e5.gif?imageMogr2/auto-orient/strip">


<link rel="canonical" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/CSS%E6%96%B0%E7%89%B9%E6%80%A7contain%EF%BC%8C%E6%8E%A7%E5%88%B6%E9%A1%B5%E9%9D%A2%E7%9A%84%E9%87%8D%E7%BB%98%E4%B8%8E%E9%87%8D%E6%8E%92/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>
<title>CSS新特性contain，控制页面的重绘与重排 | 涅槃快乐是金</title>
  




  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/nirvana/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">涅槃快乐是金</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/nirvana/" rel="section">首页</a></li>
        <li class="menu-item menu-item-git"><a href="/nirvana/categories/git" rel="section">git</a></li>
        <li class="menu-item menu-item-linux"><a href="/nirvana/categories/linux" rel="section">linux</a></li>
        <li class="menu-item menu-item-android"><a href="/nirvana/categories/android" rel="section">android</a></li>
        <li class="menu-item menu-item-随笔"><a href="/nirvana/categories/informal" rel="section">随笔</a></li>
        <li class="menu-item menu-item-mac"><a href="/nirvana/categories/mac" rel="section">mac</a></li>
        <li class="menu-item menu-item-react-native"><a href="/nirvana/categories/reactnative" rel="section">react-native</a></li>
        <li class="menu-item menu-item-算法"><a href="/nirvana/categories/algorithm" rel="section">算法</a></li>
        <li class="menu-item menu-item-读书笔记"><a href="/nirvana/categories/note" rel="section">读书笔记</a></li>
        <li class="menu-item menu-item-开发工具"><a href="/nirvana/categories/tool" rel="section">开发工具</a></li>
        <li class="menu-item menu-item-设计模式(ts)"><a href="/nirvana/categories/DesignPattern" rel="section">设计模式(TS)</a></li>
        <li class="menu-item menu-item-前端"><a href="/nirvana/categories/javascript" rel="section">前端</a></li>
        <li class="menu-item menu-item-webpack"><a href="/nirvana/categories/webpack" rel="section">webpack</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#contain-%E4%B8%BA%E4%BD%95%EF%BC%9F"><span class="nav-text">contain 为何？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#contain-%E8%AF%AD%E6%B3%95"><span class="nav-text">contain 语法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#contain-size"><span class="nav-text">contain: size</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#contain-style"><span class="nav-text">contain: style</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#contain-paint"><span class="nav-text">contain: paint</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E5%AE%9A%E4%BA%86-contain-paint-%E7%9A%84%E5%85%83%E7%B4%A0%E7%9A%84%E5%AD%90%E5%85%83%E7%B4%A0%E4%B8%8D%E4%BC%9A%E5%9C%A8%E6%AD%A4%E5%85%83%E7%B4%A0%E7%9A%84%E8%BE%B9%E7%95%8C%E4%B9%8B%E5%A4%96%E8%A2%AB%E5%B1%95%E7%A4%BA"><span class="nav-text">设定了 contain: paint 的元素的子元素不会在此元素的边界之外被展示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E5%AE%9A%E4%BA%86-contain-paint-%E7%9A%84%E5%85%83%E7%B4%A0%E5%9C%A8%E5%B1%8F%E5%B9%95%E4%B9%8B%E5%A4%96%E6%97%B6%E4%B8%8D%E4%BC%9A%E6%B8%B2%E6%9F%93%E7%BB%98%E5%88%B6"><span class="nav-text">设定了 contain: paint 的元素在屏幕之外时不会渲染绘制</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#contain-layout"><span class="nav-text">contain: layout</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-text">存在的问题</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#contain-strict-contain-content"><span class="nav-text">contain: strict | contain: content</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Can-i-Use-%E2%80%93-CSS-Contain"><span class="nav-text">Can i Use – CSS Contain</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE"><span class="nav-text">参考文献</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9C%80%E5%90%8E"><span class="nav-text">最后</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="nirvana"
      src="/nirvana/images/headphoto.jpeg">
  <p class="site-author-name" itemprop="name">nirvana</p>
  <div class="site-description" itemprop="description">个人学习笔记</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/nirvana/archives">
          <span class="site-state-item-count">249</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">分类</span>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/lzhwWeb" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;lzhwWeb" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
  </div>



        </div>
      </div>
        <div class="back-to-top animated" role="button">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/CSS%E6%96%B0%E7%89%B9%E6%80%A7contain%EF%BC%8C%E6%8E%A7%E5%88%B6%E9%A1%B5%E9%9D%A2%E7%9A%84%E9%87%8D%E7%BB%98%E4%B8%8E%E9%87%8D%E6%8E%92/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nirvana/images/headphoto.jpeg">
      <meta itemprop="name" content="nirvana">
      <meta itemprop="description" content="个人学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="涅槃快乐是金">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          CSS新特性contain，控制页面的重绘与重排
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2021-06-10 16:40:29 / 修改时间：17:02:25" itemprop="dateCreated datePublished" datetime="2021-06-10T16:40:29+08:00">2021-06-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/nirvana/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
        </span>
    </span>

  
    <span id="/nirvana/javascript/%E5%89%8D%E7%AB%AF/CSS%E6%96%B0%E7%89%B9%E6%80%A7contain%EF%BC%8C%E6%8E%A7%E5%88%B6%E9%A1%B5%E9%9D%A2%E7%9A%84%E9%87%8D%E7%BB%98%E4%B8%8E%E9%87%8D%E6%8E%92/" class="post-meta-item leancloud_visitors" data-flag-title="CSS新特性contain，控制页面的重绘与重排" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="leancloud-visitors-count"></span>
    </span>
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>4.7k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>4 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h2 id="contain-为何？"><a href="#contain-为何？" class="headerlink" title="contain 为何？"></a><code>contain</code> 为何？</h2><p><code>contain</code> 属性允许我们指定特定的 DOM 元素和它的子元素，让它们能够独立于整个 DOM 树结构之外。目的是能够让浏览器有能力只对部分元素进行重绘、重排，而不必每次都针对整个页面。</p>
<blockquote>
<p>The contain property allows an author to indicate that an element and its contents are, as much as possible, independent of the rest of the document tree. This allows the browser to recalculate layout, style, paint, size, or any combination of them for a limited area of the DOM and not the entire page.</p>
</blockquote>
<h2 id="contain-语法"><a href="#contain-语法" class="headerlink" title="contain 语法"></a><code>contain</code> 语法</h2><p>看看它的语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &#x2F;* No layout containment. *&#x2F;</span><br><span class="line">  contain: none;</span><br><span class="line">  &#x2F;* Turn on size containment for an element. *&#x2F;</span><br><span class="line">  contain: size;</span><br><span class="line">  &#x2F;* Turn on layout containment for an element. *&#x2F;</span><br><span class="line">  contain: layout;</span><br><span class="line">  &#x2F;* Turn on style containment for an element. *&#x2F;</span><br><span class="line">  contain: style;</span><br><span class="line">  &#x2F;* Turn on paint containment for an element. *&#x2F;</span><br><span class="line">  contain: paint;</span><br><span class="line"></span><br><span class="line">  &#x2F;* Turn on containment for layout, paint, and size. *&#x2F;</span><br><span class="line">  contain: strict;</span><br><span class="line">  &#x2F;* Turn on containment for layout, and paint. *&#x2F;</span><br><span class="line">  contain: content;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>除去 <code>none</code>，取值还有 6 个，我们一个一个来看看。</p>
<h2 id="contain-size"><a href="#contain-size" class="headerlink" title="contain: size"></a>contain: size</h2><p>contain: size: 设定了 <code>contain: size</code> 的元素的渲染不会受到其子元素内容的影响。</p>
<blockquote>
<p>The value turns on size containment for the element. This ensures that the containing box can be laid out without needing to examine its descendants.</p>
</blockquote>
<p>我开始看到这个定义也是一头雾水，光看定义很难明白到底是什么意思。还需实践一番：</p>
<p>假设我们有如下简单结构：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;container&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">.container &#123;</span><br><span class="line">    width: 300px;</span><br><span class="line">    padding: 10px;</span><br><span class="line">    border: 1px solid red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">p &#123;</span><br><span class="line">    border: 1px solid #333;</span><br><span class="line">    margin: 5px;</span><br><span class="line">    font-size: 14px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>并且，借助 jQuery 实现每次点击容器添加一个 <code>&lt;p&gt;Coco&lt;/p&gt;</code> 结构：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(&#39;.container&#39;).on(&#39;click&#39;, e &#x3D;&gt; &#123;</span><br><span class="line">    $(&#39;.container&#39;).append(&#39;&lt;p&gt;Coco&lt;&#x2F;p&gt;&#39;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>那么会得到如下结果：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-0e816a00adab35e5.gif?imageMogr2/auto-orient/strip"></p>
<p>可以看到，容器 <code>.container</code> 的高度是会随着元素的增加而增加的，这是正常的现象。</p>
<p>此刻，我们给容器 <code>.container</code> 添加一个 <code>contain: size</code>，也就会出现上述说的：<strong>设定了 <code>contain: size</code> 的元素的渲染不会受到其子元素内容的影响</strong>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.container &#123;</span><br><span class="line">    width: 300px;</span><br><span class="line">    padding: 10px;</span><br><span class="line">    border: 1px solid red;</span><br><span class="line">+   contain: size</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>再看看会发生什么：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-4eafd75af8365e03.gif?imageMogr2/auto-orient/strip"></p>
<p>正常而言，父元素的高度会因为子元素的增多而被撑高，而现在，子元素的变化不再影响父元素的样式布局，这就是 <code>contain: size</code> 的作用。</p>
<h2 id="contain-style"><a href="#contain-style" class="headerlink" title="contain: style"></a>contain: style</h2><p>接下来再说说 <code>contain: style</code>、<code>contain: layout</code> 、<code>contain: paint</code>。先看看 contain: style。</p>
<p>截止至本文书写的过程中，<code>contain: style</code> 暂时被移除了。</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.w3.org/TR/css-contain-1/">CSS Containment Module Level 1</a>: Drop the at-risk “style containment” feature from this specification, move it Level 2。</p>
</blockquote>
<p>嗯，官方说辞是因为存在某些风险，暂时被移除，可能在规范的第二版会重新定义吧，那这个属性也暂且放一放。</p>
<h2 id="contain-paint"><a href="#contain-paint" class="headerlink" title="contain: paint"></a>contain: paint</h2><p>contain: paint：设定了 <code>contain: paint</code> 的元素即是设定了布局限制，也就是说告知 User Agent，此元素的子元素不会在此元素的边界之外被展示，因此，如果元素不在屏幕上或以其他方式设定为不可见，则还可以保证其后代不可见不被渲染。</p>
<blockquote>
<p>This value turns on paint containment for the element. This ensures that the descendants of the containing box don’t display outside its bounds, so if an element is off-screen or otherwise not visible, its descendants are also guaranteed to be not visible.</p>
</blockquote>
<p>这个稍微好理解一点，先来看第一个特性：</p>
<h3 id="设定了-contain-paint-的元素的子元素不会在此元素的边界之外被展示"><a href="#设定了-contain-paint-的元素的子元素不会在此元素的边界之外被展示" class="headerlink" title="设定了 contain: paint 的元素的子元素不会在此元素的边界之外被展示"></a>设定了 <code>contain: paint</code> 的元素的子元素不会在此元素的边界之外被展示</h3><ul>
<li>  设定了 <code>contain: paint</code> 的元素的子元素不会在此元素的边界之外被展示</li>
</ul>
<p>这个特点有点类似与 <code>overflow: hidden</code>，也就是明确告知用户代理，子元素的内容不会超出元素的边界，所以超出部分无需渲染。</p>
<p>简单示例，假设元素结构如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;container&quot;&gt;</span><br><span class="line">    &lt;p&gt;Coco&lt;&#x2F;p&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.container &#123;</span><br><span class="line">    contain: paint;</span><br><span class="line">    border: 1px solid red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">p&#123;</span><br><span class="line">    left: -100px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们来看看，设定了 <code>contain: paint</code> 与没设定时会发生什么：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-40d071c4e009dc68.gif?imageMogr2/auto-orient/strip"></p>
<p><a target="_blank" rel="noopener" href="https://codepen.io/Chokcoco/pen/KKwmgmN">CodePen Demo – contain: paint Demo</a>点击预览 </p>
<h3 id="设定了-contain-paint-的元素在屏幕之外时不会渲染绘制"><a href="#设定了-contain-paint-的元素在屏幕之外时不会渲染绘制" class="headerlink" title="设定了 contain: paint 的元素在屏幕之外时不会渲染绘制"></a>设定了 <code>contain: paint</code> 的元素在屏幕之外时不会渲染绘制</h3><p>通过使用 <code>contain: paint</code>， 如果元素处于屏幕外，那么用户代理就会忽略渲染这些元素，从而能更快的渲染其它内容。</p>
<h2 id="contain-layout"><a href="#contain-layout" class="headerlink" title="contain: layout"></a>contain: layout</h2><p>contain: layout：设定了 <code>contain: layout</code> 的元素即是设定了布局限制，也就是说告知 User Agent，此元素内部的样式变化不会引起元素外部的样式变化，反之亦然。</p>
<blockquote>
<p>This value turns on layout containment for the element. This ensures that the containing box is totally opaque for layout purposes; nothing outside can affect its internal layout, and vice versa.</p>
</blockquote>
<p>启用 <code>contain: layout</code> 可以潜在地将每一帧需要渲染的元素数量减少到少数，而不是重新渲染整个文档，从而为浏览器节省了大量不必要的工作，并显着提高了性能。</p>
<p>使用 <code>contain：layout</code>，开发人员可以指定对该元素任何后代的任何更改都不会影响任何外部元素的布局，反之亦然。</p>
<p>因此，浏览器仅计算内部元素的位置（如果对其进行了修改），而其余DOM保持不变。因此，这意味着帧渲染管道中的布局过程将加快。</p>
<h3 id="存在的问题"><a href="#存在的问题" class="headerlink" title="存在的问题"></a>存在的问题</h3><p>描述很美好，但是在实际 Demo 测试的过程中（截止至2021/04/27，Chrome 90.0.4430.85），仅仅单独使用 <code>contain：layout</code> 并没有验证得到上述那么美好的结果。</p>
<p><strong>设定了 <code>contain: layout</code> 的指定元素，改元素的任何后代的任何更改还是会影响任何外部元素的布局</strong>，点击红框会增加一条 <code>&lt;p&gt;Coco&lt;p&gt;</code> 元素插入到 <code>container</code> 中：</p>
<p>简单的代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;container&quot;&gt;</span><br><span class="line">    &lt;p&gt;Coco&lt;&#x2F;p&gt;</span><br><span class="line">    ...</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line">&lt;div class&#x3D;&quot;g-test&quot;&gt;&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">html,</span><br><span class="line">body &#123;</span><br><span class="line">    width: 100%;</span><br><span class="line">    height: 100%;</span><br><span class="line">    display: flex;</span><br><span class="line">    justify-content: center;</span><br><span class="line">    align-items: center;</span><br><span class="line">    flex-direction: column;</span><br><span class="line">    gap: 10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.container &#123;</span><br><span class="line">    width: 150px;</span><br><span class="line">    padding: 10px;</span><br><span class="line">    contain: layout;</span><br><span class="line">    border: 1px solid red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.g-test &#123;</span><br><span class="line">    width: 150px;</span><br><span class="line">    height: 150px;</span><br><span class="line">    border: 1px solid green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/10024246-9205beded9aa0db4.gif?imageMogr2/auto-orient/strip"></p>
<p><a target="_blank" rel="noopener" href="https://codepen.io/Chokcoco/pen/rNjRELL">CodePen Demo – contain: layout Demo</a>点击预览 </p>
<p>目前看来，<code>contain: layout</code> 的实际作用不那么明显，更多的关于它的用法，你可以再看看这篇文章：<a target="_blank" rel="noopener" href="https://css-tricks.com/almanac/properties/c/contain/">CSS-tricks - contain</a></p>
<h2 id="contain-strict-contain-content"><a href="#contain-strict-contain-content" class="headerlink" title="contain: strict | contain: content"></a>contain: strict | contain: content</h2><p>这两个属性稍微有点特殊，效果是上述介绍的几个属性的聚合效果：</p>
<ul>
<li>  <code>contain: strict</code>：同时开启 layout、style、paint 以及 size 的功能，它相当于 <code>contain: size layout paint</code></li>
<li>  <code>contain: content</code>：同时开启 layout、style 以及 paint 的功能，它相当于 <code>contain: layout paint</code></li>
</ul>
<p>所以，这里也提一下，contain 属性是可以同时定义几个的。</p>
<h2 id="Can-i-Use-–-CSS-Contain"><a href="#Can-i-Use-–-CSS-Contain" class="headerlink" title="Can i Use – CSS Contain"></a>Can i Use – CSS Contain</h2><p>截止至 2021-04-27，Can i Use 上的 CSS Contain 兼容性，已经可以开始使用起来：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-316f1e66fa903213.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><ul>
<li>  <a target="_blank" rel="noopener" href="https://www.w3.org/TR/css-contain-1/">CSS Containment Module Level 1</a></li>
<li>  <a target="_blank" rel="noopener" href="https://justmarkup.com/articles/2016-04-05-css-containment/">CSS containment</a></li>
<li>  <a target="_blank" rel="noopener" href="https://developers.google.com/web/updates/2016/06/css-containment">CSS Containment in Chrome 52</a></li>
</ul>
<h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>好了，本文到此结束，希望对你有帮助 :)</p>
<p>更多精彩 CSS 技术文章汇总在我的 <a target="_blank" rel="noopener" href="https://github.com/chokcoco/iCSS">Github – iCSS</a> ，持续更新，欢迎点个 star 订阅收藏。</p>
<p>如果还有什么疑问或者建议，可以多多交流，原创文章，文笔有限，才疏学浅，文中若有不正之处，万望告知。</p>
<blockquote>
<p>原文：<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000039950464?utm_source=tag-newest">https://segmentfault.com/a/1190000039950464?utm_source=tag-newest</a></p>
</blockquote>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/%E5%A4%A7%E5%89%8D%E7%AB%AF%E9%A2%86%E5%9F%9F%EF%BC%8C%E4%BB%80%E4%B9%88%E6%A0%B7%E7%9A%84%E4%BA%BA%E6%9C%80%E5%90%83%E9%A6%99%EF%BC%9F/" rel="prev" title="大前端领域，什么样的人最吃香？｜InfoQ 编程语言 4 月排行榜">
                  <i class="fa fa-chevron-left"></i> 大前端领域，什么样的人最吃香？｜InfoQ 编程语言 4 月排行榜
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/%E4%B8%80%E6%96%87%E5%90%83%E9%80%8FReactSSR%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%90%8C%E6%9E%84%E6%B8%B2%E6%9F%93/" rel="next" title="一文吃透React SSR服务端同构渲染">
                  一文吃透React SSR服务端同构渲染 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>







<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">nirvana</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">736k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">11:09</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
<script src="/nirvana/js/utils.js"></script><script src="/nirvana/js/motion.js"></script><script src="/nirvana/js/next-boot.js"></script><script src="/nirvana/js/bookmark.js"></script>

  
<script src="/nirvana/js/local-search.js"></script>






  


<script>
  (function() {
    function leancloudSelector(url) {
      url = encodeURI(url);
      return document.getElementById(url).querySelector('.leancloud-visitors-count');
    }

    function addCount(Counter) {
      const visitors = document.querySelector('.leancloud_visitors');
      const url = decodeURI(visitors.id);
      const title = visitors.dataset.flagTitle;

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url })))
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            const counter = results[0];
            leancloudSelector(url).innerText = counter.time + 1;
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .catch(error => {
                console.error('Failed to save visitor count', error);
              });
          } else {
              leancloudSelector(url).innerText = 'Counter not initialized! More info at console err msg.';
              console.error('ATTENTION! LeanCloud counter has security bug, see how to solve it here: https://github.com/theme-next/hexo-leancloud-counter-security. \n However, you can still use LeanCloud without security, by setting `security` option to `false`.');
            
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    function showTime(Counter) {
      const visitors = document.querySelectorAll('.leancloud_visitors');
      const entries = [...visitors].map(element => {
        return decodeURI(element.id);
      });

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url: { '$in': entries } })))
        .then(response => response.json())
        .then(({ results }) => {
          for (let url of entries) {
            const target = results.find(item => item.url === url);
            leancloudSelector(url).innerText = target ? target.time : 0;
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    const { app_id, app_key, server_url } = {"enable":true,"app_id":"SPsNUvBhME7XmrjzCfHkUu3e-gzGzoHsz","app_key":"4TONafemiIzvJUwqLa7WveoL","server_url":"https://leancloud.cn","security":true,"betterPerformance":false};
    function fetchData(api_server) {
      const Counter = (method, url, data) => {
        return fetch(`${api_server}/1.1${url}`, {
          method,
          headers: {
            'X-LC-Id'     : app_id,
            'X-LC-Key'    : app_key,
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        if (CONFIG.hostname !== location.hostname) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    }

    const api_server = app_id.slice(-9) === '-MdYXbMMI' ? `https://${app_id.slice(0, 8).toLowerCase()}.api.lncldglobal.com` : server_url;

    if (api_server) {
      fetchData(api_server);
    } else {
      fetch('https://app-router.leancloud.cn/2/route?appId=' + app_id)
        .then(response => response.json())
        .then(({ api_server }) => {
          fetchData('https://' + api_server);
        });
    }
  })();
</script>



</body>
</html>
