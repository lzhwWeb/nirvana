<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
 <meta name="referrer" content="no-referrer"/>

  <link rel="apple-touch-icon" sizes="180x180" href="/nirvana/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/nirvana/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/nirvana/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/nirvana/images/logo.svg" color="#222">

<link rel="stylesheet" href="/nirvana/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.2/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"lzhwweb.github.io","root":"/nirvana/","images":"/nirvana/images","scheme":"Gemini","version":"8.2.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}};
  </script>
<meta name="description" content="简介qs 是一个增加了一些安全性的查询字符串解析和序列化字符串的库。主要维护者：Jordan Harband最初创建者和维护者：TJ Holowaychuk 用法123456789var qs &#x3D; require(&#39;qs&#39;);var assert &#x3D; require(&#39;assert&#39;);var obj &#x3D; qs.parse(&#39;a">
<meta property="og:type" content="article">
<meta property="og:title" content="npm qs模块">
<meta property="og:url" content="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/npm-qs-%E6%A8%A1%E5%9D%97/index.html">
<meta property="og:site_name" content="涅槃快乐是金">
<meta property="og:description" content="简介qs 是一个增加了一些安全性的查询字符串解析和序列化字符串的库。主要维护者：Jordan Harband最初创建者和维护者：TJ Holowaychuk 用法123456789var qs &#x3D; require(&#39;qs&#39;);var assert &#x3D; require(&#39;assert&#39;);var obj &#x3D; qs.parse(&#39;a">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-03-11T13:12:40.000Z">
<meta property="article:modified_time" content="2021-03-10T14:10:44.707Z">
<meta property="article:author" content="nirvana">
<meta property="article:tag" content="前端,javascript,node,git">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/npm-qs-%E6%A8%A1%E5%9D%97/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>
<title>npm qs模块 | 涅槃快乐是金</title>
  




  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/nirvana/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">涅槃快乐是金</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/nirvana/" rel="section">首页</a></li>
        <li class="menu-item menu-item-git"><a href="/nirvana/categories/git" rel="section">git</a></li>
        <li class="menu-item menu-item-linux"><a href="/nirvana/categories/linux" rel="section">linux</a></li>
        <li class="menu-item menu-item-android"><a href="/nirvana/categories/android" rel="section">android</a></li>
        <li class="menu-item menu-item-随笔"><a href="/nirvana/categories/informal" rel="section">随笔</a></li>
        <li class="menu-item menu-item-mac"><a href="/nirvana/categories/mac" rel="section">mac</a></li>
        <li class="menu-item menu-item-react-native"><a href="/nirvana/categories/reactnative" rel="section">react-native</a></li>
        <li class="menu-item menu-item-算法"><a href="/nirvana/categories/algorithm" rel="section">算法</a></li>
        <li class="menu-item menu-item-读书笔记"><a href="/nirvana/categories/note" rel="section">读书笔记</a></li>
        <li class="menu-item menu-item-开发工具"><a href="/nirvana/categories/tool" rel="section">开发工具</a></li>
        <li class="menu-item menu-item-设计模式(ts)"><a href="/nirvana/categories/DesignPattern" rel="section">设计模式(TS)</a></li>
        <li class="menu-item menu-item-前端"><a href="/nirvana/categories/javascript" rel="section">前端</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B"><span class="nav-number">1.</span> <span class="nav-text">简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%A8%E6%B3%95"><span class="nav-number">2.</span> <span class="nav-text">用法</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="nirvana"
      src="/nirvana/images/headphoto.jpeg">
  <p class="site-author-name" itemprop="name">nirvana</p>
  <div class="site-description" itemprop="description">个人学习笔记</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/nirvana/archives">
          <span class="site-state-item-count">176</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">分类</span>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/npm-qs-%E6%A8%A1%E5%9D%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nirvana/images/headphoto.jpeg">
      <meta itemprop="name" content="nirvana">
      <meta itemprop="description" content="个人学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="涅槃快乐是金">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          npm qs模块
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-11 21:12:40" itemprop="dateCreated datePublished" datetime="2021-03-11T21:12:40+08:00">2021-03-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-03-10 22:10:44" itemprop="dateModified" datetime="2021-03-10T22:10:44+08:00">2021-03-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/nirvana/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>12k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>11 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>qs 是一个增加了一些安全性的查询字符串解析和序列化字符串的库。<br>主要维护者：Jordan Harband<br>最初创建者和维护者：TJ Holowaychuk</p>
<h3 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var qs &#x3D; require(&#39;qs&#39;);</span><br><span class="line">var assert &#x3D; require(&#39;assert&#39;);</span><br><span class="line"></span><br><span class="line">var obj &#x3D; qs.parse(&#39;a&#x3D;c&#39;);</span><br><span class="line">assert.deepEqual(obj, &#123; a: &#39;c&#39; &#125;);</span><br><span class="line"></span><br><span class="line">var str &#x3D; qs.stringify(obj);</span><br><span class="line">assert.equal(str, &#39;a&#x3D;c&#39;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol>
<li><p>解析对象</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">qs.parse(string, [options]);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<ul>
<li><p>qs 允许在查询字符串中使用<code>[]</code>的方式创建嵌套的对象。例如，字符串<code>&#39;foo[bar]=baz&#39;</code>可以转换为：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">assert.deepEqual(qs.parse(&#39;foo[bar]&#x3D;baz&#39;), &#123;</span><br><span class="line">    foo: &#123;</span><br><span class="line">        bar: &#39;baz&#39;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>When using the plainObjects option the parsed value is returned as a null object, created via Object.create(null) and as such you should be aware that prototype methods will not exist on it and a user may set those names to whatever value they like:</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var nullObject &#x3D; qs.parse(&#39;a[hasOwnProperty]&#x3D;b&#39;, &#123; plainObjects: true &#125;);</span><br><span class="line">assert.deepEqual(nullObject, &#123; a: &#123; hasOwnProperty: &#39;b&#39; &#125; &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>By default parameters that would overwrite properties on the object prototype are ignored, if you wish to keep the data from those fields either use plainObjects as mentioned above, or set allowPrototypes to true which will allow user input to overwrite those properties. WARNING It is generally a bad idea to enable this option as it can cause problems when attempting to use the properties that have been overwritten. Always be careful with this option.</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var protoObject &#x3D; qs.parse(&#39;a[hasOwnProperty]&#x3D;b&#39;, &#123; allowPrototypes: true &#125;);</span><br><span class="line">assert.deepEqual(protoObject, &#123; a: &#123; hasOwnProperty: &#39;b&#39; &#125; &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>也可以解析 URI 编码：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">assert.deepEqual(qs.parse(&#39;a%5Bb%5D&#x3D;c&#39;), &#123;</span><br><span class="line">    a: &#123; b: &#39;c&#39; &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>还可以像这样嵌套对象：<code>&#39;foo[bar][baz]=foobarbaz&#39;</code>：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">assert.deepEqual(qs.parse(&#39;foo[bar][baz]&#x3D;foobarbaz&#39;), &#123;</span><br><span class="line">    foo: &#123;</span><br><span class="line">        bar: &#123;</span><br><span class="line">            baz: &#39;foobarbaz&#39;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>当使用嵌套对象时，qs 在默认情况下最多解析到的深度是第五层（注：从第一个方括号到算起，到第五个方括号），例如尝试解析一个这样的字符串<code>&#39;a[b][c][d][e][f][g][h][i]=j&#39;</code>将会得到以下结果：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">var expected &#x3D; &#123;</span><br><span class="line">    a: &#123;</span><br><span class="line">        b: &#123;</span><br><span class="line">            c: &#123;</span><br><span class="line">                d: &#123;</span><br><span class="line">                    e: &#123;</span><br><span class="line">                        f: &#123;</span><br><span class="line">                            &#39;[g][h][i]&#39;: &#39;j&#39;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">var string &#x3D; &#39;a[b][c][d][e][f][g][h][i]&#x3D;j&#39;;</span><br><span class="line">assert.deepEqual(qs.parse(string), expected);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>可以给 qs.parse 传递一个 <code>depth</code> 参数覆盖默认值：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var deep &#x3D; qs.parse(&#39;a[b][c][d][e][f][g][h][i]&#x3D;j&#39;, &#123; depth: 1 &#125;);</span><br><span class="line">assert.deepEqual(deep, &#123; a: &#123; b: &#123; &#39;[c][d][e][f][g][h][i]&#39;: &#39;j&#39; &#125; &#125; &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>  当 qs 用于解析用户输入的时候，解析深度的限制有助于减轻用户的滥用行为。最好将 depth 设置为一个合理的尽量小的数字。</p>
</li>
<li><p>出于类似的原因，qs 在默认情况下最多解析 1000 个参数。通过传递 <code>parameterLimit</code> 参数可以修改默认值：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var limited &#x3D; qs.parse(&#39;a&#x3D;b&amp;c&#x3D;d&#39;, &#123; parameterLimit: 1 &#125;);</span><br><span class="line">assert.deepEqual(limited, &#123; a: &#39;b&#39; &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>忽略查询字符串开头的 <code>?</code> 可以使用 <code>ignoreQueryPrefix</code>：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var prefixed &#x3D; qs.parse(&#39;?a&#x3D;b&amp;c&#x3D;d&#39;, &#123; ignoreQueryPrefix: true &#125;);</span><br><span class="line">assert.deepEqual(prefixed, &#123; a: &#39;b&#39;, c: &#39;d&#39; &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>还可以根据自定义的分隔符来解析 <code>delimiter</code>：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var delimited &#x3D; qs.parse(&#39;a&#x3D;b;c&#x3D;d&#39;, &#123; delimiter: &#39;;&#39; &#125;);</span><br><span class="line">assert.deepEqual(delimited, &#123; a: &#39;b&#39;, c: &#39;d&#39; &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>分隔符可以是正则表达式：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var regexed &#x3D; qs.parse(&#39;a&#x3D;b;c&#x3D;d,e&#x3D;f&#39;, &#123; delimiter: &#x2F;[;,]&#x2F; &#125;);</span><br><span class="line">assert.deepEqual(regexed, &#123; a: &#39;b&#39;, c: &#39;d&#39;, e: &#39;f&#39; &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p><code>allowDots</code> 选项可以启用点表示法：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var withDots &#x3D; qs.parse(&#39;a.b&#x3D;c&#39;, &#123; allowDots: true &#125;);</span><br><span class="line">assert.deepEqual(withDots, &#123; a: &#123; b: &#39;c&#39; &#125; &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="2">
<li> 解析数组</li>
</ol>
<ul>
<li><p>qs 也可以用<code>[]</code>解析数组：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var withArray &#x3D; qs.parse(&#39;a[]&#x3D;b&amp;a[]&#x3D;c&#39;);</span><br><span class="line">assert.deepEqual(withArray, &#123; a: [&#39;b&#39;, &#39;c&#39;] &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>可以指定数组索引：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var withIndexes &#x3D; qs.parse(&#39;a[1]&#x3D;c&amp;a[0]&#x3D;b&#39;);</span><br><span class="line">assert.deepEqual(withIndexes, &#123; a: [&#39;b&#39;, &#39;c&#39;] &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>请注意，如果想要将字符串解析成数组而不是对象，那么<code>[]</code>之间的值必须是一个数字。 在创建具有特定索引的数组时，qs会将稀疏数组压缩为仅保留其顺序的现有值：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var noSparse &#x3D; qs.parse(&#39;a[1]&#x3D;b&amp;a[15]&#x3D;c&#39;);</span><br><span class="line">assert.deepEqual(noSparse, &#123; a: [&#39;b&#39;, &#39;c&#39;] &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>空字符串也是一个值，并将被保留：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var withEmptyString &#x3D; qs.parse(&#39;a[]&#x3D;&amp;a[]&#x3D;b&#39;);</span><br><span class="line">assert.deepEqual(withEmptyString, &#123; a: [&#39;&#39;, &#39;b&#39;] &#125;);</span><br><span class="line"></span><br><span class="line">var withIndexedEmptyString &#x3D; qs.parse(&#39;a[0]&#x3D;b&amp;a[1]&#x3D;&amp;a[2]&#x3D;c&#39;);</span><br><span class="line">assert.deepEqual(withIndexedEmptyString, &#123; a: [&#39;b&#39;, &#39;&#39;, &#39;c&#39;] &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>qs 还会限制数组最大索引为 20，任何索引大于20的数组成员都将被转换为以索引为键的对象：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var withMaxIndex &#x3D; qs.parse(&#39;a[100]&#x3D;b&#39;);</span><br><span class="line">assert.deepEqual(withMaxIndex, &#123; a: &#123; &#39;100&#39;: &#39;b&#39; &#125; &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p><code>arrayLimit</code> 选项可以修改默认限制：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var withArrayLimit &#x3D; qs.parse(&#39;a[1]&#x3D;b&#39;, &#123; arrayLimit: 0 &#125;);</span><br><span class="line">assert.deepEqual(withArrayLimit, &#123; a: &#123; &#39;1&#39;: &#39;b&#39; &#125; &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>字符串不解析成数组，可以设置 <code>parseArrays</code> 为 <code>false</code></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var noParsingArrays &#x3D; qs.parse(&#39;a[]&#x3D;b&#39;, &#123; parseArrays: false &#125;);</span><br><span class="line">assert.deepEqual(noParsingArrays, &#123; a: &#123; &#39;0&#39;: &#39;b&#39; &#125; &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>如果混合使用两种格式，qs 会将字符串解析为对象：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var mixedNotation &#x3D; qs.parse(&#39;a[0]&#x3D;b&amp;a[b]&#x3D;c&#39;);</span><br><span class="line">assert.deepEqual(mixedNotation, &#123; a: &#123; &#39;0&#39;: &#39;b&#39;, b: &#39;c&#39; &#125; &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>也可以创建元素为对象的数组：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var arraysOfObjects &#x3D; qs.parse(&#39;a[][b]&#x3D;c&#39;);</span><br><span class="line">assert.deepEqual(arraysOfObjects, &#123; a: [&#123; b: &#39;c&#39; &#125;] &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="3">
<li><p>序列化字符串</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">qs.stringify(object, [options]);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<ul>
<li><p>默认情况下，对象序列化后进行URI编码后输出：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">assert.equal(qs.stringify(&#123; a: &#39;b&#39; &#125;), &#39;a&#x3D;b&#39;);</span><br><span class="line">assert.equal(qs.stringify(&#123; a: &#123; b: &#39;c&#39; &#125; &#125;), &#39;a%5Bb%5D&#x3D;c&#39;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>通过设置 <code>encode</code> 为 <code>false</code> 禁止 URI 编码：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var unencoded &#x3D; qs.stringify(&#123; a: &#123; b: &#39;c&#39; &#125; &#125;, &#123; encode: false &#125;);</span><br><span class="line">assert.equal(unencoded, &#39;a[b]&#x3D;c&#39;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>通过设置 <code>encodeValuesOnly</code> 为 <code>true</code>，可以禁用对 key 进行URI 编码：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var encodedValues &#x3D; qs.stringify(</span><br><span class="line">    &#123; a: &#39;b&#39;, c: [&#39;d&#39;, &#39;e&#x3D;f&#39;], f: [[&#39;g&#39;], [&#39;h&#39;]] &#125;,</span><br><span class="line">    &#123; encodeValuesOnly: true &#125;</span><br><span class="line">);</span><br><span class="line">assert.equal(encodedValues,&#39;a&#x3D;b&amp;c[0]&#x3D;d&amp;c[1]&#x3D;e%3Df&amp;f[0][0]&#x3D;g&amp;f[1][0]&#x3D;h&#39;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><p>可以通过设置<code>encoder</code> 选项自定义编码方式（<em>注意：当 <code>encode</code> 被设置为 <code>false</code> 的时候，不适用</em>）：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var encoded &#x3D; qs.stringify(&#123; a: &#123; b: &#39;c&#39; &#125; &#125;, &#123; encoder: function (str) &#123;</span><br><span class="line">    &#x2F;&#x2F; Passed in values &#96;a&#96;, &#96;b&#96;, &#96;c&#96;</span><br><span class="line">    return &#x2F;&#x2F; Return encoded string</span><br><span class="line">&#125;&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>与<code>encoder</code> 类似 <code>decoder</code> 可以用来解码：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">	var decoded &#x3D; qs.parse(&#39;x&#x3D;z&#39;, &#123; decoder: function (str) &#123;</span><br><span class="line">	    &#x2F;&#x2F; Passed in values &#96;x&#96;, &#96;z&#96;</span><br><span class="line">	    return &#x2F;&#x2F; Return decoded string</span><br><span class="line">	&#125;&#125;)</span><br><span class="line"></span><br><span class="line">Examples beyond this point will be shown as though the output is not URI encoded for clarity. Please note that the return values in these cases will be URI encoded during real usage.</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>当数组被序列化时，默认显示索引：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">qs.stringify(&#123; a: [&#39;b&#39;, &#39;c&#39;, &#39;d&#39;] &#125;);</span><br><span class="line">&#x2F;&#x2F; &#39;a[0]&#x3D;b&amp;a[1]&#x3D;c&amp;a[2]&#x3D;d&#39;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>可以通过设置 <code>indices</code> 为 <code>false</code> 不显示索引：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">qs.stringify(&#123; a: [&#39;b&#39;, &#39;c&#39;, &#39;d&#39;] &#125;, &#123; indices: false &#125;);</span><br><span class="line">&#x2F;&#x2F; &#39;a&#x3D;b&amp;a&#x3D;c&amp;a&#x3D;d&#39;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>可以通过设置 <code>arrayFormat</code> 选项指定数组输出格式：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">qs.stringify(&#123; a: [&#39;b&#39;, &#39;c&#39;] &#125;, &#123; arrayFormat: &#39;indices&#39; &#125;)</span><br><span class="line">&#x2F;&#x2F; &#39;a[0]&#x3D;b&amp;a[1]&#x3D;c&#39;</span><br><span class="line">qs.stringify(&#123; a: [&#39;b&#39;, &#39;c&#39;] &#125;, &#123; arrayFormat: &#39;brackets&#39; &#125;)</span><br><span class="line">&#x2F;&#x2F; &#39;a[]&#x3D;b&amp;a[]&#x3D;c&#39;</span><br><span class="line">qs.stringify(&#123; a: [&#39;b&#39;, &#39;c&#39;] &#125;, &#123; arrayFormat: &#39;repeat&#39; &#125;)</span><br><span class="line">&#x2F;&#x2F; &#39;a&#x3D;b&amp;a&#x3D;c&#39;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>对象序列化时，默认使用 <code>[]</code> 表示法：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">qs.stringify(&#123; a: &#123; b: &#123; c: &#39;d&#39;, e: &#39;f&#39; &#125; &#125; &#125;);</span><br><span class="line">&#x2F;&#x2F; &#39;a[b][c]&#x3D;d&amp;a[b][e]&#x3D;f&#39;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>通过设置 <code>allowDots</code> 为 <code>true</code>修改为点表示法：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">qs.stringify(&#123; a: &#123; b: &#123; c: &#39;d&#39;, e: &#39;f&#39; &#125; &#125; &#125;, &#123; allowDots: true &#125;);</span><br><span class="line">&#x2F;&#x2F; &#39;a.b.c&#x3D;d&amp;a.b.e&#x3D;f&#39;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>空字符串和<code>null</code>值将被省略，但是<code>=</code>会保留：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">assert.equal(qs.stringify(&#123; a: &#39;&#39; &#125;), &#39;a&#x3D;&#39;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>没有值的键将什么也不返回（例如空对象或数组）：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">assert.equal(qs.stringify(&#123; a: [] &#125;), &#39;&#39;);</span><br><span class="line">assert.equal(qs.stringify(&#123; a: &#123;&#125; &#125;), &#39;&#39;);</span><br><span class="line">assert.equal(qs.stringify(&#123; a: [&#123;&#125;] &#125;), &#39;&#39;);</span><br><span class="line">assert.equal(qs.stringify(&#123; a: &#123; b: []&#125; &#125;), &#39;&#39;);</span><br><span class="line">assert.equal(qs.stringify(&#123; a: &#123; b: &#123;&#125;&#125; &#125;), &#39;&#39;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>值为 <code>undefined</code> 的属性将会被完全忽略：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">assert.equal(qs.stringify(&#123; a: null, b: undefined &#125;), &#39;a&#x3D;&#39;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p><code>addQueryPrefix</code> 设置为 <code>true</code>可以在查询字符串前面加 <code>?</code>：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">assert.equal(qs.stringify(&#123; a: &#39;b&#39;, c: &#39;d&#39; &#125;, &#123; addQueryPrefix: true &#125;), &#39;?a&#x3D;b&amp;c&#x3D;d&#39;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>分隔符也可以设置：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">assert.equal(qs.stringify(&#123; a: &#39;b&#39;, c: &#39;d&#39; &#125;, &#123; delimiter: &#39;;&#39; &#125;), &#39;a&#x3D;b;c&#x3D;d&#39;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>如果只是序列化日期对象，可以使用 <code>serializeDate</code> 选项：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var date &#x3D; new Date(7);</span><br><span class="line">assert.equal(qs.stringify(&#123; a: date &#125;), &#39;a&#x3D;1970-01-01T00:00:00.007Z&#39;.replace(&#x2F;:&#x2F;g, &#39;%3A&#39;));</span><br><span class="line">assert.equal(</span><br><span class="line">    qs.stringify(&#123; a: date &#125;, &#123; serializeDate: function (d) &#123; return d.getTime(); &#125; &#125;),</span><br><span class="line">    &#39;a&#x3D;7&#39;</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>可以使用 <code>sort</code> 选项来修改键的顺序：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function alphabeticalSort(a, b) &#123;</span><br><span class="line">    return a.localeCompare(b);</span><br><span class="line">&#125;</span><br><span class="line">assert.equal(qs.stringify(&#123; a: &#39;c&#39;, z: &#39;y&#39;, b : &#39;f&#39; &#125;, &#123; sort: alphabeticalSort &#125;), &#39;a&#x3D;c&amp;b&#x3D;f&amp;z&#x3D;y&#39;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>最后，可以使用 <code>filter</code> 选项过滤序列化输出的键。如果给<code>filter</code>传递一个函数，每个键调用一次该函数并用返回的值替换原来值。如果给<code>filter</code>传递一个数组，它将用于选择对象的key和数组的索引：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">function filterFunc(prefix, value) &#123;</span><br><span class="line">    if (prefix &#x3D;&#x3D; &#39;b&#39;) &#123;</span><br><span class="line">        &#x2F;&#x2F; Return an &#96;undefined&#96; value to omit a property.</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    if (prefix &#x3D;&#x3D; &#39;e[f]&#39;) &#123;</span><br><span class="line">        return value.getTime();</span><br><span class="line">    &#125;</span><br><span class="line">    if (prefix &#x3D;&#x3D; &#39;e[g][0]&#39;) &#123;</span><br><span class="line">        return value * 2;</span><br><span class="line">    &#125;</span><br><span class="line">    return value;</span><br><span class="line">&#125;</span><br><span class="line">qs.stringify(&#123; a: &#39;b&#39;, c: &#39;d&#39;, e: &#123; f: new Date(123), g: [2] &#125; &#125;, &#123; filter: filterFunc &#125;);</span><br><span class="line">&#x2F;&#x2F; &#39;a&#x3D;b&amp;c&#x3D;d&amp;e[f]&#x3D;123&amp;e[g][0]&#x3D;4&#39;</span><br><span class="line">qs.stringify(&#123; a: &#39;b&#39;, c: &#39;d&#39;, e: &#39;f&#39; &#125;, &#123; filter: [&#39;a&#39;, &#39;e&#39;] &#125;);</span><br><span class="line">&#x2F;&#x2F; &#39;a&#x3D;b&amp;e&#x3D;f&#39;</span><br><span class="line">qs.stringify(&#123; a: [&#39;b&#39;, &#39;c&#39;, &#39;d&#39;], e: &#39;f&#39; &#125;, &#123; filter: [&#39;a&#39;, 0, 2] &#125;);</span><br><span class="line">&#x2F;&#x2F; &#39;a[0]&#x3D;b&amp;a[2]&#x3D;d&#39;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="4">
<li> 处理 <code>null</code> 值</li>
</ol>
<ul>
<li><p>默认情况下，<code>null</code> 值被视为空对象：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var withNull &#x3D; qs.stringify(&#123; a: null, b: &#39;&#39; &#125;);</span><br><span class="line">assert.equal(withNull, &#39;a&#x3D;&amp;b&#x3D;&#39;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>解析字符串的时候并不会区分参数有没有等号，没有值的话都会解析为空字符串：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var equalsInsensitive &#x3D; qs.parse(&#39;a&amp;b&#x3D;&#39;);</span><br><span class="line">assert.deepEqual(equalsInsensitive, &#123; a: &#39;&#39;, b: &#39;&#39; &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>要想区分空字符串和<code>null</code>值可以使用 <code>strictNullHandling</code> 选项，序列化后的 <code>null</code> 值没有<code>=</code></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var strictNull &#x3D; qs.stringify(&#123; a: null, b: &#39;&#39; &#125;, &#123; strictNullHandling: true &#125;);</span><br><span class="line">assert.equal(strictNull, &#39;a&amp;b&#x3D;&#39;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>要解析不带 <code>=</code> 的值返回 <code>null</code>可以使用 <code>strictNullHandling</code> 选项：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var parsedStrictNull &#x3D; qs.parse(&#39;a&amp;b&#x3D;&#39;, &#123; strictNullHandling: true &#125;);</span><br><span class="line">assert.deepEqual(parsedStrictNull, &#123; a: null, b: &#39;&#39; &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>想要完全跳过值为 <code>null</code> 的键不解析，可以使用 <code>skipNulls</code> 选项：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var nullsSkipped &#x3D; qs.stringify(&#123; a: &#39;b&#39;, c: null&#125;, &#123; skipNulls: true &#125;);</span><br><span class="line">assert.equal(nullsSkipped, &#39;a&#x3D;b&#39;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="5">
<li> 处理特殊字符集：</li>
</ol>
<ul>
<li><p>默认情况下，字符的编码和解码在utf-8中完成。 如果希望将查询字符串编码为不同的字符集（i.e.Shift JIS），您可以使用qs-iconv库：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var encoder &#x3D; require(&#39;qs-iconv&#x2F;encoder&#39;)(&#39;shift_jis&#39;);</span><br><span class="line">var shiftJISEncoded &#x3D; qs.stringify(&#123; a: &#39;こんにちは！&#39; &#125;, &#123; encoder: encoder &#125;);</span><br><span class="line">assert.equal(shiftJISEncoded, &#39;a&#x3D;%82%B1%82%F1%82%C9%82%BF%82%CD%81I&#39;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>这也适用于解码查询字符串：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var decoder &#x3D; require(&#39;qs-iconv&#x2F;decoder&#39;)(&#39;shift_jis&#39;);</span><br><span class="line">var obj &#x3D; qs.parse(&#39;a&#x3D;%82%B1%82%F1%82%C9%82%BF%82%CD%81I&#39;, &#123; decoder: decoder &#125;);</span><br><span class="line">assert.deepEqual(obj, &#123; a: &#39;こんにちは！&#39; &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="6">
<li><p>RFC 3986 and RFC 1738 space encoding</p>
<p> RFC3986 used as default option and encodes ’ ’ to %20 which is backward compatible. In the same time, output can be stringified as per RFC1738 with ’ ’ equal to ‘+’.</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">assert.equal(qs.stringify(&#123; a: &#39;b c&#39; &#125;), &#39;a&#x3D;b%20c&#39;);</span><br><span class="line">assert.equal(qs.stringify(&#123; a: &#39;b c&#39; &#125;, &#123; format : &#39;RFC3986&#39; &#125;), &#39;a&#x3D;b%20c&#39;);</span><br><span class="line">assert.equal(qs.stringify(&#123; a: &#39;b c&#39; &#125;, &#123; format : &#39;RFC1738&#39; &#125;), &#39;a&#x3D;b+c&#39;);</span><br></pre></td></tr></table></figure></li>
</ol>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/npm%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95/" rel="prev" title="npm命令记录">
                  <i class="fa fa-chevron-left"></i> npm命令记录
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/node%E6%9C%8D%E5%8A%A1%E7%AB%AF%E8%A7%A3%E5%86%B3socket-io%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98express,koa/" rel="next" title="node服务端解决socket.io跨域问题express,koa">
                  node服务端解决socket.io跨域问题express,koa <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>







<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">nirvana</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">522k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">7:54</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
<script src="/nirvana/js/utils.js"></script><script src="/nirvana/js/motion.js"></script><script src="/nirvana/js/next-boot.js"></script>

  






  





</body>
</html>
