<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
 <meta name="referrer" content="no-referrer"/>

  <link rel="apple-touch-icon" sizes="180x180" href="/nirvana/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/nirvana/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/nirvana/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/nirvana/images/logo.svg" color="#222">

<link rel="stylesheet" href="/nirvana/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.2/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"lzhwweb.github.io","root":"/nirvana/","images":"/nirvana/images","scheme":"Gemini","version":"8.2.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}};
  </script>
<meta name="description" content="个人学习笔记">
<meta property="og:type" content="website">
<meta property="og:title" content="涅槃快乐是金">
<meta property="og:url" content="https://lzhwweb.github.io/nirvana/page/5/index.html">
<meta property="og:site_name" content="涅槃快乐是金">
<meta property="og:description" content="个人学习笔记">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="nirvana">
<meta property="article:tag" content="前端,javascript,node,git">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://lzhwweb.github.io/nirvana/page/5/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>
<title>涅槃快乐是金</title>
  




  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/nirvana/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">涅槃快乐是金</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/nirvana/" rel="section">首页</a></li>
        <li class="menu-item menu-item-git"><a href="/nirvana/categories/git" rel="section">git</a></li>
        <li class="menu-item menu-item-linux"><a href="/nirvana/categories/linux" rel="section">linux</a></li>
        <li class="menu-item menu-item-android"><a href="/nirvana/categories/android" rel="section">android</a></li>
        <li class="menu-item menu-item-随笔"><a href="/nirvana/categories/informal" rel="section">随笔</a></li>
        <li class="menu-item menu-item-mac"><a href="/nirvana/categories/mac" rel="section">mac</a></li>
        <li class="menu-item menu-item-react-native"><a href="/nirvana/categories/reactnative" rel="section">react-native</a></li>
        <li class="menu-item menu-item-算法"><a href="/nirvana/categories/algorithm" rel="section">算法</a></li>
        <li class="menu-item menu-item-读书笔记"><a href="/nirvana/categories/note" rel="section">读书笔记</a></li>
        <li class="menu-item menu-item-开发工具"><a href="/nirvana/categories/tool" rel="section">开发工具</a></li>
        <li class="menu-item menu-item-设计模式(ts)"><a href="/nirvana/categories/DesignPattern" rel="section">设计模式(TS)</a></li>
        <li class="menu-item menu-item-前端"><a href="/nirvana/categories/javascript" rel="section">前端</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="nirvana"
      src="/nirvana/images/headphoto.jpeg">
  <p class="site-author-name" itemprop="name">nirvana</p>
  <div class="site-description" itemprop="description">个人学习笔记</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/nirvana/archives">
          <span class="site-state-item-count">177</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">分类</span>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/mac-%E4%BD%BF%E7%94%A8nvm%E5%AE%89%E8%A3%85node/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nirvana/images/headphoto.jpeg">
      <meta itemprop="name" content="nirvana">
      <meta itemprop="description" content="个人学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="涅槃快乐是金">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/mac-%E4%BD%BF%E7%94%A8nvm%E5%AE%89%E8%A3%85node/" class="post-title-link" itemprop="url">mac 使用nvm安装node</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-11 21:12:40" itemprop="dateCreated datePublished" datetime="2021-03-11T21:12:40+08:00">2021-03-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-03-10 22:10:08" itemprop="dateModified" datetime="2021-03-10T22:10:08+08:00">2021-03-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/nirvana/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>308</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>1.curl <a target="_blank" rel="noopener" href="https://raw.github.com/creationix/nvm/master/install.sh">https://raw.github.com/creationix/nvm/master/install.sh</a> | sh</p>
<p>2.vi ~/.bash_profile<br>　　添加：source /Users/dujie/.nvm/nvm.sh</p>
<p>nvm install 0.10.24<br>nvm use 0.10.24</p>
<h1 id="默認使用-0-10-24-版本，否則每次關掉-Terminal-就得重新-nvm-use-一次"><a href="#默認使用-0-10-24-版本，否則每次關掉-Terminal-就得重新-nvm-use-一次" class="headerlink" title="默認使用 0.10.24 版本，否則每次關掉 Terminal 就得重新 nvm use 一次"></a>默認使用 0.10.24 版本，否則每次關掉 Terminal 就得重新 nvm use 一次</h1><p>$ nvm alias default 0.10.24</p>
<h1 id="列出所有安裝的版本"><a href="#列出所有安裝的版本" class="headerlink" title="列出所有安裝的版本"></a>列出所有安裝的版本</h1><p>$ nvm ls</p>
<h1 id="列出總共有哪些版本可以安裝"><a href="#列出總共有哪些版本可以安裝" class="headerlink" title="列出總共有哪些版本可以安裝"></a>列出總共有哪些版本可以安裝</h1><p>$ nvm ls-remote</p>
<p>安装常用的工具<br>npm install -g express<br>npm install -g bower<br>npm install -g fis</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/mini-css-extract-plugin%E7%AE%80%E4%BB%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nirvana/images/headphoto.jpeg">
      <meta itemprop="name" content="nirvana">
      <meta itemprop="description" content="个人学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="涅槃快乐是金">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/mini-css-extract-plugin%E7%AE%80%E4%BB%8B/" class="post-title-link" itemprop="url">mini-css-extract-plugin简介</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-11 21:12:40" itemprop="dateCreated datePublished" datetime="2021-03-11T21:12:40+08:00">2021-03-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-03-10 13:43:55" itemprop="dateModified" datetime="2021-03-10T13:43:55+08:00">2021-03-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/nirvana/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>4.7k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>4 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>将css单独打包成一个文件的插件，它为每个包含css的js文件都创建一个css文件。它支持css和sourceMaps的按需加载。</p>
<p>目前只有在webpack V4版本才支持使用该插件</p>
<p>和extract-text-webpack-plugin相比：</p>
<ul>
<li>异步加载</li>
<li>无重复编译，性能有所提升</li>
<li>用法简单</li>
<li>支持css分割<br>例子：</li>
</ul>
<h5 id="支持HMR"><a href="#支持HMR" class="headerlink" title="支持HMR"></a>支持HMR</h5><ul>
<li>Install *<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev mini-css-extract-plugin</span><br></pre></td></tr></table></figure>
<h5 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h5></li>
</ul>
<ul>
<li>简单的例子<br>webpack.config.js<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">const MiniCssExtractPlugin &#x3D; require(&quot;mini-css-extract-plugin&quot;);</span><br><span class="line"></span><br><span class="line">module.exports&#x3D;&#123;</span><br><span class="line">    plugins:[</span><br><span class="line">        new MiniCssExtractPlugin(&#123;</span><br><span class="line">        &#x2F;&#x2F; Options similar to the same options in webpackOptions.output</span><br><span class="line">        &#x2F;&#x2F; both options are optional</span><br><span class="line">        filename: &quot;[name].css&quot;,</span><br><span class="line">        chunkFilename: &quot;[id].css&quot;</span><br><span class="line">        &#125;)</span><br><span class="line">    ],</span><br><span class="line">     module: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: &#x2F;\.css$&#x2F;,</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: MiniCssExtractPlugin.loader,</span><br><span class="line">            options: &#123;</span><br><span class="line">              &#x2F;&#x2F; you can specify a publicPath here</span><br><span class="line">              &#x2F;&#x2F; by default it use publicPath in webpackOptions.output</span><br><span class="line">              publicPath: &#39;..&#x2F;&#39;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;css-loader&quot;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>高级的配置</li>
</ul>
<p>这个插件应该只在生产环境构建中使用，并且在loader链中不应该有style-loader，特别是我们在开发模式中使用HMR时。</p>
<p>下面是一个在开发模式中使用HMR并在生产环境构建的文件中提出出css样式的示例。</p>
<p>(各个loader的配置根据你的需求进行自定义修改)</p>
<p>webpack.config.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">const MiniCssExtractPlugin &#x3D; require(&quot;mini-css-extract-plugin&quot;);</span><br><span class="line">const devMode &#x3D; process.env.NODE_ENV !&#x3D;&#x3D; &#39;production&#39;</span><br><span class="line"></span><br><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  plugins: [</span><br><span class="line">    new MiniCssExtractPlugin(&#123;</span><br><span class="line">      &#x2F;&#x2F; Options similar to the same options in webpackOptions.output</span><br><span class="line">      &#x2F;&#x2F; both options are optional</span><br><span class="line">      filename: devMode ? &#39;[name].css&#39; : &#39;[name].[hash].css&#39;,</span><br><span class="line">      chunkFilename: devMode ? &#39;[id].css&#39; : &#39;[id].[hash].css&#39;,</span><br><span class="line">    &#125;)</span><br><span class="line">  ],</span><br><span class="line">  module: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: &#x2F;\.(sa|sc|c)ss$&#x2F;,</span><br><span class="line">        use: [</span><br><span class="line">          devMode ? &#39;style-loader&#39; : MiniCssExtractPlugin.loader,</span><br><span class="line">          &#39;css-loader&#39;,</span><br><span class="line">          &#39;postcss-loader&#39;,</span><br><span class="line">          &#39;sass-loader&#39;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>生产环境最小化<br>等到webpack V5时，有可能会将css压缩功能进行集成，但是在webpack V4，我们还需要手动使用optimize-css-assets-webpack-plugin来进行css的压缩。配置wepack的optimization.minimizer选项来覆盖webpack的默认配置。同时也要指定一个js压缩器。</p>
<p>wepack.config.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">const UglifyJsPlugin &#x3D; require(&quot;uglifyjs-webpack-plugin&quot;);</span><br><span class="line">const MiniCssExtractPlugin &#x3D; require(&quot;mini-css-extract-plugin&quot;);</span><br><span class="line">const OptimizeCSSAssetsPlugin &#x3D; require(&quot;optimize-css-assets-webpack-plugin&quot;);</span><br><span class="line"></span><br><span class="line">module.exports&#x3D;&#123;</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    minimizer: [</span><br><span class="line">      new UglifyJsPlugin(&#123;</span><br><span class="line">        cache: true,</span><br><span class="line">        parallel: true,</span><br><span class="line">        sourceMap: true &#x2F;&#x2F; set to true if you want JS source maps</span><br><span class="line">      &#125;),</span><br><span class="line">      new OptimizeCSSAssetsPlugin(&#123;&#125;)</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    new MiniCssExtractPlugin(&#123;</span><br><span class="line">      filename: &quot;[name].css&quot;,</span><br><span class="line">      chunkFilename: &quot;[id].css&quot;</span><br><span class="line">    &#125;)</span><br><span class="line">  ],</span><br><span class="line">  module: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: &#x2F;\.css$&#x2F;,</span><br><span class="line">        use: [</span><br><span class="line">          MiniCssExtractPlugin.loader,</span><br><span class="line">          &quot;css-loader&quot;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>其他功能</li>
</ul>
<p>使用预加载或内联CSS<br>运行时代码通过link 或 style标签检测已经添加的css,当在服务端注入css为了在服务端进行渲染时是非常有用的。link标签的href属性用来匹配被加载的css块的URL，data-href属性也可以在link和style标签上使用，当使用内联样式的时候必须使用href.</p>
<p>提取所有的css到一个文件中<br>类似于 extract-text-webpack-plugin的作用，可以使用optimization.splitChunks.cacheGroups来将css提取到一个文件中</p>
<p>webpack.config.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">const MiniCssExtractPlugin &#x3D; require(&quot;mini-css-extract-plugin&quot;);</span><br><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">      cacheGroups: &#123;</span><br><span class="line">        styles: &#123;</span><br><span class="line">          name: &#39;styles&#39;,</span><br><span class="line">          test: &#x2F;\.css$&#x2F;,</span><br><span class="line">          chunks: &#39;all&#39;,</span><br><span class="line">          enforce: true</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    new MiniCssExtractPlugin(&#123;</span><br><span class="line">      filename: &quot;[name].css&quot;,</span><br><span class="line">    &#125;)</span><br><span class="line">  ],</span><br><span class="line">  module: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: &#x2F;\.css$&#x2F;,</span><br><span class="line">        use: [</span><br><span class="line">          MiniCssExtractPlugin.loader,</span><br><span class="line">          &quot;css-loader&quot;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>根据webpack 的 entry 提取 css</li>
</ul>
<p>还可以根据webpack entry提取CSS。如果动态导入路由，但希望根据条目将CSS绑定在一起，那么这一点尤其有用。这也防止了使用ExtractTextPlugin时出现的CSS复制问题。</p>
<p>webpack.config.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">const path &#x3D; require(&#39;path&#39;);</span><br><span class="line">const MiniCssExtractPlugin &#x3D; require(&quot;mini-css-extract-plugin&quot;);</span><br><span class="line"></span><br><span class="line">function recursiveIssuer(m) &#123;</span><br><span class="line">  if (m.issuer) &#123;</span><br><span class="line">    return recursiveIssuer(m.issuer);</span><br><span class="line">  &#125; else if (m.name) &#123;</span><br><span class="line">    return m.name;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    return false;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    foo: path.resolve(__dirname, &#39;src&#x2F;foo&#39;),</span><br><span class="line">    bar: path.resolve(__dirname, &#39;src&#x2F;bar&#39;)</span><br><span class="line">  &#125;,  </span><br><span class="line">  plugins: [</span><br><span class="line">    new MiniCssExtractPlugin(&#123;</span><br><span class="line">      filename: &quot;[name].css&quot;,</span><br><span class="line">    &#125;)</span><br><span class="line">  ],</span><br><span class="line">  module: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: &#x2F;\.css$&#x2F;,</span><br><span class="line">        use: [</span><br><span class="line">          MiniCssExtractPlugin.loader,</span><br><span class="line">          &quot;css-loader&quot;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  optimization:&#123;</span><br><span class="line">    splitChunks:&#123;</span><br><span class="line">      cacheGroups:&#123;</span><br><span class="line">          fooStyles:&#123;</span><br><span class="line">            fooStyles: &#123;</span><br><span class="line">            name: &#39;foo&#39;,</span><br><span class="line">            test: (m,c,entry &#x3D; &#39;foo&#39;) &#x3D;&gt; m.constructor.name &#x3D;&#x3D;&#x3D; &#39;CssModule&#39; &amp;&amp; recursiveIssuer(m) &#x3D;&#x3D;&#x3D; entry,</span><br><span class="line">            chunks: &#39;all&#39;,</span><br><span class="line">            enforce: true</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;  </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/node-js%E4%B8%AD%E4%BD%BF%E7%94%A8yargs%E6%9D%A5%E5%A4%84%E7%90%86%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nirvana/images/headphoto.jpeg">
      <meta itemprop="name" content="nirvana">
      <meta itemprop="description" content="个人学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="涅槃快乐是金">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/node-js%E4%B8%AD%E4%BD%BF%E7%94%A8yargs%E6%9D%A5%E5%A4%84%E7%90%86%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0/" class="post-title-link" itemprop="url">node.js中使用yargs来处理命令行参数</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-11 21:12:40" itemprop="dateCreated datePublished" datetime="2021-03-11T21:12:40+08:00">2021-03-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-03-10 22:10:17" itemprop="dateModified" datetime="2021-03-10T22:10:17+08:00">2021-03-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/nirvana/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.9k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>yargs库能够方便的处理命令行参数。</p>
<p>一、安装 yargs</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install yargs --save</span><br></pre></td></tr></table></figure>

<p>二、读取命令行参数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const yargs &#x3D; require(&#39;yargs&#39;);</span><br><span class="line"> </span><br><span class="line">let argv &#x3D; yargs.argv;</span><br><span class="line">console.log(argv);</span><br></pre></td></tr></table></figure>
<p>argv 对象用来保存命令行参数，传递参数时，参数名以 – 开头，中间使用 = 或 空格，然后接上值 。</p>
<p>argv 有一个 下划线 属性，该属性用来获取非连词线开头的参数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const yargs &#x3D; require(&#39;yargs&#39;);</span><br><span class="line"> </span><br><span class="line">let argv &#x3D; yargs.argv;</span><br><span class="line">console.log(argv._);</span><br></pre></td></tr></table></figure>
<p>还可以给参数名取一个别名。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const yargs &#x3D; require(&#39;yargs&#39;);</span><br><span class="line"> </span><br><span class="line">let argv &#x3D; yargs</span><br><span class="line">    .alias(&#39;n&#39;, &#39;name&#39;)</span><br><span class="line">    .alias(&#39;s&#39;, &#39;save&#39;)</span><br><span class="line">    .alias(&#39;w&#39;, &#39;width&#39;)</span><br><span class="line">    .argv;</span><br><span class="line"> </span><br><span class="line">console.log(argv);</span><br></pre></td></tr></table></figure>
<p>.demandOption(key, msg) 是否必须填写<br>.default(key, value, [description]) 设置默认值<br>.describe(key, desc) 命令描述信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const yargs &#x3D; require(&#39;yargs&#39;);</span><br><span class="line"> </span><br><span class="line">let argv &#x3D; yargs</span><br><span class="line">    .alias(&#39;s&#39;, &#39;src&#39;)</span><br><span class="line">    .alias(&#39;d&#39;, &#39;dst&#39;)</span><br><span class="line">    .demandOption([&#39;s&#39;, &#39;d&#39;], &#39;s 与 d 必须填写&#39;)</span><br><span class="line">    .default(&#39;s&#39;, &#39;a.txt&#39;)</span><br><span class="line">    .default(&#39;d&#39;, &#39;b.txt&#39;)</span><br><span class="line">    .describe(&#39;s&#39;, &#39;源文件&#39;)</span><br><span class="line">    .describe(&#39;d&#39;, &#39;目标文件&#39;)</span><br><span class="line">    .argv;</span><br><span class="line"> </span><br><span class="line">console.log(argv);</span><br></pre></td></tr></table></figure>
<p>我们可以通过 .option(key, [opt]) 配置所有设置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">const yargs &#x3D; require(&#39;yargs&#39;);</span><br><span class="line"> </span><br><span class="line">let argv &#x3D; yargs</span><br><span class="line">    .option(&#39;s&#39;, &#123;</span><br><span class="line">        alias: &#39;src&#39;,</span><br><span class="line">        demandOption: true,</span><br><span class="line">        default: &#39;a.txt&#39;,</span><br><span class="line">        describe: &#39;源文件&#39;,</span><br><span class="line">        type: &#39;string&#39;</span><br><span class="line">    &#125;)</span><br><span class="line">    .option(&#39;d&#39;, &#123;</span><br><span class="line">        alias: &#39;dst&#39;,</span><br><span class="line">        demandOption: true,</span><br><span class="line">        default: &#39;b.txt&#39;,</span><br><span class="line">        describe: &#39;目标文件&#39;,</span><br><span class="line">        type: &#39;string&#39;</span><br><span class="line">    &#125;)</span><br><span class="line">    .argv;</span><br><span class="line"> </span><br><span class="line">console.log(argv);</span><br></pre></td></tr></table></figure>
<p>有些时候我们只想知道某些参数有没有设置，是 true 或是 false。<br>通过 .boolean(key) 解析参数为布尔值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const yargs &#x3D; require(&#39;yargs&#39;);</span><br><span class="line"> </span><br><span class="line">let argv &#x3D; yargs</span><br><span class="line">    .alias(&#39;s&#39;, &#39;save&#39;)</span><br><span class="line">    .boolean([&#39;s&#39;])</span><br><span class="line">    .argv;</span><br><span class="line"> </span><br><span class="line">console.log(argv);</span><br></pre></td></tr></table></figure>
<p>.usage() 用法格式<br>.example(cmd, desc) 提供例子<br>.help() 帮助信息<br>.epilog(str) 在帮助信息尾部显示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const yargs &#x3D; require(&#39;yargs&#39;);</span><br><span class="line"> </span><br><span class="line">let argv &#x3D; yargs</span><br><span class="line">    .alias(&#39;s&#39;, &#39;save&#39;)</span><br><span class="line">    .usage(&#39;Usage: --s &lt;filename&gt;&#39;)</span><br><span class="line">    .example(&#39;--s a.txt&#39;, &#39;设置源文件&#39;)</span><br><span class="line">    .epilog(&#39;copyright&#39;)</span><br><span class="line">    .help(&#39;info&#39;)</span><br><span class="line">    .argv;</span><br><span class="line"> </span><br><span class="line">console.log(argv);</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/node%E4%B9%8Bnodemon%E7%9A%84%E7%AE%80%E5%8D%95%E9%85%8D%E7%BD%AE%E5%92%8C%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nirvana/images/headphoto.jpeg">
      <meta itemprop="name" content="nirvana">
      <meta itemprop="description" content="个人学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="涅槃快乐是金">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/node%E4%B9%8Bnodemon%E7%9A%84%E7%AE%80%E5%8D%95%E9%85%8D%E7%BD%AE%E5%92%8C%E4%BD%BF%E7%94%A8/" class="post-title-link" itemprop="url">node之nodemon的简单配置和使用</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-11 21:12:40" itemprop="dateCreated datePublished" datetime="2021-03-11T21:12:40+08:00">2021-03-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-03-10 13:43:55" itemprop="dateModified" datetime="2021-03-10T13:43:55+08:00">2021-03-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/nirvana/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>382</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>nodemon是一种工具，通过在检测到目录中的文件更改时自动重新启动节点应用程序来帮助开发基于node.js的应用程序。</p>
<p>nodemon并没有要求任何对你的代码或开发的方法中的额外变化。nodemon是一个替换包装器node，用于在执行脚本时nodemon替换node命令行上。</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g nodemon</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>nodemon将全局安装到您的系统路径。</p>
<p>您还可以将nodemon安装为开发依赖项：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev nodemon</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nodemon app.js</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>使用帮助</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nodemon -h</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>如果我的应用程序接受主机和端口作为参数，我会这样开始：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nodemon .&#x2F;server.js localhost 8080</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>如果想更多的学习，就去github上仔细看一下<br><a target="_blank" rel="noopener" href="https://github.com/remy/nodemon">https://github.com/remy/nodemon</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/node%E6%9C%8D%E5%8A%A1%E7%AB%AF%E8%A7%A3%E5%86%B3socket-io%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98express,koa/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nirvana/images/headphoto.jpeg">
      <meta itemprop="name" content="nirvana">
      <meta itemprop="description" content="个人学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="涅槃快乐是金">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/node%E6%9C%8D%E5%8A%A1%E7%AB%AF%E8%A7%A3%E5%86%B3socket-io%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98express,koa/" class="post-title-link" itemprop="url">node服务端解决socket.io跨域问题express,koa</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-11 21:12:40" itemprop="dateCreated datePublished" datetime="2021-03-11T21:12:40+08:00">2021-03-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-03-10 22:10:26" itemprop="dateModified" datetime="2021-03-10T22:10:26+08:00">2021-03-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/nirvana/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.2k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h3><p>我们今天主要记录下 <code>socket.io</code>跨域的问题</p>
<p>我们服务端采用 <code>node</code>分别使用 <code>express</code>,<code>koa</code> 搭建</p>
<p>首先我们下载 <code>socket.io</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i socket.io</span><br></pre></td></tr></table></figure>
<p>首先是 <code>express</code> 搭建</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 导入express </span><br><span class="line">const express &#x3D; require(&quot;express&quot;)</span><br><span class="line">const app &#x3D; express()</span><br><span class="line">&#x2F;&#x2F; 开启socket服务</span><br><span class="line">let server &#x3D; app.listen(12345)</span><br><span class="line">&#x2F;&#x2F; socket 初始化</span><br><span class="line">const io &#x3D; require(&quot;socket.io&quot;)(server)</span><br><span class="line">&#x2F;&#x2F; 监听</span><br><span class="line">io.on(&quot;connection&quot;, (socket) &#x3D;&gt; &#123;   </span><br><span class="line">      console.log(&quot;有人链接&quot;)&#125;)</span><br><span class="line">      app.listen(3322, () &#x3D;&gt; &#123;    </span><br><span class="line">            console.log(&quot;服务开启成功。。。。&quot;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>然后我们使用 <code>koa</code> 搭建一下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 引入依赖</span><br><span class="line">const koa &#x3D; require(&quot;koa&quot;);</span><br><span class="line">&#x2F;&#x2F; 初始化koa</span><br><span class="line">const app &#x3D; new koa();</span><br><span class="line">&#x2F;&#x2F; 开启 http </span><br><span class="line">var server &#x3D; require(&quot;http&quot;).createServer(app.callback());</span><br><span class="line">&#x2F;&#x2F; 初始化 socket</span><br><span class="line">const io &#x3D; require(&quot;socket.io&quot;)(server);</span><br><span class="line">&#x2F;&#x2F; 监听</span><br><span class="line">io.on(&quot;connection&quot;, (socket) &#x3D;&gt; &#123;</span><br><span class="line">    console.log(&quot;有人链接&quot;);</span><br><span class="line">&#125;);</span><br><span class="line">server.listen(3000);</span><br></pre></td></tr></table></figure>
<p>然后服务端我们就搭建好了</p>
<p>我们来搭建客户端页面</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">        &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1.0&quot;&gt;</span><br><span class="line">        &lt;title&gt;Document&lt;&#x2F;title&gt;</span><br><span class="line">        &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdnjs.cloudflare.com&#x2F;ajax&#x2F;libs&#x2F;socket.io&#x2F;3.0.3&#x2F;socket.io.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">    &lt;&#x2F;head&gt;</span><br><span class="line">    &lt;body&gt;&lt;&#x2F;body&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">    		&#x2F;&#x2F; 链接服务</span><br><span class="line">        let socket &#x3D; io(&#39;ws:&#x2F;&#x2F;localhost:5522&#39;);</span><br><span class="line">        &#x2F;&#x2F; 正常 如果正常链接 后端会打印有人链接</span><br><span class="line">    &lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>

<p>###问题</p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-a68783408dd6e02c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="socket跨域"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Access to XMLHttpRequest at &#39;http:&#x2F;&#x2F;localhost:3000&#x2F;socket.io&#x2F;?EIO&#x3D;4&amp;transport&#x3D;polling&amp;t&#x3D;NOibQzP&#39; from origin &#39;http:&#x2F;&#x2F;127.0.0.1:5501&#39;has been blocked by CORS policy: No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource.</span><br></pre></td></tr></table></figure>
<p>会报这个错误 （跨域问题） 我们通常的解决方案是什么呢？</p>
<p>拿koa来说 你肯定会安装一个<code>koa-cors</code> 中间件来解决跨域 但是这只能解决你路由数据的跨域</p>
<p>并不能解决 <code>socket.io</code> 的跨域</p>
<h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><p>我们需要在我们初始化 <code>socket.io</code> 的时候 加上一句<code>cors:true</code> 即可</p>
<p><code>express</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; socket 初始化const io &#x3D; require(&quot;socket.io&quot;)(server, &#123; cors: true &#125;)</span><br></pre></td></tr></table></figure>
<p><code>koa</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 初始化 socketconst io &#x3D; require(&quot;socket.io&quot;)(server, &#123; cors: true &#125;);</span><br></pre></td></tr></table></figure>

<p>我们在来看后台控制它是否打印了 “有人链接了” 的字样</p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-7611ff2c7418befa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="socket.io跨域"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/npm-qs-%E6%A8%A1%E5%9D%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nirvana/images/headphoto.jpeg">
      <meta itemprop="name" content="nirvana">
      <meta itemprop="description" content="个人学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="涅槃快乐是金">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/npm-qs-%E6%A8%A1%E5%9D%97/" class="post-title-link" itemprop="url">npm qs模块</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-11 21:12:40" itemprop="dateCreated datePublished" datetime="2021-03-11T21:12:40+08:00">2021-03-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-03-10 22:10:44" itemprop="dateModified" datetime="2021-03-10T22:10:44+08:00">2021-03-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/nirvana/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>12k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>11 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>qs 是一个增加了一些安全性的查询字符串解析和序列化字符串的库。<br>主要维护者：Jordan Harband<br>最初创建者和维护者：TJ Holowaychuk</p>
<h3 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var qs &#x3D; require(&#39;qs&#39;);</span><br><span class="line">var assert &#x3D; require(&#39;assert&#39;);</span><br><span class="line"></span><br><span class="line">var obj &#x3D; qs.parse(&#39;a&#x3D;c&#39;);</span><br><span class="line">assert.deepEqual(obj, &#123; a: &#39;c&#39; &#125;);</span><br><span class="line"></span><br><span class="line">var str &#x3D; qs.stringify(obj);</span><br><span class="line">assert.equal(str, &#39;a&#x3D;c&#39;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol>
<li><p>解析对象</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">qs.parse(string, [options]);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<ul>
<li><p>qs 允许在查询字符串中使用<code>[]</code>的方式创建嵌套的对象。例如，字符串<code>&#39;foo[bar]=baz&#39;</code>可以转换为：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">assert.deepEqual(qs.parse(&#39;foo[bar]&#x3D;baz&#39;), &#123;</span><br><span class="line">    foo: &#123;</span><br><span class="line">        bar: &#39;baz&#39;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>When using the plainObjects option the parsed value is returned as a null object, created via Object.create(null) and as such you should be aware that prototype methods will not exist on it and a user may set those names to whatever value they like:</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var nullObject &#x3D; qs.parse(&#39;a[hasOwnProperty]&#x3D;b&#39;, &#123; plainObjects: true &#125;);</span><br><span class="line">assert.deepEqual(nullObject, &#123; a: &#123; hasOwnProperty: &#39;b&#39; &#125; &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>By default parameters that would overwrite properties on the object prototype are ignored, if you wish to keep the data from those fields either use plainObjects as mentioned above, or set allowPrototypes to true which will allow user input to overwrite those properties. WARNING It is generally a bad idea to enable this option as it can cause problems when attempting to use the properties that have been overwritten. Always be careful with this option.</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var protoObject &#x3D; qs.parse(&#39;a[hasOwnProperty]&#x3D;b&#39;, &#123; allowPrototypes: true &#125;);</span><br><span class="line">assert.deepEqual(protoObject, &#123; a: &#123; hasOwnProperty: &#39;b&#39; &#125; &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>也可以解析 URI 编码：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">assert.deepEqual(qs.parse(&#39;a%5Bb%5D&#x3D;c&#39;), &#123;</span><br><span class="line">    a: &#123; b: &#39;c&#39; &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>还可以像这样嵌套对象：<code>&#39;foo[bar][baz]=foobarbaz&#39;</code>：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">assert.deepEqual(qs.parse(&#39;foo[bar][baz]&#x3D;foobarbaz&#39;), &#123;</span><br><span class="line">    foo: &#123;</span><br><span class="line">        bar: &#123;</span><br><span class="line">            baz: &#39;foobarbaz&#39;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>当使用嵌套对象时，qs 在默认情况下最多解析到的深度是第五层（注：从第一个方括号到算起，到第五个方括号），例如尝试解析一个这样的字符串<code>&#39;a[b][c][d][e][f][g][h][i]=j&#39;</code>将会得到以下结果：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">var expected &#x3D; &#123;</span><br><span class="line">    a: &#123;</span><br><span class="line">        b: &#123;</span><br><span class="line">            c: &#123;</span><br><span class="line">                d: &#123;</span><br><span class="line">                    e: &#123;</span><br><span class="line">                        f: &#123;</span><br><span class="line">                            &#39;[g][h][i]&#39;: &#39;j&#39;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">var string &#x3D; &#39;a[b][c][d][e][f][g][h][i]&#x3D;j&#39;;</span><br><span class="line">assert.deepEqual(qs.parse(string), expected);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>可以给 qs.parse 传递一个 <code>depth</code> 参数覆盖默认值：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var deep &#x3D; qs.parse(&#39;a[b][c][d][e][f][g][h][i]&#x3D;j&#39;, &#123; depth: 1 &#125;);</span><br><span class="line">assert.deepEqual(deep, &#123; a: &#123; b: &#123; &#39;[c][d][e][f][g][h][i]&#39;: &#39;j&#39; &#125; &#125; &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>  当 qs 用于解析用户输入的时候，解析深度的限制有助于减轻用户的滥用行为。最好将 depth 设置为一个合理的尽量小的数字。</p>
</li>
<li><p>出于类似的原因，qs 在默认情况下最多解析 1000 个参数。通过传递 <code>parameterLimit</code> 参数可以修改默认值：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var limited &#x3D; qs.parse(&#39;a&#x3D;b&amp;c&#x3D;d&#39;, &#123; parameterLimit: 1 &#125;);</span><br><span class="line">assert.deepEqual(limited, &#123; a: &#39;b&#39; &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>忽略查询字符串开头的 <code>?</code> 可以使用 <code>ignoreQueryPrefix</code>：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var prefixed &#x3D; qs.parse(&#39;?a&#x3D;b&amp;c&#x3D;d&#39;, &#123; ignoreQueryPrefix: true &#125;);</span><br><span class="line">assert.deepEqual(prefixed, &#123; a: &#39;b&#39;, c: &#39;d&#39; &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>还可以根据自定义的分隔符来解析 <code>delimiter</code>：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var delimited &#x3D; qs.parse(&#39;a&#x3D;b;c&#x3D;d&#39;, &#123; delimiter: &#39;;&#39; &#125;);</span><br><span class="line">assert.deepEqual(delimited, &#123; a: &#39;b&#39;, c: &#39;d&#39; &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>分隔符可以是正则表达式：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var regexed &#x3D; qs.parse(&#39;a&#x3D;b;c&#x3D;d,e&#x3D;f&#39;, &#123; delimiter: &#x2F;[;,]&#x2F; &#125;);</span><br><span class="line">assert.deepEqual(regexed, &#123; a: &#39;b&#39;, c: &#39;d&#39;, e: &#39;f&#39; &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p><code>allowDots</code> 选项可以启用点表示法：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var withDots &#x3D; qs.parse(&#39;a.b&#x3D;c&#39;, &#123; allowDots: true &#125;);</span><br><span class="line">assert.deepEqual(withDots, &#123; a: &#123; b: &#39;c&#39; &#125; &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="2">
<li> 解析数组</li>
</ol>
<ul>
<li><p>qs 也可以用<code>[]</code>解析数组：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var withArray &#x3D; qs.parse(&#39;a[]&#x3D;b&amp;a[]&#x3D;c&#39;);</span><br><span class="line">assert.deepEqual(withArray, &#123; a: [&#39;b&#39;, &#39;c&#39;] &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>可以指定数组索引：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var withIndexes &#x3D; qs.parse(&#39;a[1]&#x3D;c&amp;a[0]&#x3D;b&#39;);</span><br><span class="line">assert.deepEqual(withIndexes, &#123; a: [&#39;b&#39;, &#39;c&#39;] &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>请注意，如果想要将字符串解析成数组而不是对象，那么<code>[]</code>之间的值必须是一个数字。 在创建具有特定索引的数组时，qs会将稀疏数组压缩为仅保留其顺序的现有值：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var noSparse &#x3D; qs.parse(&#39;a[1]&#x3D;b&amp;a[15]&#x3D;c&#39;);</span><br><span class="line">assert.deepEqual(noSparse, &#123; a: [&#39;b&#39;, &#39;c&#39;] &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>空字符串也是一个值，并将被保留：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var withEmptyString &#x3D; qs.parse(&#39;a[]&#x3D;&amp;a[]&#x3D;b&#39;);</span><br><span class="line">assert.deepEqual(withEmptyString, &#123; a: [&#39;&#39;, &#39;b&#39;] &#125;);</span><br><span class="line"></span><br><span class="line">var withIndexedEmptyString &#x3D; qs.parse(&#39;a[0]&#x3D;b&amp;a[1]&#x3D;&amp;a[2]&#x3D;c&#39;);</span><br><span class="line">assert.deepEqual(withIndexedEmptyString, &#123; a: [&#39;b&#39;, &#39;&#39;, &#39;c&#39;] &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>qs 还会限制数组最大索引为 20，任何索引大于20的数组成员都将被转换为以索引为键的对象：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var withMaxIndex &#x3D; qs.parse(&#39;a[100]&#x3D;b&#39;);</span><br><span class="line">assert.deepEqual(withMaxIndex, &#123; a: &#123; &#39;100&#39;: &#39;b&#39; &#125; &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p><code>arrayLimit</code> 选项可以修改默认限制：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var withArrayLimit &#x3D; qs.parse(&#39;a[1]&#x3D;b&#39;, &#123; arrayLimit: 0 &#125;);</span><br><span class="line">assert.deepEqual(withArrayLimit, &#123; a: &#123; &#39;1&#39;: &#39;b&#39; &#125; &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>字符串不解析成数组，可以设置 <code>parseArrays</code> 为 <code>false</code></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var noParsingArrays &#x3D; qs.parse(&#39;a[]&#x3D;b&#39;, &#123; parseArrays: false &#125;);</span><br><span class="line">assert.deepEqual(noParsingArrays, &#123; a: &#123; &#39;0&#39;: &#39;b&#39; &#125; &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>如果混合使用两种格式，qs 会将字符串解析为对象：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var mixedNotation &#x3D; qs.parse(&#39;a[0]&#x3D;b&amp;a[b]&#x3D;c&#39;);</span><br><span class="line">assert.deepEqual(mixedNotation, &#123; a: &#123; &#39;0&#39;: &#39;b&#39;, b: &#39;c&#39; &#125; &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>也可以创建元素为对象的数组：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var arraysOfObjects &#x3D; qs.parse(&#39;a[][b]&#x3D;c&#39;);</span><br><span class="line">assert.deepEqual(arraysOfObjects, &#123; a: [&#123; b: &#39;c&#39; &#125;] &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="3">
<li><p>序列化字符串</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">qs.stringify(object, [options]);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<ul>
<li><p>默认情况下，对象序列化后进行URI编码后输出：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">assert.equal(qs.stringify(&#123; a: &#39;b&#39; &#125;), &#39;a&#x3D;b&#39;);</span><br><span class="line">assert.equal(qs.stringify(&#123; a: &#123; b: &#39;c&#39; &#125; &#125;), &#39;a%5Bb%5D&#x3D;c&#39;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>通过设置 <code>encode</code> 为 <code>false</code> 禁止 URI 编码：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var unencoded &#x3D; qs.stringify(&#123; a: &#123; b: &#39;c&#39; &#125; &#125;, &#123; encode: false &#125;);</span><br><span class="line">assert.equal(unencoded, &#39;a[b]&#x3D;c&#39;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>通过设置 <code>encodeValuesOnly</code> 为 <code>true</code>，可以禁用对 key 进行URI 编码：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var encodedValues &#x3D; qs.stringify(</span><br><span class="line">    &#123; a: &#39;b&#39;, c: [&#39;d&#39;, &#39;e&#x3D;f&#39;], f: [[&#39;g&#39;], [&#39;h&#39;]] &#125;,</span><br><span class="line">    &#123; encodeValuesOnly: true &#125;</span><br><span class="line">);</span><br><span class="line">assert.equal(encodedValues,&#39;a&#x3D;b&amp;c[0]&#x3D;d&amp;c[1]&#x3D;e%3Df&amp;f[0][0]&#x3D;g&amp;f[1][0]&#x3D;h&#39;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><p>可以通过设置<code>encoder</code> 选项自定义编码方式（<em>注意：当 <code>encode</code> 被设置为 <code>false</code> 的时候，不适用</em>）：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var encoded &#x3D; qs.stringify(&#123; a: &#123; b: &#39;c&#39; &#125; &#125;, &#123; encoder: function (str) &#123;</span><br><span class="line">    &#x2F;&#x2F; Passed in values &#96;a&#96;, &#96;b&#96;, &#96;c&#96;</span><br><span class="line">    return &#x2F;&#x2F; Return encoded string</span><br><span class="line">&#125;&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>与<code>encoder</code> 类似 <code>decoder</code> 可以用来解码：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">	var decoded &#x3D; qs.parse(&#39;x&#x3D;z&#39;, &#123; decoder: function (str) &#123;</span><br><span class="line">	    &#x2F;&#x2F; Passed in values &#96;x&#96;, &#96;z&#96;</span><br><span class="line">	    return &#x2F;&#x2F; Return decoded string</span><br><span class="line">	&#125;&#125;)</span><br><span class="line"></span><br><span class="line">Examples beyond this point will be shown as though the output is not URI encoded for clarity. Please note that the return values in these cases will be URI encoded during real usage.</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>当数组被序列化时，默认显示索引：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">qs.stringify(&#123; a: [&#39;b&#39;, &#39;c&#39;, &#39;d&#39;] &#125;);</span><br><span class="line">&#x2F;&#x2F; &#39;a[0]&#x3D;b&amp;a[1]&#x3D;c&amp;a[2]&#x3D;d&#39;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>可以通过设置 <code>indices</code> 为 <code>false</code> 不显示索引：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">qs.stringify(&#123; a: [&#39;b&#39;, &#39;c&#39;, &#39;d&#39;] &#125;, &#123; indices: false &#125;);</span><br><span class="line">&#x2F;&#x2F; &#39;a&#x3D;b&amp;a&#x3D;c&amp;a&#x3D;d&#39;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>可以通过设置 <code>arrayFormat</code> 选项指定数组输出格式：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">qs.stringify(&#123; a: [&#39;b&#39;, &#39;c&#39;] &#125;, &#123; arrayFormat: &#39;indices&#39; &#125;)</span><br><span class="line">&#x2F;&#x2F; &#39;a[0]&#x3D;b&amp;a[1]&#x3D;c&#39;</span><br><span class="line">qs.stringify(&#123; a: [&#39;b&#39;, &#39;c&#39;] &#125;, &#123; arrayFormat: &#39;brackets&#39; &#125;)</span><br><span class="line">&#x2F;&#x2F; &#39;a[]&#x3D;b&amp;a[]&#x3D;c&#39;</span><br><span class="line">qs.stringify(&#123; a: [&#39;b&#39;, &#39;c&#39;] &#125;, &#123; arrayFormat: &#39;repeat&#39; &#125;)</span><br><span class="line">&#x2F;&#x2F; &#39;a&#x3D;b&amp;a&#x3D;c&#39;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>对象序列化时，默认使用 <code>[]</code> 表示法：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">qs.stringify(&#123; a: &#123; b: &#123; c: &#39;d&#39;, e: &#39;f&#39; &#125; &#125; &#125;);</span><br><span class="line">&#x2F;&#x2F; &#39;a[b][c]&#x3D;d&amp;a[b][e]&#x3D;f&#39;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>通过设置 <code>allowDots</code> 为 <code>true</code>修改为点表示法：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">qs.stringify(&#123; a: &#123; b: &#123; c: &#39;d&#39;, e: &#39;f&#39; &#125; &#125; &#125;, &#123; allowDots: true &#125;);</span><br><span class="line">&#x2F;&#x2F; &#39;a.b.c&#x3D;d&amp;a.b.e&#x3D;f&#39;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>空字符串和<code>null</code>值将被省略，但是<code>=</code>会保留：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">assert.equal(qs.stringify(&#123; a: &#39;&#39; &#125;), &#39;a&#x3D;&#39;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>没有值的键将什么也不返回（例如空对象或数组）：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">assert.equal(qs.stringify(&#123; a: [] &#125;), &#39;&#39;);</span><br><span class="line">assert.equal(qs.stringify(&#123; a: &#123;&#125; &#125;), &#39;&#39;);</span><br><span class="line">assert.equal(qs.stringify(&#123; a: [&#123;&#125;] &#125;), &#39;&#39;);</span><br><span class="line">assert.equal(qs.stringify(&#123; a: &#123; b: []&#125; &#125;), &#39;&#39;);</span><br><span class="line">assert.equal(qs.stringify(&#123; a: &#123; b: &#123;&#125;&#125; &#125;), &#39;&#39;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>值为 <code>undefined</code> 的属性将会被完全忽略：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">assert.equal(qs.stringify(&#123; a: null, b: undefined &#125;), &#39;a&#x3D;&#39;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p><code>addQueryPrefix</code> 设置为 <code>true</code>可以在查询字符串前面加 <code>?</code>：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">assert.equal(qs.stringify(&#123; a: &#39;b&#39;, c: &#39;d&#39; &#125;, &#123; addQueryPrefix: true &#125;), &#39;?a&#x3D;b&amp;c&#x3D;d&#39;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>分隔符也可以设置：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">assert.equal(qs.stringify(&#123; a: &#39;b&#39;, c: &#39;d&#39; &#125;, &#123; delimiter: &#39;;&#39; &#125;), &#39;a&#x3D;b;c&#x3D;d&#39;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>如果只是序列化日期对象，可以使用 <code>serializeDate</code> 选项：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var date &#x3D; new Date(7);</span><br><span class="line">assert.equal(qs.stringify(&#123; a: date &#125;), &#39;a&#x3D;1970-01-01T00:00:00.007Z&#39;.replace(&#x2F;:&#x2F;g, &#39;%3A&#39;));</span><br><span class="line">assert.equal(</span><br><span class="line">    qs.stringify(&#123; a: date &#125;, &#123; serializeDate: function (d) &#123; return d.getTime(); &#125; &#125;),</span><br><span class="line">    &#39;a&#x3D;7&#39;</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>可以使用 <code>sort</code> 选项来修改键的顺序：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function alphabeticalSort(a, b) &#123;</span><br><span class="line">    return a.localeCompare(b);</span><br><span class="line">&#125;</span><br><span class="line">assert.equal(qs.stringify(&#123; a: &#39;c&#39;, z: &#39;y&#39;, b : &#39;f&#39; &#125;, &#123; sort: alphabeticalSort &#125;), &#39;a&#x3D;c&amp;b&#x3D;f&amp;z&#x3D;y&#39;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>最后，可以使用 <code>filter</code> 选项过滤序列化输出的键。如果给<code>filter</code>传递一个函数，每个键调用一次该函数并用返回的值替换原来值。如果给<code>filter</code>传递一个数组，它将用于选择对象的key和数组的索引：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">function filterFunc(prefix, value) &#123;</span><br><span class="line">    if (prefix &#x3D;&#x3D; &#39;b&#39;) &#123;</span><br><span class="line">        &#x2F;&#x2F; Return an &#96;undefined&#96; value to omit a property.</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    if (prefix &#x3D;&#x3D; &#39;e[f]&#39;) &#123;</span><br><span class="line">        return value.getTime();</span><br><span class="line">    &#125;</span><br><span class="line">    if (prefix &#x3D;&#x3D; &#39;e[g][0]&#39;) &#123;</span><br><span class="line">        return value * 2;</span><br><span class="line">    &#125;</span><br><span class="line">    return value;</span><br><span class="line">&#125;</span><br><span class="line">qs.stringify(&#123; a: &#39;b&#39;, c: &#39;d&#39;, e: &#123; f: new Date(123), g: [2] &#125; &#125;, &#123; filter: filterFunc &#125;);</span><br><span class="line">&#x2F;&#x2F; &#39;a&#x3D;b&amp;c&#x3D;d&amp;e[f]&#x3D;123&amp;e[g][0]&#x3D;4&#39;</span><br><span class="line">qs.stringify(&#123; a: &#39;b&#39;, c: &#39;d&#39;, e: &#39;f&#39; &#125;, &#123; filter: [&#39;a&#39;, &#39;e&#39;] &#125;);</span><br><span class="line">&#x2F;&#x2F; &#39;a&#x3D;b&amp;e&#x3D;f&#39;</span><br><span class="line">qs.stringify(&#123; a: [&#39;b&#39;, &#39;c&#39;, &#39;d&#39;], e: &#39;f&#39; &#125;, &#123; filter: [&#39;a&#39;, 0, 2] &#125;);</span><br><span class="line">&#x2F;&#x2F; &#39;a[0]&#x3D;b&amp;a[2]&#x3D;d&#39;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="4">
<li> 处理 <code>null</code> 值</li>
</ol>
<ul>
<li><p>默认情况下，<code>null</code> 值被视为空对象：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var withNull &#x3D; qs.stringify(&#123; a: null, b: &#39;&#39; &#125;);</span><br><span class="line">assert.equal(withNull, &#39;a&#x3D;&amp;b&#x3D;&#39;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>解析字符串的时候并不会区分参数有没有等号，没有值的话都会解析为空字符串：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var equalsInsensitive &#x3D; qs.parse(&#39;a&amp;b&#x3D;&#39;);</span><br><span class="line">assert.deepEqual(equalsInsensitive, &#123; a: &#39;&#39;, b: &#39;&#39; &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>要想区分空字符串和<code>null</code>值可以使用 <code>strictNullHandling</code> 选项，序列化后的 <code>null</code> 值没有<code>=</code></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var strictNull &#x3D; qs.stringify(&#123; a: null, b: &#39;&#39; &#125;, &#123; strictNullHandling: true &#125;);</span><br><span class="line">assert.equal(strictNull, &#39;a&amp;b&#x3D;&#39;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>要解析不带 <code>=</code> 的值返回 <code>null</code>可以使用 <code>strictNullHandling</code> 选项：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var parsedStrictNull &#x3D; qs.parse(&#39;a&amp;b&#x3D;&#39;, &#123; strictNullHandling: true &#125;);</span><br><span class="line">assert.deepEqual(parsedStrictNull, &#123; a: null, b: &#39;&#39; &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>想要完全跳过值为 <code>null</code> 的键不解析，可以使用 <code>skipNulls</code> 选项：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var nullsSkipped &#x3D; qs.stringify(&#123; a: &#39;b&#39;, c: null&#125;, &#123; skipNulls: true &#125;);</span><br><span class="line">assert.equal(nullsSkipped, &#39;a&#x3D;b&#39;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="5">
<li> 处理特殊字符集：</li>
</ol>
<ul>
<li><p>默认情况下，字符的编码和解码在utf-8中完成。 如果希望将查询字符串编码为不同的字符集（i.e.Shift JIS），您可以使用qs-iconv库：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var encoder &#x3D; require(&#39;qs-iconv&#x2F;encoder&#39;)(&#39;shift_jis&#39;);</span><br><span class="line">var shiftJISEncoded &#x3D; qs.stringify(&#123; a: &#39;こんにちは！&#39; &#125;, &#123; encoder: encoder &#125;);</span><br><span class="line">assert.equal(shiftJISEncoded, &#39;a&#x3D;%82%B1%82%F1%82%C9%82%BF%82%CD%81I&#39;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>这也适用于解码查询字符串：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var decoder &#x3D; require(&#39;qs-iconv&#x2F;decoder&#39;)(&#39;shift_jis&#39;);</span><br><span class="line">var obj &#x3D; qs.parse(&#39;a&#x3D;%82%B1%82%F1%82%C9%82%BF%82%CD%81I&#39;, &#123; decoder: decoder &#125;);</span><br><span class="line">assert.deepEqual(obj, &#123; a: &#39;こんにちは！&#39; &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="6">
<li><p>RFC 3986 and RFC 1738 space encoding</p>
<p> RFC3986 used as default option and encodes ’ ’ to %20 which is backward compatible. In the same time, output can be stringified as per RFC1738 with ’ ’ equal to ‘+’.</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">assert.equal(qs.stringify(&#123; a: &#39;b c&#39; &#125;), &#39;a&#x3D;b%20c&#39;);</span><br><span class="line">assert.equal(qs.stringify(&#123; a: &#39;b c&#39; &#125;, &#123; format : &#39;RFC3986&#39; &#125;), &#39;a&#x3D;b%20c&#39;);</span><br><span class="line">assert.equal(qs.stringify(&#123; a: &#39;b c&#39; &#125;, &#123; format : &#39;RFC1738&#39; &#125;), &#39;a&#x3D;b+c&#39;);</span><br></pre></td></tr></table></figure></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/npm%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nirvana/images/headphoto.jpeg">
      <meta itemprop="name" content="nirvana">
      <meta itemprop="description" content="个人学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="涅槃快乐是金">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/npm%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95/" class="post-title-link" itemprop="url">npm命令记录</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-11 21:12:40" itemprop="dateCreated datePublished" datetime="2021-03-11T21:12:40+08:00">2021-03-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-03-10 13:43:55" itemprop="dateModified" datetime="2021-03-10T13:43:55+08:00">2021-03-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/nirvana/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>355</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="强制清除npm指令"><a href="#强制清除npm指令" class="headerlink" title="强制清除npm指令"></a>强制清除npm指令</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm cache clean -f</span><br></pre></td></tr></table></figure>

<h2 id="设置下载源"><a href="#设置下载源" class="headerlink" title="设置下载源"></a>设置下载源</h2><blockquote>
<p>镜像使用方法（三种办法任意一种都能解决问题，建议使用第三种，将配&gt;置写死，下次用的时候配置还在）:</p>
<h4 id="1-通过config命令"><a href="#1-通过config命令" class="headerlink" title="1. 通过config命令"></a>1. 通过config命令</h4><p>npm config set registry [<a href="https://registry.npm.taobao.org]&gt;(https://registry.npm.taobao.org/)">https://registry.npm.taobao.org]&gt;(https://registry.npm.taobao.org/)</a> npm info underscore （如果上面配置正确&gt;这个命令会有字符串response）</p>
<h4 id="2-命令行指定"><a href="#2-命令行指定" class="headerlink" title="2. 命令行指定"></a>2. 命令行指定</h4><p>npm –registry <a target="_blank" rel="noopener" href="https://registry.npm.taobao.org/">https://registry.npm.taobao.org</a> info underscore</p>
<h4 id="3-编辑-npmrc-加入下面内容"><a href="#3-编辑-npmrc-加入下面内容" class="headerlink" title="3. 编辑 ~/.npmrc 加入下面内容"></a>3. 编辑 ~/.npmrc 加入下面内容</h4><p>registry = <a target="_blank" rel="noopener" href="https://registry.npm.taobao.org/">https://registry.npm.taobao.org</a></p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/nrm-%E2%80%94%E2%80%94-%E5%BF%AB%E9%80%9F%E5%88%87%E6%8D%A2-NPM-%E6%BA%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nirvana/images/headphoto.jpeg">
      <meta itemprop="name" content="nirvana">
      <meta itemprop="description" content="个人学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="涅槃快乐是金">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/nrm-%E2%80%94%E2%80%94-%E5%BF%AB%E9%80%9F%E5%88%87%E6%8D%A2-NPM-%E6%BA%90/" class="post-title-link" itemprop="url">nrm-——-快速切换NPM源</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-11 21:12:40" itemprop="dateCreated datePublished" datetime="2021-03-11T21:12:40+08:00">2021-03-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-03-10 22:10:55" itemprop="dateModified" datetime="2021-03-10T22:10:55+08:00">2021-03-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/nirvana/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>950</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>不同地区访问不同的镜像速度可能有差异，然后各个镜像各自都可能有少数包暂时没有同步，因此，有时候需要切换 NPM 镜像。相比每次切换时都手动指定相应参数，使用***nrm ***要方便的多。<br>npm registry 管理工具 <a target="_blank" rel="noopener" href="https://github.com/Pana/nrm">nrm</a>, 能够查看和切换当前使用的registry.</p>
<p>###Install</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g nrm</span><br></pre></td></tr></table></figure>
<p>###列出可选的源</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ nrm ls</span><br><span class="line"></span><br><span class="line">* npm ---- https:&#x2F;&#x2F;registry.npmjs.org&#x2F;</span><br><span class="line">  cnpm --- http:&#x2F;&#x2F;r.cnpmjs.org&#x2F;</span><br><span class="line">  eu ----- http:&#x2F;&#x2F;registry.npmjs.eu&#x2F;</span><br><span class="line">  au ----- http:&#x2F;&#x2F;registry.npmjs.org.au&#x2F;</span><br><span class="line">  sl ----- http:&#x2F;&#x2F;npm.strongloop.com&#x2F;</span><br><span class="line">  nj ----- https:&#x2F;&#x2F;registry.nodejitsu.com&#x2F;</span><br></pre></td></tr></table></figure>
<p>带 <code>*</code>的是当前使用的源，上面的输出表明当前源是官方源。</p>
<p>###切换<br>切换到cnpm</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ nrm use cnpm &#x2F;&#x2F;switch registry to cnpm</span><br><span class="line"></span><br><span class="line">    Registry has been set to: http:&#x2F;&#x2F;r.cnpmjs.org&#x2F;</span><br></pre></td></tr></table></figure>
<h3 id="增加源"><a href="#增加源" class="headerlink" title="增加源"></a>增加源</h3><p>你可以增加定制的源，特别适用于添加企业内部的私有源。<a target="_blank" rel="noopener" href="http://segmentfault.com/a/1190000000368906">私有源可以使用cnpmjs架设</a>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nrm add  &lt;registry&gt; &lt;url&gt; [home]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="删除源"><a href="#删除源" class="headerlink" title="删除源"></a>删除源</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nrm del &lt;registry&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="测试速度"><a href="#测试速度" class="headerlink" title="测试速度"></a>测试速度</h3><p>你还可以通过 <code>nrm test</code> 测试相应源的响应时间。</p>
<p>例如，测试官方源的响应时间：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">; nrm test npm                                                                                                                               </span><br><span class="line"></span><br><span class="line">  npm ---- 1328ms</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>测试所有源的响应时间：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">; nrm test                                                                                                                                   </span><br><span class="line"></span><br><span class="line">  npm ---- 891ms</span><br><span class="line">  cnpm --- 1213ms</span><br><span class="line">  eu ----- 3859ms</span><br><span class="line">  au ----- 1073ms</span><br><span class="line">  sl ----- 4150ms</span><br><span class="line">  nj ----- 8008ms</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>注意，为了取得较准确的结果，可以考虑多次测试取平均值。</p>
<h2 id="项目主页"><a href="#项目主页" class="headerlink" title="项目主页"></a>项目主页</h2><p><a target="_blank" rel="noopener" href="https://github.com/Pana/nrm">github.com/Pana/nrm</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/nrm%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%E5%88%87%E6%8D%A2-NPM-%E9%95%9C%E5%83%8F%E6%BA%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nirvana/images/headphoto.jpeg">
      <meta itemprop="name" content="nirvana">
      <meta itemprop="description" content="个人学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="涅槃快乐是金">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/nrm%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%E5%88%87%E6%8D%A2-NPM-%E9%95%9C%E5%83%8F%E6%BA%90/" class="post-title-link" itemprop="url">nrm管理工具切换 NPM 镜像源</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-11 21:12:40" itemprop="dateCreated datePublished" datetime="2021-03-11T21:12:40+08:00">2021-03-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-03-10 22:11:02" itemprop="dateModified" datetime="2021-03-10T22:11:02+08:00">2021-03-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/nirvana/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>831</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>由于 <code>npm原始源</code>会请求国外服务器，对于国内的开发者着实不友好，使用 <code>nrm</code>(全称：NPM registry manager) 可以快速地在不同 <code>npm镜像源</code>之间进行快速切换。<br><strong>github 地址:</strong><a target="_blank" rel="noopener" href="https://github.com/Pana/nrm">nrm – NPM registry manager</a></p>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>[图片上传中…(image.png-72bb4a-1590129698542-0)]</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; npm install -g nrm</span><br></pre></td></tr></table></figure>

<blockquote>
<p>npm install packageName -g<br>// 安装 npm 包的指令，-g 是 global 的缩写，意为全局安装</p>
</blockquote>
<h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><p>执行 <code>nrm ls</code> 命令可查看所有可切换的 <code>npm镜像源</code> , 带 <code>*</code> 为当前正在使用的 <code>npm镜像源</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;nrm ls</span><br><span class="line">  npm ---- https:&#x2F;&#x2F;registry.npmjs.org&#x2F;</span><br><span class="line">  cnpm --- http:&#x2F;&#x2F;r.cnpmjs.org&#x2F;</span><br><span class="line">* taobao - https:&#x2F;&#x2F;registry.npm.taobao.org&#x2F;</span><br><span class="line">  nj ----- https:&#x2F;&#x2F;registry.nodejitsu.com&#x2F;</span><br><span class="line">  rednpm - http:&#x2F;&#x2F;registry.mirror.cqupt.edu.cn&#x2F;</span><br><span class="line">  npmMirror  https:&#x2F;&#x2F;skimdb.npmjs.com&#x2F;registry&#x2F;</span><br><span class="line">  edunpm - http:&#x2F;&#x2F;registry.enpmjs.org&#x2F;</span><br></pre></td></tr></table></figure>

<p>执行 <code>nrm use npmImageName</code> 即可切换到列表中存在的 <code>npm镜像源</code>，使用淘宝镜像为例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;nrm use taobao</span><br><span class="line">Registry has been set to: https:&#x2F;&#x2F;registry.npm.taobao.org&#x2F;</span><br></pre></td></tr></table></figure>

<p>此后再调用 <code>npm install</code> 下载任意包都会使用新的 <code>npm镜像源</code>进行下载。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/pointer-events/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nirvana/images/headphoto.jpeg">
      <meta itemprop="name" content="nirvana">
      <meta itemprop="description" content="个人学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="涅槃快乐是金">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/pointer-events/" class="post-title-link" itemprop="url">pointer-events</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-11 21:12:40" itemprop="dateCreated datePublished" datetime="2021-03-11T21:12:40+08:00">2021-03-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-03-10 13:43:55" itemprop="dateModified" datetime="2021-03-10T13:43:55+08:00">2021-03-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/nirvana/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.2k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>pointer-events<br>语法：<br>pointer-events：auto| none | visiblepainted | visiblefill | visiblestroke | visible | painted | fill | stroke | all<br>默认值：auto<br>适用于：所有元素<br>继承性：有<br>动画性：否<br>计算值：指定值</p>
<ul>
<li>取值：<br>auto：<br>与pointer-events属性未指定时的表现效果相同。在svg内容上与visiblepainted值相同<br>none：<br>元素永远不会成为鼠标事件的target。但是，当其后代元素的pointer-events属性指定其他值时，鼠标事件可以指向后代元素，在这种情况下，鼠标事件将在捕获或冒泡阶触发父元素的事件侦听器。<br>其他值只能应用在SVG上。</li>
</ul>
<p>说明：<br>设置或检索在何时成为属性事件的target。<br>使用pointer-events来阻止元素成为鼠标事件目标不一定意味着元素上的事件侦听器永不会触发。如果元素后代明确指定了pointer-events属性并允许其成为鼠标事件的目标，那么指向该元素的任何事件在事件传播过程中都将通过父元素，并以适当的方式触发其上的事件侦听器。当然位于屏幕上在父元素上但不在后代元素上的鼠标活动都不会被父元素和后代元素捕获（将会穿过父元素而指向位于其下面的元素）。<br>对应的脚本特性为pointerEvents。<br>兼容性：<br>浅绿 = 支持</p>
<p>红色 = 不支持</p>
<p>粉色 = 部分支持<br><img src="https://upload-images.jianshu.io/upload_images/10024246-2b69550f256cac89.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;zh-cmn-Hans&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset&#x3D;&quot;utf-8&quot; &#x2F;&gt;</span><br><span class="line">&lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">a[href&#x3D;&quot;http:&#x2F;&#x2F;example.com&quot;] &#123;</span><br><span class="line">	pointer-events: none;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">	&lt;li&gt;&lt;a href&#x3D;&quot;https:&#x2F;&#x2F;html.cn&#x2F;&quot;&gt;HTML中文网&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">	&lt;li&gt;&lt;a href&#x3D;&quot;http:&#x2F;&#x2F;example.com&quot;&gt;一个不能点击的链接&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">&lt;&#x2F;ul&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/nirvana/page/4/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/nirvana/">1</a><span class="space">&hellip;</span><a class="page-number" href="/nirvana/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/nirvana/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/nirvana/page/18/">18</a><a class="extend next" rel="next" href="/nirvana/page/6/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>


<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">nirvana</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">524k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">7:57</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
<script src="/nirvana/js/utils.js"></script><script src="/nirvana/js/motion.js"></script><script src="/nirvana/js/next-boot.js"></script>

  






  





</body>
</html>
