<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
 <meta name="referrer" content="no-referrer"/>

  <link rel="apple-touch-icon" sizes="180x180" href="/nirvana/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/nirvana/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/nirvana/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/nirvana/images/logo.svg" color="#222">

<link rel="stylesheet" href="/nirvana/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.2/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"lzhwweb.github.io","root":"/nirvana/","images":"/nirvana/images","scheme":"Gemini","version":"8.2.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}};
  </script>
<meta name="description" content="个人学习笔记">
<meta property="og:type" content="website">
<meta property="og:title" content="涅槃快乐是金">
<meta property="og:url" content="https://lzhwweb.github.io/nirvana/page/5/index.html">
<meta property="og:site_name" content="涅槃快乐是金">
<meta property="og:description" content="个人学习笔记">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="nirvana">
<meta property="article:tag" content="前端,javascript,node,git">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://lzhwweb.github.io/nirvana/page/5/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>
<title>涅槃快乐是金</title>
  




  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/nirvana/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">涅槃快乐是金</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/nirvana/" rel="section">首页</a></li>
        <li class="menu-item menu-item-git"><a href="/nirvana/categories/git" rel="section">git</a></li>
        <li class="menu-item menu-item-linux"><a href="/nirvana/categories/linux" rel="section">linux</a></li>
        <li class="menu-item menu-item-android"><a href="/nirvana/categories/android" rel="section">android</a></li>
        <li class="menu-item menu-item-随笔"><a href="/nirvana/categories/informal" rel="section">随笔</a></li>
        <li class="menu-item menu-item-mac"><a href="/nirvana/categories/mac" rel="section">mac</a></li>
        <li class="menu-item menu-item-react-native"><a href="/nirvana/categories/reactnative" rel="section">react-native</a></li>
        <li class="menu-item menu-item-算法"><a href="/nirvana/categories/algorithm" rel="section">算法</a></li>
        <li class="menu-item menu-item-读书笔记"><a href="/nirvana/categories/note" rel="section">读书笔记</a></li>
        <li class="menu-item menu-item-开发工具"><a href="/nirvana/categories/tool" rel="section">开发工具</a></li>
        <li class="menu-item menu-item-设计模式(ts)"><a href="/nirvana/categories/DesignPattern" rel="section">设计模式(TS)</a></li>
        <li class="menu-item menu-item-前端"><a href="/nirvana/categories/javascript" rel="section">前端</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="nirvana"
      src="/nirvana/images/headphoto.jpeg">
  <p class="site-author-name" itemprop="name">nirvana</p>
  <div class="site-description" itemprop="description">个人学习笔记</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/nirvana/archives">
          <span class="site-state-item-count">176</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">分类</span>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/JavaScript%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E6%96%B9%E6%B3%95-%EF%BC%881%EF%BC%89%E7%B1%BB%E5%9E%8B%E5%88%A4%E6%96%AD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nirvana/images/headphoto.jpeg">
      <meta itemprop="name" content="nirvana">
      <meta itemprop="description" content="个人学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="涅槃快乐是金">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/JavaScript%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E6%96%B9%E6%B3%95-%EF%BC%881%EF%BC%89%E7%B1%BB%E5%9E%8B%E5%88%A4%E6%96%AD/" class="post-title-link" itemprop="url">JavaScript常用工具方法（1）类型判断</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-11 21:12:40" itemprop="dateCreated datePublished" datetime="2021-03-11T21:12:40+08:00">2021-03-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-03-10 22:08:31" itemprop="dateModified" datetime="2021-03-10T22:08:31+08:00">2021-03-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/nirvana/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>8.7k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>8 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>##1. type 类型判断</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br></pre></td><td class="code"><pre><span class="line">isString (o) &#123; &#x2F;&#x2F;是否字符串</span><br><span class="line">    return Object.prototype.toString.call(o).slice(8, -1) &#x3D;&#x3D;&#x3D; &#39;String&#39;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">isNumber (o) &#123; &#x2F;&#x2F;是否数字</span><br><span class="line">    return Object.prototype.toString.call(o).slice(8, -1) &#x3D;&#x3D;&#x3D; &#39;Number&#39;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">isBoolean (o) &#123; &#x2F;&#x2F;是否boolean</span><br><span class="line">    return Object.prototype.toString.call(o).slice(8, -1) &#x3D;&#x3D;&#x3D; &#39;Boolean&#39;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">isFunction (o) &#123; &#x2F;&#x2F;是否函数</span><br><span class="line">    return Object.prototype.toString.call(o).slice(8, -1) &#x3D;&#x3D;&#x3D; &#39;Function&#39;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">isNull (o) &#123; &#x2F;&#x2F;是否为null</span><br><span class="line">    return Object.prototype.toString.call(o).slice(8, -1) &#x3D;&#x3D;&#x3D; &#39;Null&#39;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">isUndefined (o) &#123; &#x2F;&#x2F;是否undefined</span><br><span class="line">    return Object.prototype.toString.call(o).slice(8, -1) &#x3D;&#x3D;&#x3D; &#39;Undefined&#39;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">isObj (o) &#123; &#x2F;&#x2F;是否对象</span><br><span class="line">    return Object.prototype.toString.call(o).slice(8, -1) &#x3D;&#x3D;&#x3D; &#39;Object&#39;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">isArray (o) &#123; &#x2F;&#x2F;是否数组</span><br><span class="line">    return Object.prototype.toString.call(o).slice(8, -1) &#x3D;&#x3D;&#x3D; &#39;Array&#39;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">isDate (o) &#123; &#x2F;&#x2F;是否时间</span><br><span class="line">    return Object.prototype.toString.call(o).slice(8, -1) &#x3D;&#x3D;&#x3D; &#39;Date&#39;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">isRegExp (o) &#123; &#x2F;&#x2F;是否正则</span><br><span class="line">    return Object.prototype.toString.call(o).slice(8, -1) &#x3D;&#x3D;&#x3D; &#39;RegExp&#39;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">isError (o) &#123; &#x2F;&#x2F;是否错误对象</span><br><span class="line">    return Object.prototype.toString.call(o).slice(8, -1) &#x3D;&#x3D;&#x3D; &#39;Error&#39;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">isSymbol (o) &#123; &#x2F;&#x2F;是否Symbol函数</span><br><span class="line">    return Object.prototype.toString.call(o).slice(8, -1) &#x3D;&#x3D;&#x3D; &#39;Symbol&#39;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">isPromise (o) &#123; &#x2F;&#x2F;是否Promise对象</span><br><span class="line">    return Object.prototype.toString.call(o).slice(8, -1) &#x3D;&#x3D;&#x3D; &#39;Promise&#39;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">isSet (o) &#123; &#x2F;&#x2F;是否Set对象</span><br><span class="line">    return Object.prototype.toString.call(o).slice(8, -1) &#x3D;&#x3D;&#x3D; &#39;Set&#39;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">isFalse (o) &#123;</span><br><span class="line">    if (!o || o &#x3D;&#x3D;&#x3D; &#39;null&#39; || o &#x3D;&#x3D;&#x3D; &#39;undefined&#39; || o &#x3D;&#x3D;&#x3D; &#39;false&#39; || o &#x3D;&#x3D;&#x3D; &#39;NaN&#39;) return true</span><br><span class="line">        return false</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">isTrue (o) &#123;</span><br><span class="line">    return !this.isFalse(o)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">isIos () &#123;</span><br><span class="line">    var u &#x3D; navigator.userAgent;</span><br><span class="line">    if (u.indexOf(&#39;Android&#39;) &gt; -1 || u.indexOf(&#39;Linux&#39;) &gt; -1) &#123;&#x2F;&#x2F;安卓手机</span><br><span class="line">        &#x2F;&#x2F; return &quot;Android&quot;;</span><br><span class="line">        return false</span><br><span class="line">    &#125; else if (u.indexOf(&#39;iPhone&#39;) &gt; -1) &#123;&#x2F;&#x2F;苹果手机</span><br><span class="line">        &#x2F;&#x2F; return &quot;iPhone&quot;;</span><br><span class="line">        return true</span><br><span class="line">    &#125; else if (u.indexOf(&#39;iPad&#39;) &gt; -1) &#123;&#x2F;&#x2F;iPad</span><br><span class="line">        &#x2F;&#x2F; return &quot;iPad&quot;;</span><br><span class="line">        return false</span><br><span class="line">    &#125; else if (u.indexOf(&#39;Windows Phone&#39;) &gt; -1) &#123;&#x2F;&#x2F;winphone手机</span><br><span class="line">        &#x2F;&#x2F; return &quot;Windows Phone&quot;;</span><br><span class="line">        return false</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        return false</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">isPC () &#123; &#x2F;&#x2F;是否为PC端</span><br><span class="line">    var userAgentInfo &#x3D; navigator.userAgent;</span><br><span class="line">    var Agents &#x3D; [&quot;Android&quot;, &quot;iPhone&quot;,</span><br><span class="line">                &quot;SymbianOS&quot;, &quot;Windows Phone&quot;,</span><br><span class="line">                &quot;iPad&quot;, &quot;iPod&quot;];</span><br><span class="line">    var flag &#x3D; true;</span><br><span class="line">    for (var v &#x3D; 0; v &lt; Agents.length; v++) &#123;</span><br><span class="line">        if (userAgentInfo.indexOf(Agents[v]) &gt; 0) &#123;</span><br><span class="line">            flag &#x3D; false;</span><br><span class="line">            break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return flag;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">browserType()&#123;</span><br><span class="line">    var userAgent &#x3D; navigator.userAgent; &#x2F;&#x2F;取得浏览器的userAgent字符串</span><br><span class="line">    var isOpera &#x3D; userAgent.indexOf(&quot;Opera&quot;) &gt; -1; &#x2F;&#x2F;判断是否Opera浏览器</span><br><span class="line">    var isIE &#x3D; userAgent.indexOf(&quot;compatible&quot;) &gt; -1 &amp;&amp; userAgent.indexOf(&quot;MSIE&quot;) &gt; -1 &amp;&amp; !isOpera; &#x2F;&#x2F;判断是否IE浏览器</span><br><span class="line">    var isIE11 &#x3D; userAgent.indexOf(&#39;Trident&#39;) &gt; -1 &amp;&amp; userAgent.indexOf(&quot;rv:11.0&quot;) &gt; -1;</span><br><span class="line">    var isEdge &#x3D; userAgent.indexOf(&quot;Edge&quot;) &gt; -1 &amp;&amp; !isIE; &#x2F;&#x2F;判断是否IE的Edge浏览器  </span><br><span class="line">    var isFF &#x3D; userAgent.indexOf(&quot;Firefox&quot;) &gt; -1; &#x2F;&#x2F;判断是否Firefox浏览器</span><br><span class="line">    var isSafari &#x3D; userAgent.indexOf(&quot;Safari&quot;) &gt; -1 &amp;&amp; userAgent.indexOf(&quot;Chrome&quot;) &#x3D;&#x3D; -1; &#x2F;&#x2F;判断是否Safari浏览器</span><br><span class="line">    var isChrome &#x3D; userAgent.indexOf(&quot;Chrome&quot;) &gt; -1 &amp;&amp; userAgent.indexOf(&quot;Safari&quot;) &gt; -1; &#x2F;&#x2F;判断Chrome浏览器</span><br><span class="line"></span><br><span class="line">    if (isIE) &#123;</span><br><span class="line">        var reIE &#x3D; new RegExp(&quot;MSIE (\\d+\\.\\d+);&quot;);</span><br><span class="line">        reIE.test(userAgent);</span><br><span class="line">        var fIEVersion &#x3D; parseFloat(RegExp[&quot;$1&quot;]);</span><br><span class="line">        if(fIEVersion &#x3D;&#x3D; 7) return &quot;IE7&quot;</span><br><span class="line">        else if(fIEVersion &#x3D;&#x3D; 8) return &quot;IE8&quot;;</span><br><span class="line">        else if(fIEVersion &#x3D;&#x3D; 9) return &quot;IE9&quot;;</span><br><span class="line">        else if(fIEVersion &#x3D;&#x3D; 10) return &quot;IE10&quot;;</span><br><span class="line">        else return &quot;IE7以下&quot;&#x2F;&#x2F;IE版本过低</span><br><span class="line">    &#125;</span><br><span class="line">    if (isIE11) return &#39;IE11&#39;;</span><br><span class="line">    if (isEdge) return &quot;Edge&quot;;</span><br><span class="line">    if (isFF) return &quot;FF&quot;;</span><br><span class="line">    if (isOpera) return &quot;Opera&quot;;</span><br><span class="line">    if (isSafari) return &quot;Safari&quot;;</span><br><span class="line">    if (isChrome) return &quot;Chrome&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">checkStr (str, type) &#123;</span><br><span class="line">    switch (type) &#123;</span><br><span class="line">        case &#39;phone&#39;:   &#x2F;&#x2F;手机号码</span><br><span class="line">            return &#x2F;^1[3|4|5|6|7|8|9][0-9]&#123;9&#125;$&#x2F;.test(str);</span><br><span class="line">        case &#39;tel&#39;:     &#x2F;&#x2F;座机</span><br><span class="line">            return &#x2F;^(0\d&#123;2,3&#125;-\d&#123;7,8&#125;)(-\d&#123;1,4&#125;)?$&#x2F;.test(str);</span><br><span class="line">        case &#39;card&#39;:    &#x2F;&#x2F;身份证</span><br><span class="line">            return &#x2F;(^\d&#123;15&#125;$)|(^\d&#123;18&#125;$)|(^\d&#123;17&#125;(\d|X|x)$)&#x2F;.test(str);</span><br><span class="line">        case &#39;pwd&#39;:     &#x2F;&#x2F;密码以字母开头，长度在6~18之间，只能包含字母、数字和下划线</span><br><span class="line">            return &#x2F;^[a-zA-Z]\w&#123;5,17&#125;$&#x2F;.test(str)</span><br><span class="line">        case &#39;postal&#39;:  &#x2F;&#x2F;邮政编码</span><br><span class="line">            return &#x2F;[1-9]\d&#123;5&#125;(?!\d)&#x2F;.test(str);</span><br><span class="line">        case &#39;QQ&#39;:      &#x2F;&#x2F;QQ号</span><br><span class="line">            return &#x2F;^[1-9][0-9]&#123;4,9&#125;$&#x2F;.test(str);</span><br><span class="line">        case &#39;email&#39;:   &#x2F;&#x2F;邮箱</span><br><span class="line">            return &#x2F;^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$&#x2F;.test(str);</span><br><span class="line">        case &#39;money&#39;:   &#x2F;&#x2F;金额(小数点2位)</span><br><span class="line">            return &#x2F;^\d*(?:\.\d&#123;0,2&#125;)?$&#x2F;.test(str);</span><br><span class="line">        case &#39;URL&#39;:     &#x2F;&#x2F;网址</span><br><span class="line">            return &#x2F;(http|ftp|https):\&#x2F;\&#x2F;[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^&#x3D;%&amp;:&#x2F;~\+#]*[\w\-\@?^&#x3D;%&amp;&#x2F;~\+#])?&#x2F;.test(str)</span><br><span class="line">        case &#39;IP&#39;:      &#x2F;&#x2F;IP</span><br><span class="line">            return &#x2F;((?:(?:25[0-5]|2[0-4]\\d|[01]?\\d?\\d)\\.)&#123;3&#125;(?:25[0-5]|2[0-4]\\d|[01]?\\d?\\d))&#x2F;.test(str);</span><br><span class="line">        case &#39;date&#39;:    &#x2F;&#x2F;日期时间</span><br><span class="line">            return &#x2F;^(\d&#123;4&#125;)\-(\d&#123;2&#125;)\-(\d&#123;2&#125;) (\d&#123;2&#125;)(?:\:\d&#123;2&#125;|:(\d&#123;2&#125;):(\d&#123;2&#125;))$&#x2F;.test(str) || &#x2F;^(\d&#123;4&#125;)\-(\d&#123;2&#125;)\-(\d&#123;2&#125;)$&#x2F;.test(str)</span><br><span class="line">        case &#39;number&#39;:  &#x2F;&#x2F;数字</span><br><span class="line">            return &#x2F;^[0-9]$&#x2F;.test(str);</span><br><span class="line">        case &#39;english&#39;: &#x2F;&#x2F;英文</span><br><span class="line">            return &#x2F;^[a-zA-Z]+$&#x2F;.test(str);</span><br><span class="line">        case &#39;chinese&#39;: &#x2F;&#x2F;中文</span><br><span class="line">            return &#x2F;^[\u4E00-\u9FA5]+$&#x2F;.test(str);</span><br><span class="line">        case &#39;lower&#39;:   &#x2F;&#x2F;小写</span><br><span class="line">            return &#x2F;^[a-z]+$&#x2F;.test(str);</span><br><span class="line">        case &#39;upper&#39;:   &#x2F;&#x2F;大写</span><br><span class="line">            return &#x2F;^[A-Z]+$&#x2F;.test(str);</span><br><span class="line">        case &#39;HTML&#39;:    &#x2F;&#x2F;HTML标记</span><br><span class="line">            return &#x2F;&lt;(&quot;[^&quot;]*&quot;|&#39;[^&#39;]*&#39;|[^&#39;&quot;&gt;])*&gt;&#x2F;.test(str);</span><br><span class="line">        default:</span><br><span class="line">            return true;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 严格的身份证校验</span><br><span class="line">    isCardID(sId) &#123;</span><br><span class="line">        if (!&#x2F;(^\d&#123;15&#125;$)|(^\d&#123;17&#125;(\d|X|x)$)&#x2F;.test(sId)) &#123;</span><br><span class="line">            alert(&#39;你输入的身份证长度或格式错误&#39;)</span><br><span class="line">            return false</span><br><span class="line">        &#125;</span><br><span class="line">        &#x2F;&#x2F;身份证城市</span><br><span class="line">        var aCity&#x3D;&#123;11:&quot;北京&quot;,12:&quot;天津&quot;,13:&quot;河北&quot;,14:&quot;山西&quot;,15:&quot;内蒙古&quot;,21:&quot;辽宁&quot;,22:&quot;吉林&quot;,23:&quot;黑龙江&quot;,31:&quot;上海&quot;,32:&quot;江苏&quot;,33:&quot;浙江&quot;,34:&quot;安徽&quot;,35:&quot;福建&quot;,36:&quot;江西&quot;,37:&quot;山东&quot;,41:&quot;河南&quot;,42:&quot;湖北&quot;,43:&quot;湖南&quot;,44:&quot;广东&quot;,45:&quot;广西&quot;,46:&quot;海南&quot;,50:&quot;重庆&quot;,51:&quot;四川&quot;,52:&quot;贵州&quot;,53:&quot;云南&quot;,54:&quot;西藏&quot;,61:&quot;陕西&quot;,62:&quot;甘肃&quot;,63:&quot;青海&quot;,64:&quot;宁夏&quot;,65:&quot;新疆&quot;,71:&quot;台湾&quot;,81:&quot;香港&quot;,82:&quot;澳门&quot;,91:&quot;国外&quot;&#125;;</span><br><span class="line">        if(!aCity[parseInt(sId.substr(0,2))]) &#123; </span><br><span class="line">            alert(&#39;你的身份证地区非法&#39;)</span><br><span class="line">            return false</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 出生日期验证</span><br><span class="line">        var sBirthday&#x3D;(sId.substr(6,4)+&quot;-&quot;+Number(sId.substr(10,2))+&quot;-&quot;+Number(sId.substr(12,2))).replace(&#x2F;-&#x2F;g,&quot;&#x2F;&quot;),</span><br><span class="line">            d &#x3D; new Date(sBirthday)</span><br><span class="line">        if(sBirthday !&#x3D; (d.getFullYear()+&quot;&#x2F;&quot;+ (d.getMonth()+1) + &quot;&#x2F;&quot; + d.getDate())) &#123;</span><br><span class="line">            alert(&#39;身份证上的出生日期非法&#39;)</span><br><span class="line">            return false</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 身份证号码校验</span><br><span class="line">        var sum &#x3D; 0,</span><br><span class="line">            weights &#x3D;  [7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2],</span><br><span class="line">            codes &#x3D; &quot;10X98765432&quot;</span><br><span class="line">        for (var i &#x3D; 0; i &lt; sId.length - 1; i++) &#123;</span><br><span class="line">            sum +&#x3D; sId[i] * weights[i];</span><br><span class="line">        &#125;</span><br><span class="line">        var last &#x3D; codes[sum % 11]; &#x2F;&#x2F;计算出来的最后一位身份证号码</span><br><span class="line">        if (sId[sId.length-1] !&#x3D; last) &#123; </span><br><span class="line">            alert(&#39;你输入的身份证号非法&#39;)</span><br><span class="line">            return false</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return true</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>






      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/JavaScript%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E6%96%B9%E6%B3%95-%EF%BC%882%EF%BC%89Date/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nirvana/images/headphoto.jpeg">
      <meta itemprop="name" content="nirvana">
      <meta itemprop="description" content="个人学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="涅槃快乐是金">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/JavaScript%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E6%96%B9%E6%B3%95-%EF%BC%882%EF%BC%89Date/" class="post-title-link" itemprop="url">JavaScript常用工具方法（2）Date</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-11 21:12:40" itemprop="dateCreated datePublished" datetime="2021-03-11T21:12:40+08:00">2021-03-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-03-10 22:08:34" itemprop="dateModified" datetime="2021-03-10T22:08:34+08:00">2021-03-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/nirvana/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>7k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>6 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="2-Date"><a href="#2-Date" class="headerlink" title="2. Date"></a>2. Date</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * 格式化时间</span><br><span class="line"> * </span><br><span class="line"> * @param  &#123;time&#125; 时间</span><br><span class="line"> * @param  &#123;cFormat&#125; 格式</span><br><span class="line"> * @return &#123;String&#125; 字符串</span><br><span class="line"> *</span><br><span class="line"> * @example formatTime(&#39;2018-1-29&#39;, &#39;&#123;y&#125;&#x2F;&#123;m&#125;&#x2F;&#123;d&#125; &#123;h&#125;:&#123;i&#125;:&#123;s&#125;&#39;) &#x2F;&#x2F; -&gt; 2018&#x2F;01&#x2F;29 00:00:00</span><br><span class="line"> *&#x2F;</span><br><span class="line">formatTime(time, cFormat) &#123;</span><br><span class="line">    if (arguments.length &#x3D;&#x3D;&#x3D; 0) return null</span><br><span class="line">    if ((time + &#39;&#39;).length &#x3D;&#x3D;&#x3D; 10) &#123;</span><br><span class="line">        time &#x3D; +time * 1000</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    var format &#x3D; cFormat || &#39;&#123;y&#125;-&#123;m&#125;-&#123;d&#125; &#123;h&#125;:&#123;i&#125;:&#123;s&#125;&#39;, date</span><br><span class="line">    if (typeof time &#x3D;&#x3D;&#x3D; &#39;object&#39;) &#123;</span><br><span class="line">        date &#x3D; time</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        date &#x3D; new Date(time)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    var formatObj &#x3D; &#123;</span><br><span class="line">        y: date.getFullYear(),</span><br><span class="line">        m: date.getMonth() + 1,</span><br><span class="line">        d: date.getDate(),</span><br><span class="line">        h: date.getHours(),</span><br><span class="line">        i: date.getMinutes(),</span><br><span class="line">        s: date.getSeconds(),</span><br><span class="line">        a: date.getDay()</span><br><span class="line">    &#125;</span><br><span class="line">    var time_str &#x3D; format.replace(&#x2F;&#123;(y|m|d|h|i|s|a)+&#125;&#x2F;g, (result, key) &#x3D;&gt; &#123;</span><br><span class="line">        var value &#x3D; formatObj[key]</span><br><span class="line">        if (key &#x3D;&#x3D;&#x3D; &#39;a&#39;) return [&#39;一&#39;, &#39;二&#39;, &#39;三&#39;, &#39;四&#39;, &#39;五&#39;, &#39;六&#39;, &#39;日&#39;][value - 1]</span><br><span class="line">        if (result.length &gt; 0 &amp;&amp; value &lt; 10) &#123;</span><br><span class="line">            value &#x3D; &#39;0&#39; + value</span><br><span class="line">        &#125;</span><br><span class="line">        return value || 0</span><br><span class="line">    &#125;)</span><br><span class="line">    return time_str</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 返回指定长度的月份集合</span><br><span class="line"> * </span><br><span class="line"> * @param  &#123;time&#125; 时间</span><br><span class="line"> * @param  &#123;len&#125; 长度</span><br><span class="line"> * @param  &#123;direction&#125; 方向：  1: 前几个月;  2: 后几个月;  3:前后几个月  默认 3</span><br><span class="line"> * @return &#123;Array&#125; 数组</span><br><span class="line"> * </span><br><span class="line"> * @example   getMonths(&#39;2018-1-29&#39;, 6, 1)  &#x2F;&#x2F; -&gt;  [&quot;2018-1&quot;, &quot;2017-12&quot;, &quot;2017-11&quot;, &quot;2017-10&quot;, &quot;2017-9&quot;, &quot;2017-8&quot;, &quot;2017-7&quot;]</span><br><span class="line"> *&#x2F;</span><br><span class="line">getMonths(time, len, direction) &#123;</span><br><span class="line">    var mm &#x3D; new Date(time).getMonth(),</span><br><span class="line">        yy &#x3D; new Date(time).getFullYear(),</span><br><span class="line">        direction &#x3D; isNaN(direction) ? 3 : direction,</span><br><span class="line">        index &#x3D; mm;</span><br><span class="line">    var cutMonth &#x3D; function(index) &#123;</span><br><span class="line">        if ( index &lt;&#x3D; len &amp;&amp; index &gt;&#x3D; -len) &#123;</span><br><span class="line">            return direction &#x3D;&#x3D;&#x3D; 1 ? formatPre(index).concat(cutMonth(++index)):</span><br><span class="line">                direction &#x3D;&#x3D;&#x3D; 2 ? formatNext(index).concat(cutMonth(++index)):formatCurr(index).concat(cutMonth(++index))</span><br><span class="line">        &#125;</span><br><span class="line">        return []</span><br><span class="line">    &#125;</span><br><span class="line">    var formatNext &#x3D; function(i) &#123;</span><br><span class="line">        var y &#x3D; Math.floor(i&#x2F;12),</span><br><span class="line">            m &#x3D; i%12</span><br><span class="line">        return [yy+y + &#39;-&#39; + (m+1)]</span><br><span class="line">    &#125;</span><br><span class="line">    var formatPre &#x3D; function(i) &#123;</span><br><span class="line">        var y &#x3D; Math.ceil(i&#x2F;12),</span><br><span class="line">            m &#x3D; i%12</span><br><span class="line">        m &#x3D; m&#x3D;&#x3D;&#x3D;0 ? 12 : m</span><br><span class="line">        return [yy-y + &#39;-&#39; + (13 - m)]</span><br><span class="line">    &#125;</span><br><span class="line">    var formatCurr &#x3D; function(i) &#123;</span><br><span class="line">        var y &#x3D; Math.floor(i&#x2F;12),</span><br><span class="line">            yNext &#x3D; Math.ceil(i&#x2F;12),</span><br><span class="line">            m &#x3D; i%12,</span><br><span class="line">            mNext &#x3D; m&#x3D;&#x3D;&#x3D;0 ? 12 : m</span><br><span class="line">        return [yy-yNext + &#39;-&#39; + (13 - mNext),yy+y + &#39;-&#39; + (m+1)]</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F; 数组去重</span><br><span class="line">    var unique &#x3D; function(arr) &#123;</span><br><span class="line">        if ( Array.hasOwnProperty(&#39;from&#39;) ) &#123;</span><br><span class="line">            return Array.from(new Set(arr));</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            var n &#x3D; &#123;&#125;,r&#x3D;[]; </span><br><span class="line">            for(var i &#x3D; 0; i &lt; arr.length; i++)&#123;</span><br><span class="line">                if (!n[arr[i]])&#123;</span><br><span class="line">                    n[arr[i]] &#x3D; true; </span><br><span class="line">                    r.push(arr[i]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            return r;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return direction !&#x3D;&#x3D; 3 ? cutMonth(index) : unique(cutMonth(index).sort(function(t1, t2)&#123;</span><br><span class="line">        return new Date(t1).getTime() - new Date(t2).getTime()</span><br><span class="line">    &#125;))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 返回指定长度的天数集合</span><br><span class="line"> * </span><br><span class="line"> * @param  &#123;time&#125; 时间</span><br><span class="line"> * @param  &#123;len&#125; 长度</span><br><span class="line"> * @param  &#123;direction&#125; 方向： 1: 前几天;  2: 后几天;  3:前后几天  默认 3</span><br><span class="line"> * @return &#123;Array&#125; 数组</span><br><span class="line"> *</span><br><span class="line"> * @example date.getDays(&#39;2018-1-29&#39;, 6) &#x2F;&#x2F; -&gt; [&quot;2018-1-26&quot;, &quot;2018-1-27&quot;, &quot;2018-1-28&quot;, &quot;2018-1-29&quot;, &quot;2018-1-30&quot;, &quot;2018-1-31&quot;, &quot;2018-2-1&quot;]</span><br><span class="line"> *&#x2F;</span><br><span class="line">getDays(time, len, diretion) &#123;</span><br><span class="line">    var tt &#x3D; new Date(time)</span><br><span class="line">    var getDay &#x3D; function(day) &#123;</span><br><span class="line">        var t &#x3D; new Date(time)</span><br><span class="line">        t.setDate(t.getDate() + day)</span><br><span class="line">        var m &#x3D; t.getMonth()+1</span><br><span class="line">        return t.getFullYear()+&#39;-&#39;+m+&#39;-&#39;+t.getDate()</span><br><span class="line">    &#125;</span><br><span class="line">    var arr &#x3D; []</span><br><span class="line">    if (diretion &#x3D;&#x3D;&#x3D; 1) &#123;</span><br><span class="line">        for (var i &#x3D; 1; i &lt;&#x3D; len; i++) &#123;</span><br><span class="line">            arr.unshift(getDay(-i))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;else if(diretion &#x3D;&#x3D;&#x3D; 2) &#123;</span><br><span class="line">        for (var i &#x3D; 1; i &lt;&#x3D; len; i++) &#123;</span><br><span class="line">            arr.push(getDay(i))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;else &#123;</span><br><span class="line">        for (var i &#x3D; 1; i &lt;&#x3D; len; i++) &#123;</span><br><span class="line">            arr.unshift(getDay(-i))</span><br><span class="line">        &#125;</span><br><span class="line">        arr.push(tt.getFullYear()+&#39;-&#39;+(tt.getMonth()+1)+&#39;-&#39;+tt.getDate())</span><br><span class="line">        for (var i &#x3D; 1; i &lt;&#x3D; len; i++) &#123;</span><br><span class="line">            arr.push(getDay(i))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return diretion &#x3D;&#x3D;&#x3D; 1 ? arr.concat([tt.getFullYear()+&#39;-&#39;+(tt.getMonth()+1)+&#39;-&#39;+tt.getDate()]) : </span><br><span class="line">        diretion &#x3D;&#x3D;&#x3D; 2 ? [tt.getFullYear()+&#39;-&#39;+(tt.getMonth()+1)+&#39;-&#39;+tt.getDate()].concat(arr) : arr</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * @param  &#123;s&#125; 秒数</span><br><span class="line"> * @return &#123;String&#125; 字符串 </span><br><span class="line"> *</span><br><span class="line"> * @example formatHMS(3610) &#x2F;&#x2F; -&gt; 1h0m10s</span><br><span class="line"> *&#x2F;</span><br><span class="line">formatHMS (s) &#123;</span><br><span class="line">    var str &#x3D; &#39;&#39;</span><br><span class="line">    if (s &gt; 3600) &#123;</span><br><span class="line">        str &#x3D; Math.floor(s&#x2F;3600)+&#39;h&#39;+Math.floor(s%3600&#x2F;60)+&#39;m&#39;+s%60+&#39;s&#39;</span><br><span class="line">    &#125;else if(s &gt; 60) &#123;</span><br><span class="line">        str &#x3D; Math.floor(s&#x2F;60)+&#39;m&#39;+s%60+&#39;s&#39;</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        str &#x3D; s%60+&#39;s&#39;</span><br><span class="line">    &#125;</span><br><span class="line">    return str</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;*获取某月有多少天*&#x2F;</span><br><span class="line">getMonthOfDay (time) &#123;</span><br><span class="line">    var date &#x3D; new Date(time)</span><br><span class="line">    var year &#x3D; date.getFullYear()</span><br><span class="line">    var mouth &#x3D; date.getMonth() + 1</span><br><span class="line">    var days</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;当月份为二月时，根据闰年还是非闰年判断天数</span><br><span class="line">    if (mouth &#x3D;&#x3D; 2) &#123;</span><br><span class="line">        days &#x3D; (year%4&#x3D;&#x3D;0 &amp;&amp; year%100&#x3D;&#x3D;0 &amp;&amp; year%400&#x3D;&#x3D;0) || (year%4&#x3D;&#x3D;0 &amp;&amp; year%100!&#x3D;0) ? 28 : 29</span><br><span class="line">    &#125; else if (mouth &#x3D;&#x3D; 1 || mouth &#x3D;&#x3D; 3 || mouth &#x3D;&#x3D; 5 || mouth &#x3D;&#x3D; 7 || mouth &#x3D;&#x3D; 8 || mouth &#x3D;&#x3D; 10 || mouth &#x3D;&#x3D; 12) &#123;</span><br><span class="line">        &#x2F;&#x2F;月份为：1,3,5,7,8,10,12 时，为大月.则天数为31；</span><br><span class="line">        days &#x3D; 31</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        &#x2F;&#x2F;其他月份，天数为：30.</span><br><span class="line">        days &#x3D; 30</span><br><span class="line">    &#125;</span><br><span class="line">    return days</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;*获取某年有多少天*&#x2F;</span><br><span class="line">getYearOfDay (time) &#123;</span><br><span class="line">    var firstDayYear &#x3D; this.getFirstDayOfYear(time);</span><br><span class="line">    var lastDayYear &#x3D; this.getLastDayOfYear(time);</span><br><span class="line">    var numSecond &#x3D; (new Date(lastDayYear).getTime() - new Date(firstDayYear).getTime())&#x2F;1000;</span><br><span class="line">    return Math.ceil(numSecond&#x2F;(24*3600));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;*获取某年的第一天*&#x2F;</span><br><span class="line">getFirstDayOfYear (time) &#123;</span><br><span class="line">    var year &#x3D; new Date(time).getFullYear();</span><br><span class="line">    return year + &quot;-01-01 00:00:00&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;*获取某年最后一天*&#x2F;</span><br><span class="line">getLastDayOfYear (time) &#123;</span><br><span class="line">    var year &#x3D; new Date(time).getFullYear();</span><br><span class="line">    var dateString &#x3D; year + &quot;-12-01 00:00:00&quot;;</span><br><span class="line">    var endDay &#x3D; this.getMonthOfDay(dateString);</span><br><span class="line">    return year + &quot;-12-&quot; + endDay + &quot; 23:59:59&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;*获取某个日期是当年中的第几天*&#x2F;</span><br><span class="line">getDayOfYear (time) &#123;</span><br><span class="line">    var firstDayYear &#x3D; this.getFirstDayOfYear(time);</span><br><span class="line">    var numSecond &#x3D; (new Date(time).getTime() - new Date(firstDayYear).getTime())&#x2F;1000;</span><br><span class="line">    return Math.ceil(numSecond&#x2F;(24*3600));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;*获取某个日期在这一年的第几周*&#x2F;</span><br><span class="line">getDayOfYearWeek (time) &#123;</span><br><span class="line">    var numdays &#x3D; this.getDayOfYear(time);</span><br><span class="line">    return Math.ceil(numdays &#x2F; 7);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/JavaScript%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E6%96%B9%E6%B3%95-%EF%BC%883%EF%BC%89Array/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nirvana/images/headphoto.jpeg">
      <meta itemprop="name" content="nirvana">
      <meta itemprop="description" content="个人学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="涅槃快乐是金">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/JavaScript%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E6%96%B9%E6%B3%95-%EF%BC%883%EF%BC%89Array/" class="post-title-link" itemprop="url">JavaScript常用工具方法（3）Array</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-11 21:12:40" itemprop="dateCreated datePublished" datetime="2021-03-11T21:12:40+08:00">2021-03-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-03-10 22:08:38" itemprop="dateModified" datetime="2021-03-10T22:08:38+08:00">2021-03-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/nirvana/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>3.1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>3 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>##3. Array</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;*判断一个元素是否在数组中*&#x2F;</span><br><span class="line">contains (arr, val) &#123;</span><br><span class="line">    return arr.indexOf(val) !&#x3D; -1 ? true : false;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * @param  &#123;arr&#125; 数组</span><br><span class="line"> * @param  &#123;fn&#125; 回调函数</span><br><span class="line"> * @return &#123;undefined&#125;</span><br><span class="line"> *&#x2F;</span><br><span class="line">each (arr, fn) &#123;</span><br><span class="line">    fn &#x3D; fn || Function;</span><br><span class="line">    var a &#x3D; [];</span><br><span class="line">    var args &#x3D; Array.prototype.slice.call(arguments, 1);</span><br><span class="line">    for(var i &#x3D; 0; i &lt; arr.length; i++) &#123;</span><br><span class="line">        var res &#x3D; fn.apply(arr, [arr[i], i].concat(args));</span><br><span class="line">        if(res !&#x3D; null) a.push(res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * @param  &#123;arr&#125; 数组</span><br><span class="line"> * @param  &#123;fn&#125; 回调函数</span><br><span class="line"> * @param  &#123;thisObj&#125; this指向</span><br><span class="line"> * @return &#123;Array&#125; </span><br><span class="line"> *&#x2F;</span><br><span class="line">map (arr, fn, thisObj) &#123;</span><br><span class="line">    var scope &#x3D; thisObj || window;</span><br><span class="line">    var a &#x3D; [];</span><br><span class="line">    for(var i &#x3D; 0, j &#x3D; arr.length; i &lt; j; ++i) &#123;</span><br><span class="line">        var res &#x3D; fn.call(scope, arr[i], i, this);</span><br><span class="line">        if(res !&#x3D; null) a.push(res);</span><br><span class="line">    &#125;</span><br><span class="line">    return a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * @param  &#123;arr&#125; 数组</span><br><span class="line"> * @param  &#123;type&#125; 1：从小到大   2：从大到小   3：随机</span><br><span class="line"> * @return &#123;Array&#125;</span><br><span class="line"> *&#x2F;</span><br><span class="line">sort (arr, type &#x3D; 1) &#123;</span><br><span class="line">    return arr.sort( (a, b) &#x3D;&gt; &#123;</span><br><span class="line">        switch(type) &#123;</span><br><span class="line">            case 1:</span><br><span class="line">                return a - b;</span><br><span class="line">            case 2:</span><br><span class="line">                return b - a;</span><br><span class="line">            case 3:</span><br><span class="line">                return Math.random() - 0.5;</span><br><span class="line">            default:</span><br><span class="line">                return arr;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;*去重*&#x2F;</span><br><span class="line">unique (arr) &#123;</span><br><span class="line">    if ( Array.hasOwnProperty(&#39;from&#39;) ) &#123;</span><br><span class="line">        return Array.from(new Set(arr));</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        var n &#x3D; &#123;&#125;,r&#x3D;[]; </span><br><span class="line">        for(var i &#x3D; 0; i &lt; arr.length; i++)&#123;</span><br><span class="line">            if (!n[arr[i]])&#123;</span><br><span class="line">                n[arr[i]] &#x3D; true; </span><br><span class="line">                r.push(arr[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return r;</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F; 注：上面 else 里面的排重并不能区分 2 和 &#39;2&#39;，但能减少用indexOf带来的性能,暂时没找到替代的方法。。。</span><br><span class="line">    &#x2F;* 正确排重</span><br><span class="line">    if ( Array.hasOwnProperty(&#39;from&#39;) ) &#123;</span><br><span class="line">        return Array.from(new Set(arr))</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        var r &#x3D; [], NaNBol &#x3D; true</span><br><span class="line">        for(var i&#x3D;0; i &lt; arr.length; i++) &#123;</span><br><span class="line">            if (arr[i] !&#x3D;&#x3D; arr[i]) &#123;</span><br><span class="line">                if (NaNBol &amp;&amp; r.indexOf(arr[i]) &#x3D;&#x3D;&#x3D; -1) &#123;</span><br><span class="line">                    r.push(arr[i])</span><br><span class="line">                    NaNBol &#x3D; false</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                if(r.indexOf(arr[i]) &#x3D;&#x3D;&#x3D; -1) r.push(arr[i])</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return r</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">     *&#x2F;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;*求两个集合的并集*&#x2F;</span><br><span class="line">union (a, b) &#123;</span><br><span class="line">    var newArr &#x3D; a.concat(b);</span><br><span class="line">    return this.unique(newArr);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;*求两个集合的交集*&#x2F;</span><br><span class="line">intersect (a, b) &#123;</span><br><span class="line">    var _this &#x3D; this;</span><br><span class="line">    a &#x3D; this.unique(a);</span><br><span class="line">    return this.map(a, function(o) &#123;</span><br><span class="line">        return _this.contains(b, o) ? o : null;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;*删除其中一个元素*&#x2F;</span><br><span class="line">remove (arr, ele) &#123;</span><br><span class="line">    var index &#x3D; arr.indexOf(ele);</span><br><span class="line">    if(index &gt; -1) &#123;</span><br><span class="line">        arr.splice(index, 1);</span><br><span class="line">    &#125;</span><br><span class="line">    return arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;*将类数组转换为数组的方法*&#x2F;</span><br><span class="line">formArray (ary) &#123;</span><br><span class="line">    var arr &#x3D; [];</span><br><span class="line">    if(Array.isArray(ary)) &#123;</span><br><span class="line">        arr &#x3D; ary;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        arr &#x3D; Array.prototype.slice.call(ary);</span><br><span class="line">    &#125;;</span><br><span class="line">    return arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;*最大值*&#x2F;</span><br><span class="line">max (arr) &#123;</span><br><span class="line">    return Math.max.apply(null, arr);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;*最小值*&#x2F;</span><br><span class="line">min (arr) &#123;</span><br><span class="line">    return Math.min.apply(null, arr);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;*求和*&#x2F;</span><br><span class="line">sum (arr) &#123;</span><br><span class="line">    return arr.reduce( (pre, cur) &#x3D;&gt; &#123;</span><br><span class="line">        return pre + cur</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;*平均值*&#x2F;</span><br><span class="line">average (arr) &#123;</span><br><span class="line">    return this.sum(arr)&#x2F;arr.length</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/JavaScript%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E6%96%B9%E6%B3%95-%EF%BC%884%EF%BC%89String-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%93%8D%E4%BD%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nirvana/images/headphoto.jpeg">
      <meta itemprop="name" content="nirvana">
      <meta itemprop="description" content="个人学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="涅槃快乐是金">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/JavaScript%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E6%96%B9%E6%B3%95-%EF%BC%884%EF%BC%89String-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%93%8D%E4%BD%9C/" class="post-title-link" itemprop="url">JavaScript常用工具方法（4）String-字符串操作</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-11 21:12:40" itemprop="dateCreated datePublished" datetime="2021-03-11T21:12:40+08:00">2021-03-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-03-10 22:08:43" itemprop="dateModified" datetime="2021-03-10T22:08:43+08:00">2021-03-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/nirvana/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="4-String-字符串操作"><a href="#4-String-字符串操作" class="headerlink" title="4. String 字符串操作"></a>4. String 字符串操作</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * 去除空格</span><br><span class="line"> * @param  &#123;str&#125;</span><br><span class="line"> * @param  &#123;type&#125; </span><br><span class="line"> *       type:  1-所有空格  2-前后空格  3-前空格 4-后空格</span><br><span class="line"> * @return &#123;String&#125;</span><br><span class="line"> *&#x2F;</span><br><span class="line">trim (str, type) &#123;</span><br><span class="line">    type &#x3D; type || 1</span><br><span class="line">    switch (type) &#123;</span><br><span class="line">        case 1:</span><br><span class="line">            return str.replace(&#x2F;\s+&#x2F;g, &quot;&quot;);</span><br><span class="line">        case 2:</span><br><span class="line">            return str.replace(&#x2F;(^\s*)|(\s*$)&#x2F;g, &quot;&quot;);</span><br><span class="line">        case 3:</span><br><span class="line">            return str.replace(&#x2F;(^\s*)&#x2F;g, &quot;&quot;);</span><br><span class="line">        case 4:</span><br><span class="line">            return str.replace(&#x2F;(\s*$)&#x2F;g, &quot;&quot;);</span><br><span class="line">        default:</span><br><span class="line">            return str;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * @param  &#123;str&#125; </span><br><span class="line"> * @param  &#123;type&#125;</span><br><span class="line"> *       type:  1:首字母大写  2：首页母小写  3：大小写转换  4：全部大写  5：全部小写</span><br><span class="line"> * @return &#123;String&#125;</span><br><span class="line"> *&#x2F;</span><br><span class="line">changeCase (str, type) &#123;</span><br><span class="line">    type &#x3D; type || 4</span><br><span class="line">    switch (type) &#123;</span><br><span class="line">        case 1:</span><br><span class="line">            return str.replace(&#x2F;\b\w+\b&#x2F;g, function (word) &#123;</span><br><span class="line">                return word.substring(0, 1).toUpperCase() + word.substring(1).toLowerCase();</span><br><span class="line"></span><br><span class="line">            &#125;);</span><br><span class="line">        case 2:</span><br><span class="line">            return str.replace(&#x2F;\b\w+\b&#x2F;g, function (word) &#123;</span><br><span class="line">                return word.substring(0, 1).toLowerCase() + word.substring(1).toUpperCase();</span><br><span class="line">            &#125;);</span><br><span class="line">        case 3:</span><br><span class="line">            return str.split(&#39;&#39;).map( function(word)&#123;</span><br><span class="line">                if (&#x2F;[a-z]&#x2F;.test(word)) &#123;</span><br><span class="line">                    return word.toUpperCase();</span><br><span class="line">                &#125;else&#123;</span><br><span class="line">                    return word.toLowerCase()</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;).join(&#39;&#39;)</span><br><span class="line">        case 4:</span><br><span class="line">            return str.toUpperCase();</span><br><span class="line">        case 5:</span><br><span class="line">            return str.toLowerCase();</span><br><span class="line">        default:</span><br><span class="line">            return str;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;*</span><br><span class="line">    检测密码强度</span><br><span class="line">*&#x2F;</span><br><span class="line">checkPwd (str) &#123;</span><br><span class="line">    var Lv &#x3D; 0;</span><br><span class="line">    if (str.length &lt; 6) &#123;</span><br><span class="line">        return Lv</span><br><span class="line">    &#125;</span><br><span class="line">    if (&#x2F;[0-9]&#x2F;.test(str)) &#123;</span><br><span class="line">        Lv++</span><br><span class="line">    &#125;</span><br><span class="line">    if (&#x2F;[a-z]&#x2F;.test(str)) &#123;</span><br><span class="line">        Lv++</span><br><span class="line">    &#125;</span><br><span class="line">    if (&#x2F;[A-Z]&#x2F;.test(str)) &#123;</span><br><span class="line">        Lv++</span><br><span class="line">    &#125;</span><br><span class="line">    if (&#x2F;[\.|-|_]&#x2F;.test(str)) &#123;</span><br><span class="line">        Lv++</span><br><span class="line">    &#125;</span><br><span class="line">    return Lv;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;*过滤html代码(把&lt;&gt;转换)*&#x2F;</span><br><span class="line">filterTag (str) &#123;</span><br><span class="line">    str &#x3D; str.replace(&#x2F;&amp;&#x2F;ig, &quot;&amp;&quot;);</span><br><span class="line">    str &#x3D; str.replace(&#x2F;&lt;&#x2F;ig, &quot;&lt;&quot;);</span><br><span class="line">    str &#x3D; str.replace(&#x2F;&gt;&#x2F;ig, &quot;&gt;&quot;);</span><br><span class="line">    str &#x3D; str.replace(&quot; &quot;, &quot;&amp;nbsp;&quot;);</span><br><span class="line">    return str;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/JavaScript%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E6%96%B9%E6%B3%95-%EF%BC%887%EF%BC%89-Storage-%E5%82%A8%E5%AD%98%E6%93%8D%E4%BD%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nirvana/images/headphoto.jpeg">
      <meta itemprop="name" content="nirvana">
      <meta itemprop="description" content="个人学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="涅槃快乐是金">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/JavaScript%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E6%96%B9%E6%B3%95-%EF%BC%887%EF%BC%89-Storage-%E5%82%A8%E5%AD%98%E6%93%8D%E4%BD%9C/" class="post-title-link" itemprop="url">JavaScript常用工具方法（7）Storage 储存操作</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-11 21:12:40" itemprop="dateCreated datePublished" datetime="2021-03-11T21:12:40+08:00">2021-03-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-03-10 22:08:57" itemprop="dateModified" datetime="2021-03-10T22:08:57+08:00">2021-03-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/nirvana/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.5k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="7-Storage-储存操作"><a href="#7-Storage-储存操作" class="headerlink" title="7. Storage 储存操作"></a>7. Storage 储存操作</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line">class StorageFn &#123;</span><br><span class="line">    constructor () &#123;</span><br><span class="line">        this.ls &#x3D; window.localStorage;</span><br><span class="line">        this.ss &#x3D; window.sessionStorage;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;*-----------------cookie---------------------*&#x2F;</span><br><span class="line">    &#x2F;*设置cookie*&#x2F;</span><br><span class="line">    setCookie (name, value, day) &#123;</span><br><span class="line">        var setting &#x3D; arguments[0];</span><br><span class="line">        if (Object.prototype.toString.call(setting).slice(8, -1) &#x3D;&#x3D;&#x3D; &#39;Object&#39;)&#123;</span><br><span class="line">            for (var i in setting) &#123;</span><br><span class="line">                var oDate &#x3D; new Date();</span><br><span class="line">                oDate.setDate(oDate.getDate() + day);</span><br><span class="line">                document.cookie &#x3D; i + &#39;&#x3D;&#39; + setting[i] + &#39;;expires&#x3D;&#39; + oDate;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            var oDate &#x3D; new Date();</span><br><span class="line">            oDate.setDate(oDate.getDate() + day);</span><br><span class="line">            document.cookie &#x3D; name + &#39;&#x3D;&#39; + value + &#39;;expires&#x3D;&#39; + oDate;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;*获取cookie*&#x2F;</span><br><span class="line">    getCookie (name) &#123;</span><br><span class="line">        var arr &#x3D; document.cookie.split(&#39;; &#39;);</span><br><span class="line">        for (var i &#x3D; 0; i &lt; arr.length; i++) &#123;</span><br><span class="line">            var arr2 &#x3D; arr[i].split(&#39;&#x3D;&#39;);</span><br><span class="line">            if (arr2[0] &#x3D;&#x3D; name) &#123;</span><br><span class="line">                return arr2[1];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return &#39;&#39;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;*删除cookie*&#x2F;</span><br><span class="line">    removeCookie (name) &#123;</span><br><span class="line">        this.setCookie(name, 1, -1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;*-----------------localStorage---------------------*&#x2F;</span><br><span class="line">    &#x2F;*设置localStorage*&#x2F;</span><br><span class="line">    setLocal(key, val) &#123;</span><br><span class="line">        var setting &#x3D; arguments[0];</span><br><span class="line">        if (Object.prototype.toString.call(setting).slice(8, -1) &#x3D;&#x3D;&#x3D; &#39;Object&#39;)&#123;</span><br><span class="line">            for(var i in setting)&#123;</span><br><span class="line">                this.ls.setItem(i, JSON.stringify(setting[i]))</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            this.ls.setItem(key, JSON.stringify(val))</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;*获取localStorage*&#x2F;</span><br><span class="line">    getLocal(key) &#123;</span><br><span class="line">        if (key) return JSON.parse(this.ls.getItem(key))</span><br><span class="line">        return null;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;*移除localStorage*&#x2F;</span><br><span class="line">    removeLocal(key) &#123;</span><br><span class="line">        this.ls.removeItem(key)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;*移除所有localStorage*&#x2F;</span><br><span class="line">    clearLocal() &#123;</span><br><span class="line">        this.ls.clear()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;*-----------------sessionStorage---------------------*&#x2F;</span><br><span class="line">    &#x2F;*设置sessionStorage*&#x2F;</span><br><span class="line">    setSession(key, val) &#123;</span><br><span class="line">        var setting &#x3D; arguments[0];</span><br><span class="line">        if (Object.prototype.toString.call(setting).slice(8, -1) &#x3D;&#x3D;&#x3D; &#39;Object&#39;)&#123;</span><br><span class="line">            for(var i in setting)&#123;</span><br><span class="line">                this.ss.setItem(i, JSON.stringify(setting[i]))</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            this.ss.setItem(key, JSON.stringify(val))</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;*获取sessionStorage*&#x2F;</span><br><span class="line">    getSession(key) &#123;</span><br><span class="line">        if (key) return JSON.parse(this.ss.getItem(key))</span><br><span class="line">        return null;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;*移除sessionStorage*&#x2F;</span><br><span class="line">    removeSession(key) &#123;</span><br><span class="line">        this.ss.removeItem(key)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;*移除所有sessionStorage*&#x2F;</span><br><span class="line">    clearSession() &#123;</span><br><span class="line">        this.ss.clear()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/JavaScript%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E6%96%B9%E6%B3%95-%EF%BC%888%EF%BC%89Other-%E5%85%B6%E5%AE%83%E6%93%8D%E4%BD%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nirvana/images/headphoto.jpeg">
      <meta itemprop="name" content="nirvana">
      <meta itemprop="description" content="个人学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="涅槃快乐是金">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/JavaScript%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E6%96%B9%E6%B3%95-%EF%BC%888%EF%BC%89Other-%E5%85%B6%E5%AE%83%E6%93%8D%E4%BD%9C/" class="post-title-link" itemprop="url">JavaScript常用工具方法（8）Other 其它操作</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-11 21:12:40" itemprop="dateCreated datePublished" datetime="2021-03-11T21:12:40+08:00">2021-03-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-03-10 22:09:04" itemprop="dateModified" datetime="2021-03-10T22:09:04+08:00">2021-03-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/nirvana/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>3.7k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>3 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="8-Other-其它操作"><a href="#8-Other-其它操作" class="headerlink" title="8. Other 其它操作"></a>8. Other 其它操作</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;*获取网址参数*&#x2F;</span><br><span class="line">getURL(name)&#123;</span><br><span class="line">    var reg &#x3D; new RegExp(&quot;(^|&amp;)&quot;+ name +&quot;&#x3D;([^&amp;]*)(&amp;|$)&quot;);</span><br><span class="line">    var r &#x3D; decodeURI(window.location.search).substr(1).match(reg);</span><br><span class="line">    if(r!&#x3D;null) return  r[2]; return null;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;*获取全部url参数,并转换成json对象*&#x2F;</span><br><span class="line">getUrlAllParams (url) &#123;</span><br><span class="line">    var url &#x3D; url ? url : window.location.href;</span><br><span class="line">    var _pa &#x3D; url.substring(url.indexOf(&#39;?&#39;) + 1),</span><br><span class="line">        _arrS &#x3D; _pa.split(&#39;&amp;&#39;),</span><br><span class="line">        _rs &#x3D; &#123;&#125;;</span><br><span class="line">    for (var i &#x3D; 0, _len &#x3D; _arrS.length; i &lt; _len; i++) &#123;</span><br><span class="line">        var pos &#x3D; _arrS[i].indexOf(&#39;&#x3D;&#39;);</span><br><span class="line">        if (pos &#x3D;&#x3D; -1) &#123;</span><br><span class="line">            continue;</span><br><span class="line">        &#125;</span><br><span class="line">        var name &#x3D; _arrS[i].substring(0, pos),</span><br><span class="line">            value &#x3D; window.decodeURIComponent(_arrS[i].substring(pos + 1));</span><br><span class="line">        _rs[name] &#x3D; value;</span><br><span class="line">    &#125;</span><br><span class="line">    return _rs;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;*删除url指定参数，返回url*&#x2F;</span><br><span class="line">delParamsUrl(url, name)&#123;</span><br><span class="line">    var baseUrl &#x3D; url.split(&#39;?&#39;)[0] + &#39;?&#39;;</span><br><span class="line">    var query &#x3D; url.split(&#39;?&#39;)[1];</span><br><span class="line">    if (query.indexOf(name)&gt;-1) &#123;</span><br><span class="line">        var obj &#x3D; &#123;&#125;</span><br><span class="line">        var arr &#x3D; query.split(&quot;&amp;&quot;);</span><br><span class="line">        for (var i &#x3D; 0; i &lt; arr.length; i++) &#123;</span><br><span class="line">            arr[i] &#x3D; arr[i].split(&quot;&#x3D;&quot;);</span><br><span class="line">            obj[arr[i][0]] &#x3D; arr[i][1];</span><br><span class="line">        &#125;;</span><br><span class="line">        delete obj[name];</span><br><span class="line">        var url &#x3D; baseUrl + JSON.stringify(obj).replace(&#x2F;[\&quot;\&#123;\&#125;]&#x2F;g,&quot;&quot;).replace(&#x2F;\:&#x2F;g,&quot;&#x3D;&quot;).replace(&#x2F;\,&#x2F;g,&quot;&amp;&quot;);</span><br><span class="line">        return url</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        return url;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;*获取十六进制随机颜色*&#x2F;</span><br><span class="line">getRandomColor () &#123;</span><br><span class="line">    return &#39;#&#39; + (function(h) &#123;</span><br><span class="line">        return new Array(7 - h.length).join(&quot;0&quot;) + h;</span><br><span class="line">    &#125;)((Math.random() * 0x1000000 &lt;&lt; 0).toString(16));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;*图片加载*&#x2F;</span><br><span class="line">imgLoadAll(arr,callback)&#123;</span><br><span class="line">    var arrImg &#x3D; []; </span><br><span class="line">    for (var i &#x3D; 0; i &lt; arr.length; i++) &#123;</span><br><span class="line">        var img &#x3D; new Image();</span><br><span class="line">        img.src &#x3D; arr[i];</span><br><span class="line">        img.onload &#x3D; function()&#123;</span><br><span class="line">            arrImg.push(this);</span><br><span class="line">            if (arrImg.length &#x3D;&#x3D; arr.length) &#123;</span><br><span class="line">                callback &amp;&amp; callback();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;*音频加载*&#x2F;</span><br><span class="line">loadAudio(src, callback) &#123;</span><br><span class="line">    var audio &#x3D; new Audio(src);</span><br><span class="line">    audio.onloadedmetadata &#x3D; callback;</span><br><span class="line">    audio.src &#x3D; src;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;*DOM转字符串*&#x2F;</span><br><span class="line">domToStirng(htmlDOM)&#123;</span><br><span class="line">    var div&#x3D; document.createElement(&quot;div&quot;);</span><br><span class="line">    div.appendChild(htmlDOM);</span><br><span class="line">    return div.innerHTML</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;*字符串转DOM*&#x2F;</span><br><span class="line">stringToDom(htmlString)&#123;</span><br><span class="line">    var div&#x3D; document.createElement(&quot;div&quot;);</span><br><span class="line">    div.innerHTML&#x3D;htmlString;</span><br><span class="line">    return div.children[0];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 光标所在位置插入字符，并设置光标位置</span><br><span class="line"> * </span><br><span class="line"> * @param &#123;dom&#125; 输入框</span><br><span class="line"> * @param &#123;val&#125; 插入的值</span><br><span class="line"> * @param &#123;posLen&#125; 光标位置处在 插入的值的哪个位置</span><br><span class="line"> *&#x2F;</span><br><span class="line">setCursorPosition (dom,val,posLen) &#123;</span><br><span class="line">    var cursorPosition &#x3D; 0;</span><br><span class="line">    if(dom.selectionStart)&#123;</span><br><span class="line">        cursorPosition &#x3D; dom.selectionStart;</span><br><span class="line">    &#125;</span><br><span class="line">    this.insertAtCursor(dom,val);</span><br><span class="line">    dom.focus();</span><br><span class="line">    console.log(posLen)</span><br><span class="line">    dom.setSelectionRange(dom.value.length,cursorPosition + (posLen || val.length));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;*光标所在位置插入字符*&#x2F;</span><br><span class="line">insertAtCursor(dom, val) &#123;</span><br><span class="line">    if (document.selection)&#123;</span><br><span class="line">        dom.focus();</span><br><span class="line">        sel &#x3D; document.selection.createRange();</span><br><span class="line">        sel.text &#x3D; val;</span><br><span class="line">        sel.select();</span><br><span class="line">    &#125;else if (dom.selectionStart || dom.selectionStart &#x3D;&#x3D; &#39;0&#39;)&#123;</span><br><span class="line">        let startPos &#x3D; dom.selectionStart;</span><br><span class="line">        let endPos &#x3D; dom.selectionEnd;</span><br><span class="line">        let restoreTop &#x3D; dom.scrollTop;</span><br><span class="line">        dom.value &#x3D; dom.value.substring(0, startPos) + val + dom.value.substring(endPos, dom.value.length);</span><br><span class="line">        if (restoreTop &gt; 0)&#123;</span><br><span class="line">            dom.scrollTop &#x3D; restoreTop;</span><br><span class="line">        &#125;</span><br><span class="line">        dom.focus();</span><br><span class="line">        dom.selectionStart &#x3D; startPos + val.length;</span><br><span class="line">        dom.selectionEnd &#x3D; startPos + val.length;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        dom.value +&#x3D; val;</span><br><span class="line">        dom.focus();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/JavaScript%E7%9A%84%E5%80%BC%E4%BC%A0%E9%80%92%E5%92%8C%E5%BC%95%E7%94%A8%E4%BC%A0%E9%80%92/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nirvana/images/headphoto.jpeg">
      <meta itemprop="name" content="nirvana">
      <meta itemprop="description" content="个人学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="涅槃快乐是金">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/JavaScript%E7%9A%84%E5%80%BC%E4%BC%A0%E9%80%92%E5%92%8C%E5%BC%95%E7%94%A8%E4%BC%A0%E9%80%92/" class="post-title-link" itemprop="url">JavaScript的值传递和引用传递</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-11 21:12:40" itemprop="dateCreated datePublished" datetime="2021-03-11T21:12:40+08:00">2021-03-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-03-10 13:43:55" itemprop="dateModified" datetime="2021-03-10T13:43:55+08:00">2021-03-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/nirvana/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>4k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>4 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <ul>
<li>  原文: <a target="_blank" rel="noopener" href="https://codeburst.io/explaining-value-vs-reference-in-javascript-647a975e12a0">Explaining Value vs. Reference in Javascript</a></li>
</ul>
<p><strong>为了保证可读性，本文采用意译而非直译。另外，本文版权归原作者所有，翻译仅用于学习。</strong></p>
<p>JavaScript有5种基本的数据类型，分别是：布尔、null、undefined、String和Number。这些基本类型在赋值的时候是通过值传递的方式。值得注意的是还有另外三种类型: Array、Function和Object，它们通过引用来传递。从底层技术上看，它们三都是对象。</p>
<h3 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a>基本数据类型</h3><p>如果一个基本的数据类型绑定到某个变量，我们可以认为该变量包含这个基本数据类型的值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var x &#x3D; 10;</span><br><span class="line">var y &#x3D; &#39;abc&#39;;</span><br><span class="line">var z &#x3D; null;</span><br></pre></td></tr></table></figure>
<p>当我们使用<code>=</code>将这些变量赋值到另外的变量，实际上是将对应的值拷贝了一份，然后赋值给新的变量。我们把它称作<code>值传递</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var x &#x3D; 10;</span><br><span class="line">var y &#x3D; &#39;abc&#39;;</span><br><span class="line"></span><br><span class="line">var a &#x3D; x;</span><br><span class="line">var b &#x3D; y;</span><br><span class="line"></span><br><span class="line">console.log(x, y, a, b) &#x2F;&#x2F; 10, &#39;abc&#39;, 10, &#39;abc&#39;</span><br></pre></td></tr></table></figure>
<p><code>a</code>和<code>x</code>都包含10，<code>b</code>和<code>y</code>都包含<code>&#39;abc&#39;</code>，并且它们是完全独立的拷贝，互不干涉。如果我们将<code>a</code>的值改变，<code>x</code>不会受到影响。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var x &#x3D; 10;</span><br><span class="line">var y &#x3D; &#39;abc&#39;;</span><br><span class="line">var a &#x3D; x;</span><br><span class="line">var b &#x3D; y;</span><br><span class="line">a &#x3D; 5;</span><br><span class="line">b &#x3D; &#39;def&#39;;</span><br><span class="line">console.log(x, y, a, b); &#x2F;&#x2F; 10, &#39;abc&#39;, 5, &#39;def&#39;</span><br></pre></td></tr></table></figure>
<p>###对象</p>
<p>如果一个变量绑定到一个非基本数据类型(Array, Function, Object)，那么它只记录了一个内存地址，该地址存放了具体的数据。注意之前提到指向基本数据类型的变量相当于包含了数据，而现在指向非基本数据类型的变量本身是不包含数据的。</p>
<p>对象在内存中被创建，当我们声明<code>arr = []</code>，我们在内存中创建了一个数组。<code>arr</code>记录的是该内存的地址。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var arr &#x3D; []; &#x2F;&#x2F; (a)</span><br><span class="line">arr.push(1); &#x2F;&#x2F; (b)</span><br></pre></td></tr></table></figure>

<p>当执行完(a)之后，内存中创建了一个空的数组对象，其内存地址为<code>#001</code>，<code>arr</code>指向该地址。</p>
<table>
<thead>
<tr>
<th>变量</th>
<th>地址</th>
<th>对象</th>
</tr>
</thead>
<tbody><tr>
<td>arr</td>
<td>#001</td>
<td>[]</td>
</tr>
</tbody></table>
<p>当执行完(b)之后，数组对象中多了一个元素，但是数组的地址依然没有变，<code>arr</code>也没有变。</p>
<table>
<thead>
<tr>
<th>变量</th>
<th>地址</th>
<th>对象</th>
</tr>
</thead>
<tbody><tr>
<td>arr</td>
<td>#001</td>
<td>[1]</td>
</tr>
</tbody></table>
<h3 id="引用传递"><a href="#引用传递" class="headerlink" title="引用传递"></a>引用传递</h3><p>对象是通过引用传递，而不是值传递。也就是说，变量赋值只会将地址传递过去。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var reference &#x3D; [1];</span><br><span class="line">var refCopy &#x3D; reference;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>变量</th>
<th>地址</th>
<th>对象</th>
</tr>
</thead>
<tbody><tr>
<td>reference</td>
<td>#001</td>
<td>[1]</td>
</tr>
<tr>
<td>refCopy</td>
<td>#001</td>
<td></td>
</tr>
</tbody></table>
<p><code>reference</code>和<code>refCopy</code>指向同一个数组。 如果我们更新<code>reference</code>，<code>refCopy</code>也会受到影响。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">reference.push(2);</span><br><span class="line">console.log(reference, refCopy); &#x2F;&#x2F; [1, 2], [1, 2]</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>变量</th>
<th>地址</th>
<th>对象</th>
</tr>
</thead>
<tbody><tr>
<td>reference</td>
<td>#001</td>
<td>[1, 2]</td>
</tr>
<tr>
<td>refCopy</td>
<td>#001</td>
<td></td>
</tr>
</tbody></table>
<p>###引用重新赋值</p>
<p>如果我们将一个已经赋值的变量重新赋值，那么它将包含新的数据或则引用地址。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var obj &#x3D; &#123; first: &#39;fundebug.com&#39;&#125;;</span><br><span class="line">obj &#x3D; &#123; second: &#39;fundebug.cn&#39;&#125;;</span><br></pre></td></tr></table></figure>

<p><code>obj</code>从指向第一个对象变为指向第二个对象。</p>
<table>
<thead>
<tr>
<th>变量</th>
<th>地址</th>
<th>对象</th>
</tr>
</thead>
<tbody><tr>
<td>obj</td>
<td>#001</td>
<td>{first: ‘fundebug.com’}</td>
</tr>
<tr>
<td></td>
<td>#002</td>
<td>{second: ‘fundebug.cn’}</td>
</tr>
</tbody></table>
<p>如果一个对象没有被任何变量指向，就如第一个对象(地址为<code>#001</code>)，JavaScript引擎的垃圾回收机制会将该对象销毁并释放内存。</p>
<p>###== 和 ===</p>
<p>对于引用类型的变量，<code>==</code>和<code>===</code>只会判断引用的地址是否相同，而不会判断对象具体里属性以及值是否相同。因此，如果两个变量指向相同的对象，则返回<code>true</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var arrRef &#x3D; [&#39;Hi!&#39;];</span><br><span class="line">var arrRef2 &#x3D; arrRef;</span><br><span class="line"></span><br><span class="line">console.log(arrRef &#x3D;&#x3D;&#x3D; arrRef2); &#x2F;&#x2F; true</span><br></pre></td></tr></table></figure>
<p>如果是不同的对象，即使包含相同的属性和值，也会返回<code>false</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var arr1 &#x3D; [&quot;Hi!&quot;];</span><br><span class="line">var arr2 &#x3D; [&quot;Hi!&quot;];</span><br><span class="line"></span><br><span class="line">console.log(arr1 &#x3D;&#x3D;&#x3D; arr2); &#x2F;&#x2F; false</span><br></pre></td></tr></table></figure>
<p>如果想判断两个不同的对象是否真的相同，一个简单的方法就是将它们转换为字符串然后判断。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var arr1str &#x3D; JSON.stringify(arr1);</span><br><span class="line">var arr2str &#x3D; JSON.stringify(arr2);</span><br><span class="line"></span><br><span class="line">console.log(arr1str &#x3D;&#x3D;&#x3D; arr2str); &#x2F;&#x2F; true</span><br></pre></td></tr></table></figure>

<p>另一个方法就是递归地判断每一个属性的值，直到基本类型位置，然后判断是否相同。</p>
<p>###函数参数</p>
<p>当我们将基本类型数据传入函数，函数会将这些数据拷贝赋值给函数的参数变量。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var hundred &#x3D; 100;</span><br><span class="line">var two &#x3D; 2;</span><br><span class="line">function multiply(x, y) &#123;</span><br><span class="line"> return x * y;</span><br><span class="line">&#125;</span><br><span class="line">var twoHundred &#x3D; multiply(hundred, two);</span><br></pre></td></tr></table></figure>

<p><code>hundred</code>的值拷贝给变量<code>x</code>，<code>two</code>的值拷贝给变量<code>y</code>。</p>
<h3 id="纯函数"><a href="#纯函数" class="headerlink" title="纯函数"></a>纯函数</h3><p>对于一个函数，给定一个输入，返回一个唯一的输出。除此之外，不会对外部环境产生任何附带影响。我们机会称该函数为纯函数。所有函数内部定义的变量在函数返回之后都被垃圾回收掉。</p>
<p>但是，如果函数的输入是对象(Array, Function, Object)，那么传入的是一个引用。对该变量的操作将会影响到原本的对象。这样的编程手法将产生附带影响，是的代码的逻辑复杂和可读性变低。</p>
<p>因此，很多数组函数，比如<code>Array.map</code>和<code>Array.filter</code>是以纯函数的形式实现。虽然它们的参数是一个数组变量，但是通过深度拷贝并赋值给一个新的变量，然后在新的数组上操作，来防止原始数组被更改。</p>
<p>我们来看一个例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function changeAgeImpure(person) &#123;</span><br><span class="line"> person.age &#x3D; 25;</span><br><span class="line"> return person;</span><br><span class="line">&#125;</span><br><span class="line">var alex &#x3D; &#123;</span><br><span class="line"> name: &#39;Alex&#39;,</span><br><span class="line"> age: 30</span><br><span class="line">&#125;;</span><br><span class="line">var changedAlex &#x3D; changeAgeImpure(alex);</span><br><span class="line">console.log(alex); &#x2F;&#x2F; &#123; name: &#39;Alex&#39;, age: 25 &#125;</span><br><span class="line">console.log(changedAlex); &#x2F;&#x2F; &#123; name: &#39;Alex&#39;, age: 25 &#125;</span><br></pre></td></tr></table></figure>

<p>在非纯函数<code>changeAgeImpure</code>中，将对象<code>person</code>的<code>age</code>更新并返回。原始的<code>alex</code>对象也被影响，<code>age</code>更新为25。</p>
<p>让我们来看如何实现一个纯函数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function changeAgePure(person) &#123;</span><br><span class="line"> var newPersonObj &#x3D; JSON.parse(JSON.stringify(person));</span><br><span class="line"> newPersonObj.age &#x3D; 25;</span><br><span class="line"> return newPersonObj;</span><br><span class="line">&#125;</span><br><span class="line">var alex &#x3D; &#123;</span><br><span class="line"> name: &#39;Alex&#39;,</span><br><span class="line"> age: 30</span><br><span class="line">&#125;;</span><br><span class="line">var alexChanged &#x3D; changeAgePure(alex);</span><br><span class="line">console.log(alex); &#x2F;&#x2F; &#123; name: &#39;Alex&#39;, age: 30 &#125;</span><br><span class="line">console.log(alexChanged); &#x2F;&#x2F; &#123; name: &#39;Alex&#39;, age: 25 &#125;</span><br></pre></td></tr></table></figure>
<p>我们通过<code>JSON.sringify</code>将对象变为一个字符串，然后再通过<code>JSON.parse</code>将字符串变回对象。通过该操作会生成一个新的对象。</p>
<p>###一道简单的面试题</p>
<p>值传递和引用传递经常在面试中被问到，来尝试回答一下如下代码如何输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">function changeAgeAndReference(person) &#123;</span><br><span class="line"> person.age &#x3D; 25;</span><br><span class="line"> person &#x3D; &#123;</span><br><span class="line"> name: &#39;John&#39;,</span><br><span class="line"> age: 50</span><br><span class="line"> &#125;;</span><br><span class="line"></span><br><span class="line"> return person;</span><br><span class="line">&#125;</span><br><span class="line">var personObj1 &#x3D; &#123;</span><br><span class="line"> name: &#39;Alex&#39;,</span><br><span class="line"> age: 30</span><br><span class="line">&#125;;</span><br><span class="line">var personObj2 &#x3D; changeAgeAndReference(personObj1);</span><br><span class="line">console.log(personObj1); &#x2F;&#x2F; -&gt; ?</span><br><span class="line">console.log(personObj2); &#x2F;&#x2F; -&gt; ?</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/JavaScript%E9%9D%A2%E8%AF%95%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nirvana/images/headphoto.jpeg">
      <meta itemprop="name" content="nirvana">
      <meta itemprop="description" content="个人学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="涅槃快乐是金">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/JavaScript%E9%9D%A2%E8%AF%95%E9%A2%98/" class="post-title-link" itemprop="url">JavaScript面试题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-11 21:12:40" itemprop="dateCreated datePublished" datetime="2021-03-11T21:12:40+08:00">2021-03-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-03-10 13:43:55" itemprop="dateModified" datetime="2021-03-10T13:43:55+08:00">2021-03-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/nirvana/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.4k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> (function()&#123; </span><br><span class="line">        var a &#x3D; b &#x3D;5;</span><br><span class="line">    &#125;)();</span><br><span class="line">console.log(b);</span><br></pre></td></tr></table></figure>

<p><strong>答案：</strong><code>5</code></p>
<blockquote>
<p>这个问题考查的要点是两个不同的作用域，’a’被var声明成了一个局部变量，但是’b’实际上没有被定义，所以它是一个全局变量。<br>这个问题还牵扯到另个一个比较重要的问题，就是strict mode，如果你选择了strict mode，上面的代码就会报Uncaught ReferenceError，因为b没有被定义，它可以帮你检查出代码的一些问题：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> (function()&#123; </span><br><span class="line">      &#39;use strict&#39;; </span><br><span class="line">      var a &#x3D; window.b &#x3D;5;</span><br><span class="line">    &#125;)();</span><br><span class="line">console.log(b);</span><br></pre></td></tr></table></figure>
<h2 id="创建“native”方法"><a href="#创建“native”方法" class="headerlink" title="创建“native”方法"></a>创建“native”方法</h2><p>写一个重复打印字符串对象的方法，输入一个整数，这个整数代表重复打印的字数，比如：</p>
<p> console.log(‘hello’.repeatify(3));</p>
<p>这样会打印出hellohellohello。</p>
<h3 id="答案："><a href="#答案：" class="headerlink" title="答案："></a>答案：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">String.prototype.repeatify &#x3D;String.prototype.repeatify ||function(times)&#123;</span><br><span class="line">    var str &#x3D;&#39;&#39;;</span><br><span class="line">    for(var i &#x3D;0; i &lt; times; i++)&#123;</span><br><span class="line">    str +&#x3D;this;</span><br><span class="line">    &#125;</span><br><span class="line">    return str;</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure>
<p>这个问题考查的是开发者对JavaScript继承和prototype属性的了解程度。</p>
<h2 id="Hoisting"><a href="#Hoisting" class="headerlink" title="Hoisting"></a>Hoisting</h2><p>下面这段代码的输出结果是什么？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function test()&#123;</span><br><span class="line">   console.log(a);</span><br><span class="line">   console.log(foo()); var a &#x3D;1; function foo()&#123;</span><br><span class="line">   return2;</span><br><span class="line">   &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   test();</span><br></pre></td></tr></table></figure>
<p><strong>答案:</strong><code>undefined和2</code></p>
<p>上面的代码和下面这段是等效的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function test()&#123; var a; function foo()&#123;</span><br><span class="line">    return2;</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(a);</span><br><span class="line">    console.log(foo());</span><br><span class="line">    a &#x3D;1;</span><br><span class="line">    &#125;</span><br><span class="line">    test();</span><br></pre></td></tr></table></figure>
<h2 id="在JavaScript中如何执行"><a href="#在JavaScript中如何执行" class="headerlink" title="在JavaScript中如何执行"></a>在JavaScript中如何执行</h2><p>通过下面的代码给出结果，解释一下你的答案：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var obj &#x3D;&#123;</span><br><span class="line">    fullname:&#39;Colin Ihrig&#39;,</span><br><span class="line">    prop:&#123;</span><br><span class="line">          fullname:&#39;Aurelio De Rosa&#39;,</span><br><span class="line">          getFullname:function()&#123;</span><br><span class="line">                  return this.fullname;</span><br><span class="line">           &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">console.log(obj.prop.getFullname()); var test &#x3D; obj.prop.getFullname;</span><br><span class="line">console.log(test());</span><br></pre></td></tr></table></figure>

<p><strong>答案：</strong><code>Aurelio De Rosa 和John Doe</code></p>
<h2 id="call-和-apply"><a href="#call-和-apply" class="headerlink" title="call() 和 apply()"></a>call() 和 apply()</h2><p>解决前面的问题之后让最后一个console.log()输出Aurelio De Rosa.</p>
<p><strong>答案：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(test.call(obj.prop));</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这个问题在于call()还是apply()。 </p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/Javascript%E8%87%AA%E8%BA%AB%E6%89%A7%E8%A1%8C%E6%95%88%E7%8E%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nirvana/images/headphoto.jpeg">
      <meta itemprop="name" content="nirvana">
      <meta itemprop="description" content="个人学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="涅槃快乐是金">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/Javascript%E8%87%AA%E8%BA%AB%E6%89%A7%E8%A1%8C%E6%95%88%E7%8E%87/" class="post-title-link" itemprop="url">Javascript自身执行效率</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-11 21:12:40" itemprop="dateCreated datePublished" datetime="2021-03-11T21:12:40+08:00">2021-03-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-03-10 13:43:55" itemprop="dateModified" datetime="2021-03-10T13:43:55+08:00">2021-03-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/nirvana/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.9k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Javascript中的作用域链、闭包、原型继承、eval等特性，在提供各种神奇功能的同时也带来了各种效率问题，用之不慎就会导致执行效率低下。</p>
<h2 id="1、全局导入"><a href="#1、全局导入" class="headerlink" title="1、全局导入"></a>1、全局导入</h2><p>我们在编码过程中多多少少会使用到一些全局变量（window,document,自定义全局变量等等），了解javascript作用域链的人都知道，在局部作用域中访问全局变量需要一层一层遍历整个作用域链直至顶级作用域，而局部变量的访问效率则会更快更高，因此在局部作用域中高频率使用一些全局对象时可以将其导入到局部作用域中，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> &#x2F;&#x2F;1、作为参数传入模块</span><br><span class="line">  (function(window,$)&#123;</span><br><span class="line">      var xxx &#x3D; window.xxx;</span><br><span class="line">      $(&quot;#xxx1&quot;).xxx();</span><br><span class="line">      $(&quot;#xxx2&quot;).xxx();</span><br><span class="line">  &#125;)(window,jQuery);</span><br><span class="line">  </span><br><span class="line">  &#x2F;&#x2F;2、暂存到局部变量</span><br><span class="line">  function()&#123;</span><br><span class="line">     var doc &#x3D; document;</span><br><span class="line">     var global &#x3D; window.global;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2、eval以及类eval问题"><a href="#2、eval以及类eval问题" class="headerlink" title="2、eval以及类eval问题"></a>2、eval以及类eval问题</h2><p>我们都知道eval可以将一段字符串当做js代码来执行处理，据说使用eval执行的代码比不使用eval的代码慢100倍以上（具体效率我没有测试，有兴趣同学可以测试一下）</p>
<p>JavaScript 代码在执行前会进行类似“预编译”的操作：首先会创建一个当前执行环境下的活动对象，并将那些用 var 申明的变量设置为活动对象的属性，但是此时这些变量的赋值都是 undefined，并将那些以 function 定义的函数也添加为活动对象的属性，而且它们的值正是函数的定义。但是，如果你使用了“eval”，则“eval”中的代码（实际上为字符串）无法预先识别其上下文，无法被提前解析和优化，即无法进行预编译的操作。所以，其性能也会大幅度降低</p>
<p>其实现在大家一般都很少会用eval了，这里我想说的是两个类eval的场景</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(new Function&#123;&#125;,setTimeout,setInterver)</span><br><span class="line"></span><br><span class="line">setTimtout(&quot;alert(1)&quot;,1000);</span><br><span class="line"></span><br><span class="line">setInterver(&quot;alert(1)&quot;,1000);</span><br><span class="line"></span><br><span class="line">(new Function(&quot;alert(1)&quot;))();</span><br></pre></td></tr></table></figure>
<p>上述几种类型代码执行效率都会比较低，因此建议直接传入匿名方法、或者方法的引用给setTimeout方法</p>
<h2 id="3、闭包结束后释放掉不再被引用的变量"><a href="#3、闭包结束后释放掉不再被引用的变量" class="headerlink" title="3、闭包结束后释放掉不再被引用的变量"></a>3、闭包结束后释放掉不再被引用的变量</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var f &#x3D; (function()&#123;</span><br><span class="line">    var a &#x3D; &#123;name:&quot;var3&quot;&#125;;</span><br><span class="line">    var b &#x3D; [&quot;var1&quot;,&quot;var2&quot;];</span><br><span class="line">    var c &#x3D; document.getElementByTagName(&quot;li&quot;);</span><br><span class="line">    &#x2F;&#x2F;****其它变量</span><br><span class="line">    &#x2F;&#x2F;***一些运算</span><br><span class="line">    var res &#x3D; function()&#123;</span><br><span class="line">        alert(a.name);</span><br><span class="line">    &#125;</span><br><span class="line">    return res;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
<p>上述代码中变量f的返回值是由一个立即执行函数构成的闭包中返回的方法res，该变量保留了对于这个闭包中所有变量（a,b,c等）的引用，因此这两个变量会一直驻留在内存空间中,尤其是对于dom元素的引用对内存的消耗会很大，而我们在res中只使用到了a变量的值，因此，在闭包返回前我们可以将其它变量释放</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">var f &#x3D; (function()&#123;</span><br><span class="line">    var a &#x3D; &#123;name:&quot;var3&quot;&#125;;</span><br><span class="line">    var b &#x3D; [&quot;var1&quot;,&quot;var2&quot;];</span><br><span class="line">    var c &#x3D; document.getElementByTagName(&quot;li&quot;);</span><br><span class="line">    &#x2F;&#x2F;****其它变量</span><br><span class="line">    &#x2F;&#x2F;***一些运算</span><br><span class="line">    &#x2F;&#x2F;闭包返回前释放掉不再使用的变量</span><br><span class="line">    b &#x3D; c &#x3D; null;</span><br><span class="line">    var res &#x3D; function()&#123;</span><br><span class="line">        alert(a.name);</span><br><span class="line">        &#125;</span><br><span class="line">    return res;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lzhwweb.github.io/nirvana/javascript/%E5%89%8D%E7%AB%AF/Js%E6%93%8D%E4%BD%9Cdom%E7%9A%84%E6%95%88%E7%8E%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nirvana/images/headphoto.jpeg">
      <meta itemprop="name" content="nirvana">
      <meta itemprop="description" content="个人学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="涅槃快乐是金">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/nirvana/javascript/%E5%89%8D%E7%AB%AF/Js%E6%93%8D%E4%BD%9Cdom%E7%9A%84%E6%95%88%E7%8E%87/" class="post-title-link" itemprop="url">Js操作dom的效率</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-11 21:12:40" itemprop="dateCreated datePublished" datetime="2021-03-11T21:12:40+08:00">2021-03-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-03-10 13:43:55" itemprop="dateModified" datetime="2021-03-10T13:43:55+08:00">2021-03-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/nirvana/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.7k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>在web开发过程中，前端执行效率的瓶颈往往都是在dom操作上面，dom操作是一件很耗性能的事情，如何才能在dom操作过程中尽量节约性能呢？</p>
<p><strong>1、减少reflow</strong></p>
<p><strong>什么是reflow？</strong></p>
<p>当 DOM 元素的属性发生变化 (如 color) 时, 浏览器会通知 render 重新描绘相应的元素, 此过程称为 repaint。</p>
<p>如果该次变化涉及元素布局 (如 width), 浏览器则抛弃原有属性, 重新计算并把结果传递给 render 以重新描绘页面元素, 此过程称为 reflow。</p>
<p><strong>减少reflow的方法</strong></p>
<ol>
<li> 先将元素从document中删除，完成修改后再把元素放回原来的位置（当对某元素及其子元素进行大量reflow操作时，1,2两种方法效果才会比较明显）</li>
<li> 将元素的display设置为”none”，完成修改后再把display修改为原来的值</li>
<li> 修改多个样式属性时定义class类代替多次修改style属性（for certain同学推荐）</li>
<li> 大量添加元素到页面时使用documentFragment</li>
</ol>
<p>例如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">for(var i&#x3D;0;i&lt;100:i++)&#123;</span><br><span class="line">    var child &#x3D; docuemnt.createElement(&quot;li&quot;);</span><br><span class="line">    child.innerHtml &#x3D; &quot;child&quot;;</span><br><span class="line">    document.getElementById(&quot;parent&quot;).appendChild(child);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上述代码会多次操作dom，效率比较低，可以改为下面的形式 创建documentFragment，将所有元素加入到docuemntFragment不会改变dom结构，最后将其添加到页面，只进行了一次reflow</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var frag &#x3D; document.createDocumentFragment();</span><br><span class="line">for(var i&#x3D;0;i&lt;100:i++)&#123;</span><br><span class="line">        var child &#x3D; docuemnt.createElement(&quot;li&quot;);</span><br><span class="line">        child.innerHtml &#x3D; &quot;child&quot;;</span><br><span class="line">    frag.appendChild(child);</span><br><span class="line">&#125;</span><br><span class="line">document.getElementById(&quot;parent&quot;).appendChild(frag);</span><br></pre></td></tr></table></figure>

<p><strong>2、暂存dom状态信息</strong></p>
<p>当代码中需要多次访问元素的状态信息，在状态不变的情况下我们可以将其暂存到变量中，这样可以避免多次访问dom带来内存的开销，典型的例子就是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ar lis &#x3D; document.getElementByTagName(&quot;li&quot;);</span><br><span class="line">for(var i&#x3D;1;i&lt;lis.length;i++)&#123;</span><br><span class="line">    &#x2F;&#x2F;***</span><br><span class="line">&#125;</span><br><span class="line">上述方式会在每一次循环都去访问dom元素，我们可以简单将代码优化如下</span><br><span class="line">var lis &#x3D; document.getElementByTagName(&quot;li&quot;);</span><br><span class="line">for(var i&#x3D;1,j&#x3D;lis.length ;i&lt;j;i++)&#123;</span><br><span class="line">    &#x2F;&#x2F;***</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>3、缩小选择器的查找范围</strong></p>
<p>查找dom元素时尽量避免大面积遍历页面元素，尽量使用精准选择器，或者指定上下文以缩小查找范围，以jquery为例</p>
<ul>
<li>  少用模糊匹配的选择器：例如$(“[name*=’_fix’]”)，多用诸如id以及逐步缩小范围的复合选择器$(“li.active”)等</li>
<li>  指定上下文：例如$(“#parent .class”)，$(“.class”,$el)等</li>
</ul>
<p><strong>4、使用事件委托</strong></p>
<p><strong>使用场景：</strong>一个有大量记录的列表，每条记录都需要绑定点击事件，在鼠标点击后实现某些功能，我们通常的做法是给每条记录都绑定监听事件，这种做法会导致页面会有大量的事件监听器，效率比较低下。</p>
<p><strong>基本原理</strong>：我们都知道dom规范中事件是会冒泡的，也就是说在不主动阻止事件冒泡的情况下任何一个元素的事件都会按照dom树的结构逐级冒泡至顶端。而event对象中也提供了event.target（IE下是srcElement）指向事件源，因此我们即使在父级元素上监听该事件也可以找到触发该事件的最原始的元素，这就是委托的基本原理。废话不多说，上示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(&quot;ul li&quot;).bind(&quot;click&quot;,function()&#123;</span><br><span class="line">    alert($(this).attr(&quot;data&quot;));</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>上述写法其实是给所有的li元素都绑定了click事件来监听鼠标点击每一个元素的事件，这样页面上会有大量的事件监听器。</p>
<p>根据上面介绍的监听事件的原理我们来改写一下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(&quot;ul&quot;).bind(&quot;click&quot;,function(e)&#123;</span><br><span class="line">    if(e.target.nodeName.toLowerCase() &#x3D;&#x3D;&#x3D;&quot;li&quot;)&#123;</span><br><span class="line">        alert($(e.target).attr(&quot;data&quot;));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>这样一来，我们就可以只添加一个事件监听器去捕获所有li上触发的事件，并做出相应的操作。</p>
<p>当然，我们不必每次都做事件源的判断工作，可以将其抽象一下交给工具类来完成。jquery中的delegate()方法就实现了该功能</p>
<p>语法是这样的$(selector).delegate(childSelector,event,data,function)，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(&quot;div&quot;).delegate(&quot;button&quot;,&quot;click&quot;,function()&#123;</span><br><span class="line">  $(&quot;p&quot;).slideToggle();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>参数说明（引自w3school）</p>
<p><img src="https://upload-images.jianshu.io/upload_images/10024246-d8f6aee706ebe272.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" title="Javascript执行效率小结_"></p>
<p>**Tips:**事件委托还有一个好处就是，即使在事件绑定之后动态添加的元素上触发的事件同样可以监听到哦，这样就不用在每次动态加入元素到页面后都为其绑定事件了</p>
<p>暂时先总结到这。</p>
<hr>
<p>原文来自：<a target="_blank" rel="noopener" href="http://www.cnblogs.com/gewei/archive/2013/03/29/2988180.html">www.cnblogs.com/gewei/archive/2013/03/29/2988180.html</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/nirvana/page/4/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/nirvana/">1</a><span class="space">&hellip;</span><a class="page-number" href="/nirvana/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/nirvana/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/nirvana/page/18/">18</a><a class="extend next" rel="next" href="/nirvana/page/6/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>


<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">nirvana</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">522k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">7:54</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
<script src="/nirvana/js/utils.js"></script><script src="/nirvana/js/motion.js"></script><script src="/nirvana/js/next-boot.js"></script>

  






  





</body>
</html>
